<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In previous article I’ve showed how to create a VSO build vNext to automatically publish a nuget package to Myget (or nuget) during a build. [Publishing a Nuget package to Nuget/Myget with VSO Build vNext]. Now it is time to create a more interesting build that automatically version your assemblies and nuget packages based on GitFlow.
GitFlow and GitVersion GitFlow is a simple convention to manage your branches in your Git repository to support a production branch, a developement branch and Feature/Support/Release/hotfix branches."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Integrating GitVersion and Gitflow in your vNext Build • Codewrecks"><meta property="og:description" content="In previous article I’ve showed how to create a VSO build vNext to automatically publish a nuget package to Myget (or nuget) during a build. [Publishing a Nuget package to Nuget/Myget with VSO Build vNext]. Now it is time to create a more interesting build that automatically version your assemblies and nuget packages based on GitFlow.
GitFlow and GitVersion GitFlow is a simple convention to manage your branches in your Git repository to support a production branch, a developement branch and Feature/Support/Release/hotfix branches."><meta property="og:url" content="https://www.codewrecks.com/post/old/2015/10/integrating-gitversion-and-gitflow-in-your-vnext-build/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="build"><meta property="article:tag" content="nuget"><meta property="article:published_time" content="2015-10-17T09:00:37+02:00"><meta property="article:modified_time" content="2015-10-17T09:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Integrating GitVersion and Gitflow in your vNext Build • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2015/10/integrating-gitversion-and-gitflow-in-your-vnext-build/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Integrating GitVersion and Gitflow in your vNext Build</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Integrating GitVersion and Gitflow in your vNext Build</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2015-10-17T09:00:37+02:00>2015, Oct 17</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>7 mins read</span></div></div></header><div class="container entry-content"><p>In previous article I’ve showed how to create a VSO build vNext to automatically publish a nuget package to Myget (or nuget) during a build. <a href=http://www.codewrecks.com/blog/index.php/2015/09/26/publishing-a-nuget-package-to-nugetmyget-with-vso-build-vnext/>[Publishing a Nuget package to Nuget/Myget with VSO Build vNext]</a>. Now it is time to create a <strong>more interesting build that automatically version your assemblies and nuget packages based on</strong> <a href=http://nvie.com/posts/a-successful-git-branching-model/><strong>GitFlow</strong></a>.</p><h2 id=gitflow-and-gitversion>GitFlow and GitVersion</h2><p><strong>GitFlow is a simple convention to manage your branches</strong> in your Git repository to support a production branch, a developement branch and Feature/Support/Release/hotfix branches. If you are completely new on the subject you can find information at the following locations:</p><ul><li>– <a href=http://nvie.com/posts/a-successful-git-branching-model/>A successful Git Branching Model</a></li><li>– <a href=http://danielkummer.github.io/git-flow-cheatsheet/>GitFlow CheatSheet</a></li></ul><p>You can find also a nice plugin for Visual Studio that will support GitFlow directly from Visual Studio IDE and <strong>also install GitFlow for your command line environment in one simple click.</strong> [<a href=https://visualstudiogallery.msdn.microsoft.com/f5ae0a1d-005f-4a09-a19c-3f46ff30400a>VS 2015 version</a>] [<a href=https://visualstudiogallery.msdn.microsoft.com/27f6d087-9b6f-46b0-b236-d72907b54683>VS 2013 version</a>]. Once you get accustomed with GitFlow, next step is having a look at <a href=http://semver.org/><strong>Semantic Versioning</strong></a> <strong>,  a simple versioning scheme to manage your packages and assemblies</strong>.</p><p>The really good news, is that a free tool called <a href=https://github.com/GitTools/GitVersion>GitVersion</a> exists to do semantic versioning simply examining your git history, branches and tags. I strongly suggest you to read documentation for GitVersion online, but if you want a quick start, in this blog post I’ll show you how you can integrate with a vNext VSO build.</p><blockquote><p>Thanks to GitVersion tool you can easily manage SemVer in a build vNext with little effort.</p></blockquote><h2 id=heading></h2><h2 id=how-gitversion-works-at-a-basic-level>How GitVersion works at a basic level</h2><p>GitVersion can be downloaded in the root folder of your repository; once it is there invokeing directly from command line with /ShowConfig parameter will generate a default configuration file.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>GitVersion /ShowConfig &amp;gt; GitVersionConfig.yaml</code></pre></td></tr></table></div></div><p>This will create a default configuration file for GitVersion in the root directory called GitVersionConfig.yaml. <strong>Having a configuration file is completely optional, because GitVersion can work with default options, but it is really useful to explicit default parameter to know how Semantic Versioning is handled by the tool</strong>.</p><p>I’m not going throught the various options of the tool, you can <a href=http://gitversion.readthedocs.org/en/latest/>read the doc online</a> and I’ll blog in future post about a couple of options I usually change from default.</p><p>For the scope of this article, everything I need to know is that, <strong>invoking gitversion.exe without parameters in a folder where you have a git repository with gitflow enabled will return you a Json data.</strong> Here is a possible example:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#f92672>{</span>
  <span style=color:#e6db74>&#34;Major&#34;</span>:1,
  <span style=color:#e6db74>&#34;Minor&#34;</span>:5,
  <span style=color:#e6db74>&#34;Patch&#34;</span>:<span style=color:#e6db74>&#34;0&#34;</span>,
  <span style=color:#e6db74>&#34;PreReleaseTag&#34;</span>:<span style=color:#e6db74>&#34;unstable.9&#34;</span>,
  <span style=color:#e6db74>&#34;PreReleaseTagWithDash&#34;</span>:<span style=color:#e6db74>&#34;-unstable.9&#34;</span>,
  <span style=color:#e6db74>&#34;BuildMetaData&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,
  <span style=color:#e6db74>&#34;BuildMetaDataPadded&#34;</span>:<span style=color:#e6db74>&#34;&#34;</span>,
  <span style=color:#e6db74>&#34;FullBuildMetaData&#34;</span>:<span style=color:#e6db74>&#34;Branch.develop.Sha.8ecde89ef5b97eabcf6e0035119643334ba40c4e&#34;</span>,
  <span style=color:#e6db74>&#34;MajorMinorPatch&#34;</span>:<span style=color:#e6db74>&#34;1.5.0&#34;</span>,
  <span style=color:#e6db74>&#34;SemVer&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable.9&#34;</span>,
  <span style=color:#e6db74>&#34;LegacySemVer&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable9&#34;</span>,
  <span style=color:#e6db74>&#34;LegacySemVerPadded&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable0009&#34;</span>,
  <span style=color:#e6db74>&#34;AssemblySemVer&#34;</span>:<span style=color:#e6db74>&#34;1.5.0.0&#34;</span>,
  <span style=color:#e6db74>&#34;FullSemVer&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable.9&#34;</span>,
  <span style=color:#e6db74>&#34;InformationalVersion&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable.9+Branch.develop.Sha.8ecde89ef5b97eabcf6e0035119643334ba40c4e&#34;</span>,
  <span style=color:#e6db74>&#34;BranchName&#34;</span>:<span style=color:#e6db74>&#34;develop&#34;</span>,
  <span style=color:#e6db74>&#34;Sha&#34;</span>:<span style=color:#e6db74>&#34;8ecde89ef5b97eabcf6e0035119643334ba40c4e&#34;</span>,
  <span style=color:#e6db74>&#34;NuGetVersionV2&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable0009&#34;</span>,
  <span style=color:#e6db74>&#34;NuGetVersion&#34;</span>:<span style=color:#e6db74>&#34;1.5.0-unstable0009&#34;</span>,
  <span style=color:#e6db74>&#34;CommitDate&#34;</span>:<span style=color:#e6db74>&#34;2015-10-17&#34;</span>
<span style=color:#f92672>}</span></code></pre></td></tr></table></div></div><p>This is the result of invoking GitVersion in develop branch; and now it is time to understand how these version numbers are determined.  <strong>My Master Branch is actually tagged 1.4.1 and since develop will be the next version, GitVersion automatically increments Minor versioning number</strong> (this is the default and can be configured). FullSemVer number contains the suffix unstable.9 because develop branch is usually unstable, and it is 9 commits behind the master. <strong>This will immediately gives me an idea on how much work is accumulating.</strong> Now if I start a release 1.5.0 using command <em>git flow release start 1.5.0</em>a new release/1.5.0 branch is created, and running GitVersion in that branch returns a FullSemVer of 1.5.0.0-beta0. <strong>The suffix is beta, because a release branch is something that will be released (so it is a beta) and 0 means that it is 0 commits behind develop branch</strong>. If you continue to push on release branch, the last number continues to increment.</p><p>Finally when you finish the release, the release branch is merged with master, master will be tagged 1.5.0 and finally release branch is merged back to develop. Now running GitVersion on develop returns version 1.6.0-unstable.xxx because now master is on 1.5.x version and develop will be the next version.</p><h2 id=how-you-can-use-gitversion-on-build-vnext>How you can use GitVersion on build vNext</h2><p>You can read about how to integrate GitVersion with build vNext directly on <a href=http://gitversion.readthedocs.org/en/latest/more-info/build-server-setup/tfs-build-vnext/>GitVersion documentation</a>, but I want to show you a slightly different approach in this article. <strong>The way I use GitVersion is, directly invoking in a Powershell build file that takes care of everything about versioning</strong>.</p><p>The main reason I choose this approach is: GitVersion can store all the information about versioning in environment variables, but in build vNext environment variables are not maintained by default between various steps. The second reason is: I <strong>already have a bulid that publish on nuget with build number specified as build variable, so I’d like to grab version numbers in my script and use it to change variable value of my build</strong>.</p><p>Thanks to PowerShell, parsing Json output is super easy, here is the simple instructions I use to invoke GitVersion and parse all json output directly into a PowerShell variable.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>$Output = &amp;amp;..\GitVersion\Gitversion.exe /nofetch | Out-String
$version = $output | ConvertFrom-Json</code></pre></td></tr></table></div></div><blockquote><p>Parsing output of GitVersion inside a PowerShell variable gives you great flexibility on how to use all resulting numbers from GitVersion</p></blockquote><p>Then I want to version my assemblies with versions returned by GitVersion. I starts creating some Powershell variables with all the number I need.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>$assemblyVersion = $version.AssemblySemver
$assemblyFileVersion = $version.AssemblySemver
$assemblyInformationalVersion = ($version.SemVer + <span style=color:#e6db74>&#34;/&#34;</span> + $version.Sha)</code></pre></td></tr></table></div></div><p>I’ll use the same PowerShell script I’ve described in <a href=http://www.codewrecks.com/blog/index.php/2014/01/11/customize-tfs-2013-build-with-powershell-scripts/>this post to version assemblies</a>, but this time all the versioning burden is taken by GitVersion. As you can see <strong>I’m using also the AssemblyInformationalVersion attribute that can be set as any string you want</strong>. This will give me a nice file version visible from Windows.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image17.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb17.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb17.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Versioning of the file visible in windows.</em></p><p>This immediately tells me: this is a beta version and gives me also the SHA1 of the commit used to create the DLL, maximum traceability with minimum effort. Now is time to use some build vNext commands to version nuget.</p><h2 id=heading-1></h2><h2 id=how-build-vnext-can-accepts-command-from-powershell>How Build vNext can accepts command from powershell</h2><p>Build vNext infrastructure can accept commands from PowerShell script looking at the output of the script, <a href=https://github.com/Microsoft/vso-agent-tasks/blob/master/docs/authoring/commands.md>as described in this page</a>.</p><blockquote><p>One of the coolest feature of build vNext is the ability to accept commands from console output of any script language</p></blockquote><p>Write-Output in powershell is all that I need to send commands to build vNext engine. Here is how I change some build variables:</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Write-Output (<span style=color:#e6db74>&#34;##vso[task.setvariable variable=NugetVersion;]&#34;</span> + $version.NugetVersionV2)
Write-Output (<span style=color:#e6db74>&#34;##vso[task.setvariable variable=AssemblyVersion;]&#34;</span> + $assemblyVersion)
Write-Output (<span style=color:#e6db74>&#34;##vso[task.setvariable variable=FileInfoVersion;]&#34;</span> + $assemblyFileVersion)
Write-Output (<span style=color:#e6db74>&#34;##vso[task.setvariable variable=AssemblyInformationalVersion;]&#34;</span> + $assemblyInformationalVersion)</code></pre></td></tr></table></div></div><p>If you remember my <a href=http://www.codewrecks.com/blog/index.php/2015/09/26/publishing-a-nuget-package-to-nugetmyget-with-vso-build-vnext/>previous post</a> on publishing Nuget Packages, you can see that I’ve used the NugetVersion variable in Build Definition to specify version number of nuget package. <strong>With the first line of previous snippet I’m automatically changing that number to the NugetVersionV2 returned by GitVersion.exe</strong>. This is everything I need to version my package with SemVer.</p><p>Finally I can use one of these two instructions to change the name of the build.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Write-Output (<span style=color:#e6db74>&#34;##vso[task.setvariable variable=build.buildnumber;]&#34;</span> + $version.FullSemVer)
Write-Output (<span style=color:#e6db74>&#34;##vso[build.updatebuildnumber]&#34;</span> + $version.FullSemVer)</code></pre></td></tr></table></div></div><p>The result of these two instructions is quite the same, the first one change build number and change also the variable build.buildnumber, while the second one only changes the number of the build, without changing the value of build.buildnumber variable.</p><h2 id=heading-2></h2><h2 id=final-result>Final result</h2><p>My favourite result is: my build numbers now have a real meaning for me, instead of simply representing a date and an incremental build like 20150101.2.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image18.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb18.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb18.png alt=image></a></a></p><p><em><strong>Figure 2</strong></em>: <em>Resulting builds with SemVer script</em></p><p>Now each build name immediately tells me the branch used to create the build, and the version of the code used. As you can see, <strong>release and master branches are in continuous deployment, because at each push the build is triggered and nuget package is automatically  published</strong>. For Develop branch the build is manual, and is done only when I want to publish a package with unstable version.</p><p>I can verify that everything is ok on MyGet/Nuget side, packages were published with the correct numbers.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image19.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb19.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2015/10/image_thumb19.png alt=image></a></a></p><p><em><strong>Figure 3</strong></em>: <em>SemVer is correctly applied on NuGet packages</em></p><blockquote><p>Thanks to GitVersion I can automatically version: build number, all the assemblies and NuGet package version with few lines of powershell.</p></blockquote><h2 id=heading-3></h2><h2 id=conclusions>Conclusions</h2><p>Thanks to build vNext easy of configuration plus powershell scripts and simple command model with script output, with few lines of code you are able to use Semantic Versioning in your builds.</p><p>This example shows you some of the many advantages you have with the new build system in VSO/TFS.</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/azure-devops/>Azure DevOps</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/build/>build</a>, <a class=tag href=/tags/nuget/>nuget</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2015/10/where-is-my-azure-vm-using-azure-cli/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Where is my Azure VM using Azure CLI</a></div><div class="next-entry sep-before"><a href=/post/old/2015/10/installing-sonarqube-on-windows-and-sql-server/><span class=screen-reader-text>Next post: </span>Installing SonarQUBE on windows and SQL Server<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>