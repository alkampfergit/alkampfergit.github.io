<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is the end of the journey of the last serie of posts. I’m now at the situation where I have a build that produces a single zip file with everything I need to deploy the software and a bunch of PowerShell scripts that relase the software using that zip as a source artifact.
Now it is time to automate the process with Release Management. I want to use RM because the process is automated on a chain of environments, but also I have traceability, auditing, and verification of the release procedures."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Create a release in TFS 2015  VSTS Release Management • Codewrecks"><meta property="og:description" content="This is the end of the journey of the last serie of posts. I’m now at the situation where I have a build that produces a single zip file with everything I need to deploy the software and a bunch of PowerShell scripts that relase the software using that zip as a source artifact.
Now it is time to automate the process with Release Management. I want to use RM because the process is automated on a chain of environments, but also I have traceability, auditing, and verification of the release procedures."><meta property="og:url" content="https://www.codewrecks.com/post/old/2016/06/create-a-release-in-tfs-2015-vsts-release-management/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="ReleaseManagement"><meta property="article:tag" content="Tfs"><meta property="article:tag" content="VSTS"><meta property="article:published_time" content="2016-06-18T08:00:37+02:00"><meta property="article:modified_time" content="2016-06-18T08:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Create a release in TFS 2015 VSTS Release Management • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2016/06/create-a-release-in-tfs-2015-vsts-release-management/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Create a release in TFS 2015 VSTS Release Management</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Create a release in TFS 2015 VSTS Release Management</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2016-06-18T08:00:37+02:00>2016, Jun 18</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>4 mins read</span></div></div></header><div class="container entry-content"><p>This is the end of the journey of the last serie of posts. I’m now at the situation where I have a build that produces a single zip file with everything I need to deploy the software and a bunch of PowerShell scripts that relase the software using that zip as a source artifact.</p><p>Now it is time to automate the process with Release Management. I want to use RM because the process is automated on a chain of environments, but also I have <strong>traceability, auditing, and verification of the release procedures.</strong> I’m not going to cover all the steps needed to create the a release definition, I want to focus on how simple is creating a Release Process when you adopt Zip+PowerShell approach. I strongly suggest to have a look <a href=https://www.visualstudio.com/en-us/features/release-management-vs.aspx>at official site</a> if you never heard of VSTS / TFS Release Management.</p><blockquote><p>If you have a zip and PowerShell files that release the software using only the zip, you are ten minutes away from a working Release Management definition</p></blockquote><p>Let’s start creating a first release, the most important aspect is <strong>adding a build as Artifacts source, this allows the release to consume what is produced by the build</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-9.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-9.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-9.png alt="this image shows how a build can be linked to Release MAnagement, so the RM process can access artifacts produced by the build"></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Add your build as a artifacts source for the release process</em></p><p>This build produces a couple of artifacts, the zipped file with everything and the set of PowerShell scripts needed to run the software (as I suggested they should always be stored in source control and moved as build artifacts). Thus <strong>the release process is really simple and is composed by only three steps.</strong> <a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-10.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-10.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-10.png alt="The entire release process is only three task, as described further in the post."></a></a></p><p><em><strong>Figure 2</strong></em>: <em>The entire release process is composed only by three scripts</em></p><p><strong>First two steps are used to copy zip file and installation scripts in a folder of the target machine</strong> (c:\deploy\jarvis\…). as you can see I’m using local administrator user, so this technique can be used even if the machine is not in the domain. You should now run this script on the machine where the agent is running.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-powershell data-lang=powershell>Set-Item WSMan<span style=color:#960050;background-color:#1e0010>:</span>\localhost\Client\TrustedHosts -Value WebTest -Force</code></pre></td></tr></table></div></div><p>This instruction should be run to the machine where the build agent is running, and specify that the target machine is a Trusted Hosts. <strong>If you are using domain credentials, this is not needed.</strong> The password is stored inside a Release variable, to use secret variable feature, so noone that can edit this release can see the password in clear text.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-11.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-11.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-11.png alt="Password for target machine is stored as secret variable in Configuration section"></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Password for target machine is stored as secret variable in Configuration section</em></p><p>Final step in Figure 2 is using the task to run the installation script in a remote machine machine.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-12.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-12.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-12.png alt="This image shows the configuration of the Remote Powershell task that allows you to execute a powershell in a remote machine."></a></a></p><p><em><strong>Figure 4</strong></em>: <em>Run PowerShell in a remote machine to install software</em></p><p>If you already tested the script manually, there is no reason why it should fail in RM process. Remember that you should <a href=http://www.codewrecks.com/blog/index.php/2016/05/27/avoid-using-shell-command-in-powershell-scipts/>never use command that interact with the shell</a>, and you should use Write-Output instead of Write-Host in your PowerShell script to be sure that no shell is used.</p><blockquote><p>With only three task I’ve created a release definition for my software</p></blockquote><p>Now you can trigger a new release, or have each build trigger a new release on the dev machine. The really interesting aspect is, <strong>using GitVersion and GitFlow, when you select the build you want to release, you can choose the branch you want to deploy instead of understanding what is in a build from its number</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-13.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-13.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-13.png alt="Thanks to gitversion when you trigger a new release you can choose the build that you want to deploy, and you can choose using a semantic versioning like 1.5.0 or 1.5.0-beta1 instead that a generic build number"></a></a></p><p><em><strong>Figure 5</strong></em>: <em>Trigger a release manually allows to specify the build you want to release</em></p><p>Ad you can see from Figure 5, <strong>you can easily choose the version of the software you want to release, it is really clear from the name of the build</strong>. Once the Release is started, if the deploy is set to occur automatically, the release immediately starts</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-14.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-14.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-14.png alt="This image simply shows that the release is in progress"></a></a></p><p><em><strong>Figure 6</strong></em>: <em>Relase is in progress</em></p><p>Once the release is in progress, from the summary you can verify what version of the software is released in what environment. I have only one environment for this demo, and I can verify that 4 minutes ago the version 1.5.0 is deployed in that environment.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image-15.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-15.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/image_thumb-15.png alt="This image shows all releases done with this definition. New release of version 1.5.0 was completed 4 minutes ago"></a></a></p><p><em><strong>Figure 7</strong></em>: <em>New release was deployed successful</em></p><p>I can now verify that the new version was really deployed correctly opening the software in target machine.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/SNAGHTML6a3303.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/SNAGHTML6a3303_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2016/06/SNAGHTML6a3303_thumb.png alt="Opening the software the new version confirm that the deploy was really successful"></a></a></p><p><strong>Fgiure 8:</strong> <em>New version of the software is correctly deployed</em></p><blockquote><p>Once you have everything in place and use simple PowerShell approach, setting up a release management process is really straightforward.</p></blockquote><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/devops/>DevOps</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/releasemanagement/>ReleaseManagement</a>, <a class=tag href=/tags/tfs/>Tfs</a>, <a class=tag href=/tags/vsts/>VSTS</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2016/06/how-to-manage-powershell-installation-scripts/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>How to manage PowerShell installation scripts</a></div><div class="next-entry sep-before"><a href=/post/old/2016/06/create-parametrized-test-to-allow-for-simpler-builds/><span class=screen-reader-text>Next post: </span>Create Parametrized test to allow for simpler Builds<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>