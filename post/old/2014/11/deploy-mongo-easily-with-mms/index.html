<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="One of the reason why Mongo is gaining a lot of momentum in the industry is the easy of use. Just download the package, start mongod and you are donw. When you are in production, you cannot surely simply install your mongo as a service, start it and then forget it without any kind of monitoring, because this will surely lead to problems. When is time to create more complex topologies, like sharding or replica set you can commit some mistakes and you have some tedious work to do."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Deploy mongo easily with mms • Codewrecks"><meta property="og:description" content="One of the reason why Mongo is gaining a lot of momentum in the industry is the easy of use. Just download the package, start mongod and you are donw. When you are in production, you cannot surely simply install your mongo as a service, start it and then forget it without any kind of monitoring, because this will surely lead to problems. When is time to create more complex topologies, like sharding or replica set you can commit some mistakes and you have some tedious work to do."><meta property="og:url" content="https://www.codewrecks.com/post/old/2014/11/deploy-mongo-easily-with-mms/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Mongo"><meta property="article:published_time" content="2014-11-01T10:00:37+02:00"><meta property="article:modified_time" content="2014-11-01T10:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Deploy mongo easily with mms • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2014/11/deploy-mongo-easily-with-mms/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Deploy mongo easily with mms</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Deploy mongo easily with mms</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2014-11-01T10:00:37+02:00>2014, Nov 01</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>5 mins read</span></div></div></header><div class="container entry-content"><p>One of the reason why <a href=http://www.mongodb.org/>Mongo</a> is gaining a lot of momentum in the industry is the easy of use. Just download the package, start mongod and you are donw. <strong>When you are in production, you cannot surely simply install your mongo as a service, start it and then forget it without any kind of monitoring, because this will surely lead to problems</strong>. When is time to create more complex topologies, like sharding or replica set you can commit some mistakes and you have some tedious work to do. I strongly suggest you to have a look at <a href=https://mms.mongodb.com>Mongo Mms</a>, because the online version offers a lot of functionalities for free, and every developer can use it to simplify even deployment of dev servers.</p><p><strong>The new version introduced some interesting capabilities to automatically deploy and manage your mongo instances with few clicks of your mouse</strong>. Suppose you want to create a classic replica set of 3 machines using 3 VM with Linux Ubuntu. After you register with MMS you can simply proceed to install the MMS automation agent on your machine with few steps</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Instruction to install automation agent on Ubuntu</em></p><p>Once you installed the automation agent on all of your machines, <strong>you can simply start creating your mongo deployment using MMS web interface</strong>. Agents poll server periodically for instructions, this implies that mms only requires your machines to be able to reach mms site to poll instructions and to send monitoring data. All of your machines can be in a private NAT network. If you go in the Administration section of MMS web interface you can check status of your agents.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-10.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-10_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-10_thumb.jpg alt=2014-10-29_17-04-10></a></a></p><p><em><strong>Figure 2</strong></em>: <em>List of all of your active agents</em></p><p>In this picture you can check not only automation agents, but also monitoring and backup ones. The automation one is the most important, because is the responsible for installing other agents and configuring your mongo instance. Now you can move to the deployment tab, and <strong>if some of your agents are out of date you can simply upgrade with a simple click</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-35.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-35_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-04-35_thumb.jpg alt=2014-10-29_17-04-35></a></a></p><p><em><strong>Figure 3</strong></em>: <em>List of all of your deployment servers and in the top area of the page you can check if some of the agents are old</em></p><p>In the upper right part of the deployment area, there is a button called Add that can be used to create a new deployment of Mongo, in this example I want to create a new Replica Set.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-07-23.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-07-23_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-07-23_thumb.jpg alt=2014-10-29_17-07-23></a></a></p><p><em><strong>Figure 4</strong></em>: <em>Create a replica set from the web interface.</em></p><p>Now it is just a matter of configuring all the options. The most important one is the Elegible Server RegExp where you should specify a regex that will select all the servesr that will take part of the replica set. In this example I used three distinct names, and I separated with a pipe to create a regex that choose all the servers, you can use prefix for convenience.</p><p>**<a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-34.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-34_thumb.jpg> <img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-34_thumb.jpg alt=2014-10-29_17-09-34></a></a>** ***Figure 5***: *Options to create a replica set.*</p><p>You can configure a lot of options and once you are done you can simply press Apply. This will create a script to create your new deployment, and you can review it before agents starts applying it to destination machines.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/SNAGHTML12f332.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/SNAGHTML12f332_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/SNAGHTML12f332_thumb.png alt=SNAGHTML12f332></a></a></p><p><em><strong>Figure 6</strong></em>: <em>Pressing apply creates the script but you still have time to review before starting deploy</em></p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-56.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-56_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-09-56_thumb.jpg alt=2014-10-29_17-09-56></a></a></p><p><em><strong>Figure 7</strong></em>: <em>Reviewing the script tells you every operation that will be triggered in your environment</em></p><p>Pressing Confirm & Deploy activates the script, and the web interface starts showing you the status of the various machines that will take part of the deploy.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-10-16.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-10-16_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-10-16_thumb.jpg alt=2014-10-29_17-10-16></a></a></p><p><em><strong>Figure 8</strong></em>: <em>Deploy starts and the web interface starts waiting for it to finish.</em></p><p>** ** The status is pushed from the automation client to the mms server and you can see the status of the single machines.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-23-02.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-23-02_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/2014-10-29_17-23-02_thumb.jpg alt=2014-10-29_17-23-02></a></a></p><p><em><strong>Figure 9</strong></em>: <em>One of the machine is in goal state, the other two still needs time</em></p><p>In <strong>Figure 9</strong> you can see that the machine avalanche reached Goal State, this means that the automation agent finished applying modification to the system. The other two machines are in WaitRsInit, this means that mongo is started and they are starting the replica set. Once everything is ok, all the machines are in the Goal State and the version of mongo installed in shown in Version column.</p><p>Now you can switch to View mode, where you can look at your deployment.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image1.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb1.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb1.png alt=image></a></a></p><p><em><strong>Figure 10</strong></em>: <em>View mode shows the status of your servers, as well as witch instance is primary and which instance is secondary</em></p><p>You can change every aspect of your deployment after it was provisioned, as an example I decided to change priority of one of my server after the replica set was up and running because avalanche VM is stored on an SSD and writing speed is higher than the other two VM.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image2.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb2.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2014/11/image_thumb2.png alt=image></a></a></p><p><em><strong>Figure 11</strong></em>: <em>Changing options after replica set is created.</em></p><p>You can also change the installed version of mongo, and the automation agents will take care of all operations needed to update or downgrade your instance of mongo.</p><p>If you use Amazon AWS, Mongo MMS will be also able to automatically provision your virtual machines in the cloud, automatically installing automation agents on it, so you can really deploy everything, from virtual machines to mongo with few clicks.</p><p>I must admit that I’m really impressed from deployment capabilities of Mongo MMS especially because you can manage up to 8 servers for free.</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/nosql/>NoSql</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/mongo/>Mongo</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2014/10/linking-vso-with-third-party-tools/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Linking VSO with third party tools</a></div><div class="next-entry sep-before"><a href=/post/old/2014/11/monitor-if-your-branch-will-generate-merge-conflicts-with-tfs-build/><span class=screen-reader-text>Next post: </span>Monitor if your branch will generate merge conflicts with TFS Build<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>