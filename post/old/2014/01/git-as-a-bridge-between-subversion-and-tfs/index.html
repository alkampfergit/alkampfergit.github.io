<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This is the scenario: Nablasoft company uses TFS with standard TFVC (TFS Version Control System) and needs to assign some of the work to some external Company (lets call it Acme), as an example developing for Android or iOs. The simplest solution is giving Acme developers access to TFS server, but then Nablasoft should pay the CAL for Acme developers, moreover, Acme uses subversion and they do not want to use another VCS unless it is strictly necessary."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Git as a bridge between Subversion and TFS • Codewrecks"><meta property="og:description" content="This is the scenario: Nablasoft company uses TFS with standard TFVC (TFS Version Control System) and needs to assign some of the work to some external Company (lets call it Acme), as an example developing for Android or iOs. The simplest solution is giving Acme developers access to TFS server, but then Nablasoft should pay the CAL for Acme developers, moreover, Acme uses subversion and they do not want to use another VCS unless it is strictly necessary."><meta property="og:url" content="https://www.codewrecks.com/post/old/2014/01/git-as-a-bridge-between-subversion-and-tfs/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Git"><meta property="article:tag" content="Tfs"><meta property="article:published_time" content="2014-01-01T07:00:37+02:00"><meta property="article:modified_time" content="2014-01-01T07:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Git as a bridge between Subversion and TFS • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2014/01/git-as-a-bridge-between-subversion-and-tfs/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Git as a bridge between Subversion and TFS</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Git as a bridge between Subversion and TFS</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2014-01-01T07:00:37+02:00>2014, Jan 01</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>5 mins read</span></div></div></header><div class="container entry-content"><p>This is the scenario: <em>Nablasoft company uses TFS with standard TFVC (TFS Version Control System) and needs to assign some of the work to some external Company (lets call it Acme), as an example developing for Android or iOs</em>. The simplest solution is giving Acme developers access to TFS server, but then Nablasoft should pay the CAL for Acme developers, moreover, Acme uses subversion and they do not want to use another VCS unless it is strictly necessary.</p><p>Since part of the contract requires Acme to give Nablasoft full code history, using Git-svn and Git-Tf can easily solves this scenario.</p><h2 id=setting-everything-up>Setting everything up</h2><p>First Step: Nablasoft managers can create another <a href=http://blogs.ripple-rock.com/colinbird/2012/11/19/MultipleTeamsWithMicrosoftTeamFoundationServer2012VisualStudioScrumV2xUpdated1452013.aspx>team</a> inside their Team Project to create a backlog that contains all the work that will be given to Acme Company. <strong>This will permits to Manager to schedule User Stories for Acme and monitor the progress</strong>. Only Nablasoft managers should access this team, no people from Acme company will ever use it.</p><p>After the backlog is created, you can simply email it to Acme developers with Email, or import in excel and send the excel.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/11/image.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/11/image_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/11/image_thumb.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Send a mail to Acme company with all details on the feature we want them to work on</em></p><p>This can be useful if Acme people can access the TFS of Nablasoft, but if we assume that Acme people has not access to Nablasoft Tfs, an addin of word like <a href="http://www.aitgmbh.de/?id=222">Word To Tfs</a> can be useful to <strong>load all definition of your specification into a single Word file that can be sent to Acme</strong>. <strong>The overall goal is being able to send specification to acme as well as the original Id of the Work Item in the original Nablasoft Tfs</strong>.</p><p>Acme developers will develop on their own Subversion server, they should give to Nablasoft manager access to this Svn repository and should include in every subversion commit a comment containing an hastag followed by the id of the Feature related to that commit, Es #884</p><p><strong>Nablasoft Manager will create a git clone of Acme Subversion repository using standard Git-Svn features of msysgit distribution with a simple command like</strong>.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git svn clone https://acmedev.googlecode.com/svn/trunk c:<span style=color:#ae81ff>\t</span>emp<span style=color:#ae81ff>\A</span>cmeCode</code></pre></td></tr></table></div></div><p>This creates a full clone of subversion repository, then Nablasoft’s manager can simply <strong>download all modification with a simple git svn rebase</strong> , <strong>but the interesting part is that he can simply connect the local git repository to standard TFS repository with the command</strong><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git-tf configure https://gianmariaricci.visualstudio.com /DefaultCollection $/NablasoftCompany/Main/ReactiveSite</code></pre></td></tr></table></div></div></p><p>You can specify any path in TFVC source control, in previous command line I’ve decided to map my local git repository to the $/NablasoftCompany/Main/ReactiveSite but you can choose whatever folder you want. Once you have connected the same Git repository to remote Svn server and to your TFVC based repository you are able to grab modification from subversion and move them to TFS. With a</p><p>Git svn rebase</p><p>You download all new modification from SVN repository, and when you want to move everything into TFVC repository you can issue a</p><p>git-tf checkin –deep</p><p><strong>and all modifications will be transferred to TFS</strong>. The nice stuff is that you can use a bunch of API call to automatically <a href=http://www.codewrecks.com/blog/index.php/2013/02/02/tfs-api-to-associate-work-item-with-check-in-using-comment-tags/>associate check-ins to Work Items based on comment content</a>.</p><h2 id=example>Example</h2><p>Suppose Acme did a copule of commit on SVN Repository</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image4.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb4.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb4.png alt=image></a></a></p><p><strong>Fifure 2:</strong> <em>Log of subversion repository showing the two commits with code related to a couple of features.</em></p><p>Now if you issue a git svn rebase you can download those two commits into local git repository. If you view log of Git repository you realize that all subversion checkins are cloned in local repository.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image5.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb5.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb5.png alt=image></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Commits cloned from subversion repository to a local Git repository</em></p><p>Now a <strong>git-tf checkin with –deep option will transfer those commits to TFVC</strong>. The first commit (the one with comment initial directory structure) is the first one used to create the trunk directory, so it will not cause any check-in in the final repository, but the other two were transferred.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image6.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb6.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb6.png alt=image></a></a></p><p><em><strong>Figure 4</strong></em>: <em>Check-ins created in TFVC from local Git repository thanks to git-tf tool.</em></p><p>The last part is running the little utility to associate Check-Ins and Work Items with hashtag in the comment. Thanks to this workflow, Nablasoft company is able to let Acme work with Subversion but they can keep all their work with history in a subfolder of Company’s TFS and maintaining association with Work Item. <strong>The only drawback of this approach is “Time Compression”, because all the commits that are transferred in TFS do not maintain the original date of Subversion Repository</strong> , because all changesetId should maintain sequential order of timestamp. To minimize this problem, you can script the import process manually and run several time a day.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image7.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb7.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/12/image_thumb7.png alt=image></a></a></p><p><em><strong>Figure 5</strong></em>: <em>Association between check-in and Work Item based on content of Comment.</em></p><h2 id=summary>Summary</h2><p>Thanks to git you can actually create a collaboration bridge between an external company that works with subversion and the internal TFS. The steps are</p><ol><li>Send to external company the list of task/feature to do thanks to TFS Work Item Emailling system</li><li>Let the external company works with their subversion, but ask them to include #workitemId in subversion comments</li><li>Clone subversion repository of External Company in a local Git Repository</li><li>Connect that repository to TFS with git-tf</li><li>Move code from TFS and subversion using git as a bridge</li></ol><p><em>If you use Git as a back end of your TFS Team Project the overall process will be even simpler, because you do not need to use git-tf, the association between code and Work Items will be automatically done by TFS and finally you will not suffer Time Compression issue.</em></p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/git/>Git</a>, <a class=tag href=/tags/tfs/>Tfs</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2013/12/using-saveorupdate-in-entity-framework/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Using SaveOrUpdate in Entity Framework</a></div><div class="next-entry sep-before"><a href=/post/old/2014/01/customize-tfs-2013-build-with-powershell-scripts/><span class=screen-reader-text>Next post: </span>Versioning assembly during TFS 2013 build with Powershell Scripts<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>