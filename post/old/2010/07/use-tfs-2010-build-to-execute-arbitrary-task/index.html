<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="When you deal with continuous integration, building source is just one part of the problem, you need to run test, calculate metrics, deploy on test server and so on. To orchestrate the execution of integration scripts you need an infrastructure that is capable of scheduling, logging, distribution of agent and a central point of manteniance, TFS2010 build system has all this characteristics and many other that makes is suitable to run integration script, not only build one."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Use TFS 2010 build to execute arbitrary task • Codewrecks"><meta property="og:description" content="When you deal with continuous integration, building source is just one part of the problem, you need to run test, calculate metrics, deploy on test server and so on. To orchestrate the execution of integration scripts you need an infrastructure that is capable of scheduling, logging, distribution of agent and a central point of manteniance, TFS2010 build system has all this characteristics and many other that makes is suitable to run integration script, not only build one."><meta property="og:url" content="https://www.codewrecks.com/post/old/2010/07/use-tfs-2010-build-to-execute-arbitrary-task/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="TFS Build"><meta property="article:published_time" content="2010-07-07T07:00:37+02:00"><meta property="article:modified_time" content="2010-07-07T07:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Use TFS 2010 build to execute arbitrary task • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2010/07/use-tfs-2010-build-to-execute-arbitrary-task/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Use TFS 2010 build to execute arbitrary task</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Use TFS 2010 build to execute arbitrary task</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2010-07-07T07:00:37+02:00>2010, Jul 07</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>3 mins read</span></div></div></header><div class="container entry-content"><p>When you deal with continuous integration, building source is just one part of the problem, you need to run test, calculate metrics, deploy on test server and so on. To orchestrate the execution of integration scripts you need an infrastructure that is capable of scheduling, logging, distribution of agent and a central point of manteniance, TFS2010 build system has all this characteristics and many other that makes is suitable to run integration script, not only build one.</p><p>Tfs2010 build system essentially runs a window workflow 4.0 script to do some standard operation like, build, run test, gated checkin, and bla bla bla, but nothing prevents you to use it to execute operation different from building sources. To make a very trivial example, just go to the source folder of a team project, locate the folder <em>BuildProcessTemplate</em>and create a copy of DefaultTemplate.xaml, now check in and start modifying it removing arguments, variable etc.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled1.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled_thumb1.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled_thumb1.png alt=Untitled></a></a></p><p><strong>Figure1:</strong> <em>A simple build to log something</em>.</p><p>In Figure1 I show a very trivial build, I removed completely everything, I create a sequence with very few actions, just to demonstrate that you can create a build that actually does not build anything, but it just execute an arbitrary workflow.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled2.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled2_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled2_thumb.png alt=Untitled2></a></a></p><p><strong>Figure2:</strong> <em>A detailed view of the build steps.</em></p><p>In Figure2 I give you a more detailed description of the trivial build, the first two activities are needed to recover build details and to update the build number, because build number is used in the logging system of TFS and if you do not update it, you will end with build called 1, 2, 3, etc. For this example I&rsquo;ve decided to give the build a number composed by the name of the build, followed by the sequential id. Finally I insert a couple of WriteBuildMessage activities, just to log something on the build. Since I&rsquo;m planning to build a skeleton to create a custom workflow that deploy a specific build, in Figure1 you can see that there is a parameter called BuildToUse, when you create a new build, and choose this new workflow, you are presented with this only parameter in the <em>process</em> tab, as visible in Figure3.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled3.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled3_thumb.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/Untitled3_thumb.png alt=Untitled3></a></a></p><p><strong>Figure3:</strong> <em>Choose your new workflow from a build definition</em></p><p>In Figure4 you can see the result of a build after the execution completes, as you can see, it simply logged something to the deploy log.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/image10.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/image_thumb10.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2010/07/image_thumb10.png alt=image></a></a></p><p><strong>Figure4:</strong> <em>The result of the build</em></p><p>This example is really trivial, but it shows you that you can use tfs2010 build to execute an arbitrary workflow, but thanks to tfs infrastructure you have all the benefit of a standard build: distributed agent, centralized log inside tfs, etc etc.</p><p>The next step is to modify this trivial workflow to execute something useful, like the deploy of a specific build on a test server.</p><p>alk.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/tfs-build/>TFS Build</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2010/07/deploy-on-remote-machine-during-builds/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Deploy on remote machine during builds</a></div><div class="next-entry sep-before"><a href=/post/old/2010/07/cache-layer/><span class=screen-reader-text>Next post: </span>Cache layer<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>