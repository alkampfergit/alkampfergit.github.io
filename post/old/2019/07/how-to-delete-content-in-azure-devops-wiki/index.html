<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Today I got a simple but interesting question about Azure DevOps, how can I completely delete the content of the wiki ? There are not so many reason for this, but sometimes you really want to start from scratch. Now suppose you have your wiki:

Figure 1: Wiki with a simple page
You have created some pages, you played a little bit with the wiki, you attached some cute pets photo and content to the wiki itself, maybe just to gain familiarity with the wiki itself."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="How to delete content in Azure DevOps wiki • Codewrecks"><meta property="og:description" content="Today I got a simple but interesting question about Azure DevOps, how can I completely delete the content of the wiki ? There are not so many reason for this, but sometimes you really want to start from scratch. Now suppose you have your wiki:

Figure 1: Wiki with a simple page
You have created some pages, you played a little bit with the wiki, you attached some cute pets photo and content to the wiki itself, maybe just to gain familiarity with the wiki itself."><meta property="og:url" content="https://www.codewrecks.com/post/old/2019/07/how-to-delete-content-in-azure-devops-wiki/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="AzureDevOps"><meta property="article:published_time" content="2019-07-05T14:00:37+02:00"><meta property="article:modified_time" content="2019-07-05T14:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>How to delete content in Azure DevOps wiki • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2019/07/how-to-delete-content-in-azure-devops-wiki/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>How to delete content in Azure DevOps wiki</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>How to delete content in Azure DevOps wiki</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2019-07-05T14:00:37+02:00>2019, Jul 05</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>6 mins read</span></div></div></header><div class="container entry-content"><p>Today I got a simple but interesting question about Azure DevOps, <strong>how can I completely delete the content of the wiki</strong> ? There are not so many reason for this, but sometimes you really want to start from scratch. Now suppose you have your wiki:</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-3.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-3.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-3.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Wiki with a simple page</em></p><p>You have created some pages, you played a little bit with the wiki, you attached some cute pets photo and content to the wiki itself, maybe just to gain familiarity with the wiki itself.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-4.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-4.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-4.png alt=image></a></a></p><p><em><strong>Figure 2</strong></em>: <em>Wiki with some content on it.</em></p><p><strong>Now you want to delete everything, such as that no member of the team should be able to retrieve pages and content anymore</strong>.</p><blockquote><p>Azure DevOps Wiki are nothing more than a Git Repository with MarkDown content, so you can directly manipulate git repository if you need to alter wiki history</p></blockquote><p><strong>To do a low level manipulation of the wiki, you should simply clone wiki repository locally</strong> , you can simply find repository url in the UI</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-5.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-5.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-5.png alt=image></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Clone wiki repository from the ui.</em></p><p>That menu option simply lets you to grab url of the repository, then you can simply clone the repository locally and verify all the commits done in the wiki. (I use command line but you can use any UI of you choiche)</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-6.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-6.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-6.png alt=image></a></a></p><p><em><strong>Figure 4</strong></em>: <em>Content of the wiki, a simple git repository</em></p><p>Now if you look a <strong>Figure 4</strong> you can notice that the wiki is nothing more than a git repository with a commit for each modification you did to the wiki. Now, if you really <strong>want to reset everything and start wiki from scratch,</strong> you can simply issue a</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git reset --hard SHA_OF_FIRST_COMMIT</code></pre></td></tr></table></div></div><p>Where SHA_OF_FIRST_COMMIT is the address of the very first commit, the one with the comment Initializing wiki, in my example 86ec4c9. After the command was executed your local wikiMaster branch point to the very first commit of the repository, an empty wiki.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-7.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-7.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-7.png alt=image></a></a></p><p><em><strong>Figure 5</strong></em>: <em>Your local wikiMaster branch was reset to the very first commit, now wikiMaster point to an empty wiki</em></p><p>Now you can simply push with –force option to reset remote branch to the very same commit.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git push --force</code></pre></td></tr></table></div></div><p><strong>Open again wiki page to verify that now it reverted to the original version.</strong> Actually the server still has the previous commit in the database, but they are not reachable anymore and they will be deleted over time by internal garbage collection.</p><blockquote><p>Resetting to the very first commit actually delete everything from the wiki, restoring it to its pristine content</p></blockquote><p>This scenario is not really common, but a real common scenario is when <strong>you mistakenly write something in the wiki, save the page and then you want to delete what you have written.</strong> There are lots of reason for this requirement, you mistakenly inserted sensitive data like passwords or tokens, or you simply write something that you want to permanently delete.</p><p>If you look to <strong>Figure 4</strong> , suppose you simply paste a wrong image and you want to remove that image and all related content from the history of the page. <strong>If you simply edit the wiki page, remove the image, then save again the page, the data is still in the history, anyone can find again the content you want to remove. The only solution is to rewrite git history.</strong> > <strong>Since a Wiki is a git repository, everything you did remain in history of the page, if you included sensitive information, even if you edit the page, removed that information and save again is not enough.</strong> From <strong>Figure 4</strong> you can verify that the incriminated commit is 97e520e. If you followed my previous example you can simply reset everything to the previous commit, <strong>actually deleteing every content that was inserted after that commit.</strong><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp>git reset --hard <span style=color:#ae81ff>97</span>e520e^
</code></pre></td></tr></table></div></div></p><p>Special char ^ indicates first parent of a commit, so previous instruction tell git to reset to the commit parent of bad commit. After this operation a git push – force will reset the branch from the server. <strong>The incriminated content is now gone, along with every content that was inserted after. Actually you restored wiki content to a past point in time.</strong> > <strong>Git reset –hard in your wiki repository allows you to restore a Wiki on a point in time, but everything that happened after that moment will be lost.</strong> This is not a perfect approach, suppose you realize that someone stored a password in the wiki some days ago, you <strong>do not want to lose everything but simply remove that specific content and leaving other commit unchanged.</strong> Thanks to git flexibility you can obtain this operation with an interactive rebase.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>git rebase 97e520e^ -i</code></pre></td></tr></table></div></div><p><strong>This will actually trigger a complete rewrite of the history from the parent of the incriminated commit to the last commit of the wiki.</strong> I’m not going to give you a complete explanation of an interactive rebase, but basically you are presented with the list of all commits, starting with the commit you want to delete to the latest commit in the branch.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-8.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-8.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-8.png alt=image></a></a></p><p><em><strong>Figure 6</strong></em>: <em>Delete the commit with interactive rebase.</em></p><p>In <strong>Figure 6</strong> you are seeing an example in which I have a single commit after the one you want to remove, but nothing changes if you have tons of commits after. <strong>You simply need to change the command for the first commit (the commit you want to delete) from pick to d (delete). Leave all other rows unchanged.</strong> Then simply save the script to continue (if you are not familiar with VIM simply press I to edit the file, change the file then press ESC to come back in command mode and press : then w then q then ENTER).</p><p>This command actually deletes only the commit you want to delete, leaving all following commits unchanged. <strong>You actually scissor knife removed a single bad save from your wiki.</strong> <a href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image-9.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-9.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2019/07/image_thumb-9.png alt=image></a></a></p><p><em><strong>Figure 7</strong></em>: <em>Commit was removed, local branch has not anymore commit 97e520e</em></p><p><strong>Now you should be 100% sure that no one else modified the wiki in the short timespan you need to clone and rebase the repository so you can issue a git push –force to overwrite content of the repo on AzDo instance.</strong> > <strong>A git interactive rebase is an operation where you are rewriting history, so you can selectively remove a single commit from the history.</strong> This will actually preserve all content of the wiki, <strong>you only removed a single commit from the wiki</strong>. There is no more history of that commit inside the Wiki. (actually deleted commit is still unreachable on the server, but there is no way for other to retrieve it).</p><p>If you want to completely remove a page with all the history of that page, you need to delete multiple commits, but luckily git has a filter-branch or more advanced comment. You can find more detail here <a href=https://help.github.com/en/articles/removing-sensitive-data-from-a-repository title=https://help.github.com/en/articles/removing-sensitive-data-from-a-repository>https://help.github.com/en/articles/removing-sensitive-data-from-a-repository</a></p><p>Have I ever told you how much I love Git? :)</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/git/>Git</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/azuredevops/>AzureDevOps</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2019/07/application-insight-snapshot-debugger-and-strange-production-problem/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Application insight Snapshot debugger and strange production problem</a></div><div class="next-entry sep-before"><a href=/post/old/2019/07/retrieve-image-in-work-item-description-with-tfs-api/><span class=screen-reader-text>Next post: </span>Retrieve image in Work Item Description with TFS API<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>