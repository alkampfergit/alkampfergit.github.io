<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Many people asked me during course if the ability to automatically deploy to Windows Azure Web Sites is restricted only to those people that are using TF Service (TFS on the cloud), or if they can deploy with an on-premise installation of TFS.
The answer is clearly YES, and I strongly suggest you to watch the Continuous Deployment with Microsoft Visual Studio session of Brian Randell to have a deep explanation of all the possibilities you have to achieve automatic deployment of your applications from Team Foundation Server."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Deploying on Azure Web sites from on-premise TFS • Codewrecks"><meta property="og:description" content="Many people asked me during course if the ability to automatically deploy to Windows Azure Web Sites is restricted only to those people that are using TF Service (TFS on the cloud), or if they can deploy with an on-premise installation of TFS.
The answer is clearly YES, and I strongly suggest you to watch the Continuous Deployment with Microsoft Visual Studio session of Brian Randell to have a deep explanation of all the possibilities you have to achieve automatic deployment of your applications from Team Foundation Server."><meta property="og:url" content="https://www.codewrecks.com/post/old/2013/07/deploying-on-azure-web-sites-from-on-premise-tfs/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Azure"><meta property="article:tag" content="TfsBuild"><meta property="article:published_time" content="2013-07-05T15:00:37+02:00"><meta property="article:modified_time" content="2013-07-05T15:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Deploying on Azure Web sites from on-premise TFS • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2013/07/deploying-on-azure-web-sites-from-on-premise-tfs/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Deploying on Azure Web sites from on-premise TFS</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Deploying on Azure Web sites from on-premise TFS</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2013-07-05T15:00:37+02:00>2013, Jul 05</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>3 mins read</span></div></div></header><div class="container entry-content"><p>Many people asked me during course if the ability to automatically deploy to Windows Azure Web Sites is restricted only to those people that are using TF Service (TFS on the cloud), or if they can <strong>deploy with an on-premise installation of TFS</strong>.</p><p>The answer is clearly YES, and I strongly suggest you to watch the <a href="http://channel9.msdn.com/Events/TechEd/NorthAmerica/2013/DEV-B329#fbid=ZeePmmQhK_G">Continuous Deployment with Microsoft Visual Studio session</a> of <a href=http://channel9.msdn.com/Events/Speakers/Brian-Randell>Brian Randell</a> to have a deep explanation of all the possibilities you have to achieve automatic deployment of your applications from Team Foundation Server.</p><p><strong>Deploying from on-premise TFS to Azure Web Site is simple</strong> , because <strong>it is only a matter of configuring msbuild to use the right publish file</strong>. The difference from an automatic deploy with TF Service is: when you publish from TF Service, the web site has a nice “deployment” tab listing all the deployment done with TF Service and a connection with Build Details, while if you publish from on-premise you loose this data and the Web Site completely ignores who and when the site was deployed.</p><p>To deploy on Azure from on-premise TFS you just need to download the publish profile of the Web Site into a local folder.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image16.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb16.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb16.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Download the publish profile</em></p><p>Then you can right-click your web project node from the Solution Explorer in Visual Studio and choose “publish”, from there you <strong>can “import” the file you just downloaded</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image17.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb17.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb17.png alt=image></a></a></p><p><em><strong>Figure 2</strong></em>: <em>Import the publish profile</em></p><p>This file contains all the information needed to publish against that Web Site, you can modify as you need</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image18.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb18.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb18.png alt=image></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Details of the publish definition.</em></p><p>From the list of definition ( <strong>Figure 2</strong> ) I usually rename the publish file to something more useful, as an example AzureDemoWebSite.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image19.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb19.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb19.png alt=image></a></a></p><p><em><strong>Figure 4</strong></em>: <em>Rename your publish file</em></p><p>I usually modify the publication file to <a href=http://www.codewrecks.com/blog/index.php/2013/05/22/continuous-deployment-on-windows-azure-with-database-projects/>include publishing the database to the Azure Database</a>, you do not need to specify the connection string of the database, it will be taken from the profile and <strong>the only piece of information that the script needs is the relative path of the.dacpac file to deploy</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image20.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb20.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb20.png alt=image></a></a></p><p><em><strong>Figure 5</strong></em>: <em>Modification done to the publishing profile to deploy a database project</em></p><p>Now you should check-in everything and you are only one step away from publishing from azure. Just create a standard build, but instruct MSBUILD that you want to also deploy with a specific publication profile. This can be done in the Advanced section of the Build Process</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image21.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb21.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb21.png alt=image></a></a></p><p><em><strong>Figure 6</strong></em>: <em>Instruct MSBuild with custom Arguments to deploy the site.</em></p><p>The whole string is this one</p><blockquote><p>/p:DeployOnBuild=true /p:PublishProfile=AzureDemoWebSite /p:AllowUntrustedCertificate=true</p><p>/p:UserName=$tailspinonpremise /p:Password=2Xocq…</p></blockquote><p>The tricky part is specifying correct credentials. <strong>You can find username and password directly opening the original publication profile file you downloaded from azure.</strong> Publish file in Visual Studio or your standard Azure credential wont work. The username is usually in the form $websitename and the password is a long sequence of characters and numbers, you cannot miss it.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image22.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb22.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb22.png alt=image></a></a></p><p><em><strong>Figure 7</strong></em>: <em>The original content of the publication profile, it contains the username and password that you need to publish to that web project</em></p><p>Now you can simply fire the build, wait for it to complete and your web site will be automatically deployed.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image23.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb23.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb23.png alt=image></a></a></p><p><em><strong>Figure 8</strong></em>: <em>Build succeeded and site was deployed</em></p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image24.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb24.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2013/07/image_thumb24.png alt=image></a></a></p><p><em><strong>Figure 9</strong></em>: <em>Site was deployed</em></p><p>Publishing on on-premise IIS is quite the same, it is just a matter of creating the right publish file and use it to deploy during a build.</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/azure/>Azure</a>, <a class=tag href=/tags/tfsbuild/>TfsBuild</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2013/07/manage-symbol-server-on-azure-or-on-premise-vm-and-tf-service/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Manage Symbol server on Azure or on-premise VM and TF Service</a></div><div class="next-entry sep-before"><a href=/post/old/2013/07/aggregate-completed-and-estimated-work-in-team-foundation-server-user-stories-using-excel/><span class=screen-reader-text>Next post: </span>Aggregate Completed and Estimated Work in Team Foundation Server User Stories using Excel<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>