<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="This morning I completely wasted 2 hours of my life, here is the history.
I&rsquo;m rewriting some nant script for a series of articles in italian language, this morning I did some modification to the base script, and I applied this new base script to a solution with 6 projects.
Everything went fine, except for the Test project, that does not compile because it does not see internals members of a project."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Occamrsquos Razor probably is the better principle to keep in mind • Codewrecks"><meta property="og:description" content="This morning I completely wasted 2 hours of my life, here is the history.
I&rsquo;m rewriting some nant script for a series of articles in italian language, this morning I did some modification to the base script, and I applied this new base script to a solution with 6 projects.
Everything went fine, except for the Test project, that does not compile because it does not see internals members of a project."><meta property="og:url" content="https://www.codewrecks.com/post/old/2009/05/occams-razor-probably-is-the-better-principle-to-keep-in-mind/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Experiences"><meta property="article:published_time" content="2009-05-23T02:00:37+02:00"><meta property="article:modified_time" content="2009-05-23T02:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Occamrsquos Razor probably is the better principle to keep in mind • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2009/05/occams-razor-probably-is-the-better-principle-to-keep-in-mind/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Occamrsquos Razor probably is the better principle to keep in mind</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Occamrsquos Razor probably is the better principle to keep in mind</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2009-05-23T02:00:37+02:00>2009, May 23</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>4 mins read</span></div></div></header><div class="container entry-content"><p>This morning I completely wasted 2 hours of my life, here is the history.</p><p>I&rsquo;m rewriting some nant script for a series of articles in italian language, this morning I did some modification to the base script, and I applied this new base script to a solution with 6 projects.</p><p>Everything went fine, except for the Test project, that does not compile because it does not see internals members of a project. I immediately did a verification, if I convert from internal to public, methods from base project, everything compiled.</p><p>I immediately think <em>O my God, I made some mistake in the script, and it does not see my InternalsVisibleTo attribute in the library during compilation</em>. I begin investigating, I search with google if someone previously had problem with &lt;csc> task and internalsVisibleTo, I verify if csc compiler has some option to use internalsVisibleTo, but I did not find anything. I fired reflector to inspect assembly generated by the script, to verify that it has the internalsVisibleTo attribute, and again it was everything is ok.</p><p>So I decided to go deep, enable Verbose=<em>false</em> of &lt;csc> nant task, and I look at the option file generated.</p><p>If you does not know the csc.exe compiler, I tell you that it can accepts parameters stored in file. You can simply fire csc.exe @filename and it is the same of including all lines of filename in the command line. This approach is really useful to make command line clearer. Nant uses this approach, so I verified in documentation that if you enable verbose=<em>true</em> nant tells you the name of the temporary filename used to store all csc.exe options, i renamed it into <strong>nant.opt</strong>. So i looked at the option file and I begin comparing it with the csc.exe commandline issued by visual studio. I raise verbosity level of building in Visual studio, takes the csc.exe generated commandline, put it in a option file <strong>vs.opt</strong> and started to make tests.</p><p>I immediately verified that csc.exe @nant.opt failed but csc.exe @vs.opt compiled well. I started to copy one option from the VS option file to nant option file, and fire csc.exe at each change, but nothing worked, I&rsquo;ve completely changed all the options except one, the /out that specifies output assembly file name, vs.opt had</p><blockquote><p>/out:obj/debug/DotNetMarche.TestHelpers.dll</p></blockquote><p>the nant.opt had</p><blockquote><p>&ldquo;/out:C:\Develop\dotnetmarcheproject\trunk\Artifacts\Builds\net-3.5\DotNetMarche.TestHelper.dll&rdquo;</p></blockquote><p>This is the last option line that was different, I left for last because I could not think that location of generated file could be important. But when I copy this line from the vs file to the nant one&mldr; oh my God&mldr; it compiled.</p><p>I began to thing &ldquo;mmm maybe in the obj/debug there are other files that are needed to correctly use the internalsvisibleto, and bla bla bla, looked in internet, read a lot of documentation on csc.exe compiler.Etc Etc ETc.</p><p>After a couple of hours I really felt lost, except the first 30 minutes I used to change script, the next 90 minutes were completely wasted, the script still does not work and I really cannot find the reason why it compiled if I generate the file in another directory.</p><p>This happened because I completely forgetted the <a href=http://en.wikipedia.org/wiki/Occam%27s_razor>Occam&rsquo;s Razor</a> principle. If I followed this principle, immediately after the first failing build I should started to think <em>Why the assembly A does not see internals classes of assembly B even if I inserted InternalsVisibleTo?</em>. The most obvious situation is <em>the script forget to include the source file with the attribute, so I could check with reflector (30 seconds of time)</em>. Then another obvious reason could be a mistyping of the name of the assembly in the InternalsVisibleTo attribute, but since it compiled in visual studio it is not the real reason. Then the third obvious reason is that assembly A was not signed, again 30 seconds check with reflector. Now instead of being investigating csc.exe options as I did, I should think again at the Occam&rsquo;s razor, and the fourth obvious reason is that I mistyped the assembly name in the build file. If you look at the previous two lines you can find that in visual studio the assembly name is DotNetMarche.TestHelper <strong>s</strong>.dll and the one generated by the nant missed the S. I simply mistyped the project name in the default.build for that project&mldr;.an hour an half lost to find this simple error.</p><p>I strongly suggest to everyone, to always follow the Occam&rsquo;s Razor principle, if something does not work, probably the cause is really simple, start to make simple hypothesis, moving gradually to most complicated ones.</p><p>alk.</p><p>Tags: <a href=http://technorati.com/tag/Experiences>Experiences</a></p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/experiences/>Experiences</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/experiences/>Experiences</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2009/05/aspnet-objectdatasource-and-castle-windsor/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>AspNet ObjectDataSource and Castle Windsor</a></div><div class="next-entry sep-before"><a href=/post/old/2009/05/windows-7-rc-acquisition-from-dv-camera/><span class=screen-reader-text>Next post: </span>Windows 7 RC acquisition from DV camera<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>