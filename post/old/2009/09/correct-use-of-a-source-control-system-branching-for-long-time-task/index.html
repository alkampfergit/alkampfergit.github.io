<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Source control system is probably developer&rsquo;s best friend, but quite often people use only a small percentage of its functionalities. One of the most missed feature is a correct use of a branch. Let&rsquo;s make a concrete example. Suppose that developer A needs to implement a big feature, it estimates a week to complete it, and while he is working at this feature he needs also to modify some basic part of the system."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Correct use of a Source Control System branching for long time task • Codewrecks"><meta property="og:description" content="Source control system is probably developer&rsquo;s best friend, but quite often people use only a small percentage of its functionalities. One of the most missed feature is a correct use of a branch. Let&rsquo;s make a concrete example. Suppose that developer A needs to implement a big feature, it estimates a week to complete it, and while he is working at this feature he needs also to modify some basic part of the system."><meta property="og:url" content="https://www.codewrecks.com/post/old/2009/09/correct-use-of-a-source-control-system-branching-for-long-time-task/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Branch"><meta property="article:tag" content="Tfs"><meta property="article:published_time" content="2009-09-30T00:00:37+02:00"><meta property="article:modified_time" content="2009-09-30T00:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Correct use of a Source Control System branching for long time task • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2009/09/correct-use-of-a-source-control-system-branching-for-long-time-task/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Correct use of a Source Control System branching for long time task</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Correct use of a Source Control System branching for long time task</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2009-09-30T00:00:37+02:00>2009, Sep 30</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>6 mins read</span></div></div></header><div class="container entry-content"><p>Source control system is probably developer&rsquo;s best friend, but quite often people use only a small percentage of its functionalities. One of the most missed feature is a correct use of a branch. Let&rsquo;s make a concrete example. Suppose that developer A needs to implement a big feature, it estimates a week to complete it, and while he is working at this feature he needs also to modify some basic part of the system. The problem is: <em>until the developer has finished the new feature the code is in not in stable condition, and it can even not compile correctly.</em></p><p>A standard way to proceed is the following one.</p><ol><li>dev A issue a get latest</li><li>dev A begins to modify code in local copy</li><li>dev A periodically executes a Get Latest and merge changes made by others with the code in the working copy.</li><li>dev A finished the new feature, executes a final Get Latest, verify that everything is ok and finally commits all modifications.</li></ol><p>What is wrong with this process?</p><ul><li>until A commits everything in the trunk, new code is only in his hard disk, if it fails dev A losts everything.</li><li>if the new feature needs to be developed by more than a single developer, say A and B and C it is impossible to work this way.</li><li>if A wants another developer to review his code, he needs to send all modification to other dev for review, maybe zipping local folder.</li></ul><p>This situation can be solved with a branch in a more efficient way. A branch is nothing than a special copy of a file or folder located in source control. I said special because Source Control System keeps track of the original source of the copy, and files are not really copied until someone makes a modification to the copied file. This permits to minimize the impact on the size of source control system but at the same time the <a href=http://en.wikipedia.org/wiki/Revision_control>SCM</a> knows that a file is related to its original counterpart. To create a branch in TFS simply go to the source control view, right click a folder and choose Branch. You got this window</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image18.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb18.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb18.png alt=image></a></a></p><p>In this example I&rsquo;m branching the entire src folder to a folder called Branches/TestBranch, and I&rsquo;m branching from the latest version. After you commit the branch, you will find that a complete copy of the src folder is now present in the branch folder</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image19.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb19.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb19.png alt=image></a></a></p><p>Ok, you can now open the solution in the branch and begin working to the new feature, even if the code is not compiling, you can check-in with no problem. In my example I&rsquo;ve modified a file to make solution not compile, then I look at the pending changes.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image20.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb20.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb20.png alt=image></a></a></p><p>I can commit with no problem because modified file will be checked-in only to the branch. Other developers can continue to work in the trunk without being disturbed by my modification. Now suppose that another developer modify the same file I&rsquo;ve modified in the branch. Periodically you need to verify if someone has modified the trunk to keep your branch in sync. Remember that you need to merge quite often, because in this way you always merge a little bit of code, if you wait for your work to be finished you will have to do a Huge merge, and it can become a pain. Now I simply click on the src folder and choose compare</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image21.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb21.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb21.png alt=image></a></a></p><p>And I decided to compare it with the server version that I&rsquo;ve commited to the branch version of the project.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image22.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb22.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb22.png alt=image></a></a></p><p>This shows me all differences between the two folders.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image23.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb23.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb23.png alt=image></a></a></p><p>Ok two files are different, now you need to understand what to merge, since I know that I&rsquo;ve modified AssertBaseTest it is normal that is different, but the ConstraintBaseTest is surely being modified by someone else. If you need information you can right click the file and view history, you have the possibility to look for history in the source (left side) or the target (right side). In this situation the source is the trunk, while target is my branch. Let&rsquo;s see the history of the AssertBaseTest.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image24.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb24.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb24.png alt=image></a></a></p><p>Red one is the history for the source, you can see that in changeset 142 guardian modified a test. In blue one you see modification made in the branch, in changeset 140 there is the branch, while in 141 I changed a file to make it not compile. Since other people modified the file I need to do a merge. So I return to the code view, find the file in the source I want to merge and right-click and choose merge.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image25.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb25.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb25.png alt=image></a></a></p><p>Since Tfs knows that I branched this file it presents me this windows</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image26.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb26.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb26.png alt=image></a></a></p><p>You can verify that it permits me to choose only right target branch, I choose to branch all changeset, or you can even choose to merge to a specific changeset. Now when I merge the file a conflict is raised, because modifications are incompatible (me and other dev modified the same file), so you can simply edit conflicts in the standard merge tool. After merge is complete you can verify that file was really merged looking at his history.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image27.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb27.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb27.png alt=image></a></a></p><p>If you merge now ConstraintBaseTest.cs that was modified in the trunk no conflict happens and modification in the trunk are ported in the branch. Clearly in real situation you will do a merge of the entire src folder, and not file by file :) this is only to show you the details.</p><p>When you finished your new feature you can simply do a final merge of all the trunk, verify that everything is ok and now you are ready to reintegrate the branch into the trunk.</p><p>Merge operation is a very specific operation that assures to SCM that all modification of the trunk are moved and merged in the branch. After the last merge, you verify that everything in the branch is OK, and now you are ready to reintegrate the branch to the trunk. To reintegrate you simply right click the branch folder in source control view, and choose merge, and merge again with the original src directory. Now you will get conflicts for each file that was modified in the branch and in the trunk, but since you already merge changes from the trunk, and verified that everything is ok, you can now overwrite trunk version with merge version.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image28.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb28.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2009/09/image-thumb28.png alt=image></a></a></p><p>Now the trunk contains your new feature, but without being disturbed during its developement. This way to proceed has the following advantages.</p><ul><li>More than one developer can work at new feature working in the branch</li><li>The branch is under SCM, so you get history, conflict handling, and it is backup with other source.</li><li>You have full history of the branch, so you can track back every modification made by source code in the branch to create new feature.</li><li>You can associate check-in of branches with team foundation work item.</li><li>If you need someone review your code you can simply tell him to download the branch and do a review.</li></ul><p>Alk.</p><p>Tags: <a href=http://technorati.com/tag/SCM>SCM</a> <a href=http://technorati.com/tag/Branch>Branch</a></p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a>, <a class=category href=/categories/visual-studio/>Visual Studio</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/branch/>Branch</a>, <a class=tag href=/tags/tfs/>Tfs</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2009/09/use-ioc-in-the-ui/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Use IoC in the UI</a></div><div class="next-entry sep-before"><a href=/post/old/2009/10/mvp-team-system/><span class=screen-reader-text>Next post: </span>Mvp Team System<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>