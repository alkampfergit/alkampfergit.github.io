<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="When you work with Big databases with many records and not uniform distribution of data into columns used for join or where conditions, you can have really bad performance problem due to Query Plan caching. I do not want to give a deep explanation of this problem, you can find information here, but I want to outline the general problem to make clear what is happening.
We can argue a lot why this problem happens in a database engine, but basically I have a really bad situation where the db stores data of multiple customers with really non uniform distribution of data (some of them have ~1000 rows for each table, others have ~100."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Use Sql Server Query Hints with NHibernate HQL and ICriteria • Codewrecks"><meta property="og:description" content="When you work with Big databases with many records and not uniform distribution of data into columns used for join or where conditions, you can have really bad performance problem due to Query Plan caching. I do not want to give a deep explanation of this problem, you can find information here, but I want to outline the general problem to make clear what is happening.
We can argue a lot why this problem happens in a database engine, but basically I have a really bad situation where the db stores data of multiple customers with really non uniform distribution of data (some of them have ~1000 rows for each table, others have ~100."><meta property="og:url" content="https://www.codewrecks.com/post/old/2011/07/use-sql-server-query-hints-with-nhibernate-hql-and-icriteria/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="HQL"><meta property="article:tag" content="ICriteria"><meta property="article:tag" content="Nhibernate"><meta property="article:tag" content="Performance"><meta property="article:tag" content="Sql Server"><meta property="article:published_time" content="2011-07-23T08:00:37+02:00"><meta property="article:modified_time" content="2011-07-23T08:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Use Sql Server Query Hints with NHibernate HQL and ICriteria • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2011/07/use-sql-server-query-hints-with-nhibernate-hql-and-icriteria/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Use Sql Server Query Hints with NHibernate HQL and ICriteria</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Use Sql Server Query Hints with NHibernate HQL and ICriteria</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2011-07-23T08:00:37+02:00>2011, Jul 23</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>6 mins read</span></div></div></header><div class="container entry-content"><p>When you work with Big databases with many records and <em>not uniform distribution of data into columns used for join or where conditions</em>, you can have really bad performance problem due to Query Plan caching. I do not want to give a deep explanation of this problem, you can find information <a href=http://legeronline.blogspot.com/2009/03/evils-of-slow-paramaterized-query-plans.html>here</a>, but I want to outline the general problem to make clear what is happening.</p><p>We can argue a lot why this problem happens in a database engine, but basically I have a really bad situation where the db stores data of multiple customers with really non uniform distribution of data (some of them have ~1000 rows for each table, others have ~100.000 rows in some of the tables).</p><p><strong>The problem is the following one</strong> : the software issue a query (two tables in join) filtered with a customer Id that has few rows on these tables; SQL-Server creates a plan where tables are joined with nested loops and the query executes in 2 milliseconds.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled2.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled2_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled2_thumb.jpg alt=Untitled2></a></a></p><p><em><strong>Figure 1</strong></em>: <em>Query with a value of parameter that filters for a customer that has ~100 rows in the two tables used in the join (elapsed time = 2ms).</em></p><p>As you can see the execution time is almost zero, now I execute the very same query, changing the value of the parameter to filter records for a customer that has nearly 100.000 records, since the query is the same, sql server uses the same execution plan.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled3.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled3_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled3_thumb.jpg alt=Untitled3></a></a></p><p><em><strong>Figure 2</strong></em>: <em>Query gets executed filtering for a customer that has ~100.000 rows in the two table that joins together (elapsed time = 2824 ms).</em></p><p>The query is three order of magnitude slower (2.824 ms vs 2 ms) and for query that are more complex (three tables in join), sometimes the execution time is more than 5 minutes and the software gives a TimeoutException. As you can see from <strong>Figure 2</strong> , the gray arrow from the bottom table is really wider respect of the arrows of <strong>Figure 1</strong> , because this customer has more rows in database. If you issue a <a href=http://msdn.microsoft.com/it-it/library/ms174283.aspx>DBCC FREEPROCCACHE</a> command to<em>clear all cached query plans</em> and execute again the query of <strong>Figure 2,</strong> you got an execution time of 28 ms (100 times faster than before XD).</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitlewerwerd.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitlewerwerd_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitlewerwerd_thumb.jpg alt=Untitlewerwerd></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Join is done with an hash match, a technique that is more efficient for joining two tables with a lot of rows. (elapsed time = 28 ms).</em></p><p>In figure 3 you can see that if you <em>clear the query plan cache</em> and execute again the query, SQL Server check the table, and since this customer has a lot of rows it uses HASH MATCH join and not a nested loop. Now if you execute the query for the customer used in <strong>Figure 1</strong> that has few rows, the execution time is 28 ms, higher than 2 ms because an hash match is less efficient for few rows.</p><p><strong>This lead to a nasty problem due to order of execution of the query</strong> : if I issue the same query, first for the customer with a lot of rows and then for the customer with few rows, I got an execution time of 28 ms for each query, if I reverse the order of the query I got 2 ms and 2800 ms thus the system is much slower. This happens because the Hash Match is not good for few number of rows, (28 ms against 2 ms), but the loss of performance when we have a small set of record is not so bad; at the contrary, the Nested Loop is a <strong>KILLER for big resultset</strong> and this can even cause execution Timeout. Having such a problem in production is like sitting on a bomb ready to explode. (A customer calls telling us that the software is completely unresponsive, you verify that this is true, but for other customers everything is quite good :(</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/Untitled_thumb.jpg alt=Untitled></a></a></p><p>The only solution to this approach is using the <a href=http://sqltutorials.blogspot.com/2008/03/with-recompile-re-compile-execution.html>OPTION (NORECOMPILE)</a> for all queries that present this problem, or you can instruct the query governor to prefer some join option (using <a href="http://msdn.microsoft.com/en-us/library/ms181714%28v=SQL.90%29.aspx">OPTION (HASH JOIN)</a> for example) if you already know that this is the right execution plan for all data distribution. All these techniques are called** <strong></strong><strong>query hint</strong> **<a href="http://msdn.microsoft.com/en-us/library/ms181714%28v=SQL.90%29.aspx"></a> and are the only way to solve bad performance problem of parameterized query when you have non uniform data distribution.</p><p>Now the problem seems solved, but, wait!!!!!,** *most of the queries are issued by nhibernate* **, and I need to find a way to add query hints to nhibernate query, a task that is not supported natively by NH. Solving this problem is a two phase process, first of all you need to find a way to insert text into nhibernate generated SQL, a task that can easily solved by an interceptor.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#a6e22e>[Serializable]</span>
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>class</span> <span style=color:#a6e22e>QueryHintInterceptor</span> : EmptyInterceptor
{
<span style=color:#66d9ef>internal</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>string</span> QueryHintHashJoinCommentString = <span style=color:#e6db74>&#34;queryhint-option-hash&#34;</span>;
<span style=color:#66d9ef>internal</span> <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>string</span> QueryHintRecompileCommentString = <span style=color:#e6db74>&#34;queryhint-recompile&#34;</span>;
 
<span style=color:#66d9ef>public</span> <span style=color:#66d9ef>override</span> NHibernate.SqlCommand.SqlString OnPrepareStatement(NHibernate.SqlCommand.SqlString sql)
{
<span style=color:#66d9ef>if</span> (sql.ToString().Contains(QueryHintHashJoinCommentString))
{
<span style=color:#66d9ef>return</span> sql.Insert(sql.Length, <span style=color:#e6db74>&#34; option(HASH JOIN)&#34;</span>);
}
<span style=color:#66d9ef>if</span> (sql.ToString().Contains(QueryHintRecompileCommentString))
{
<span style=color:#66d9ef>return</span> sql.Insert(sql.Length, <span style=color:#e6db74>&#34; option(RECOMPILE)&#34;</span>);
}
<span style=color:#66d9ef>return</span> <span style=color:#66d9ef>base</span>.OnPrepareStatement(sql);
}
}
</code></pre></td></tr></table></div></div><p>As you can see the code is really simple, the interceptor inherits from EmptyInterceptor and override the OnPrepareStatement(),** adding the right Query Hint to the end of the query **. This is probably not 100% production ready code, because I&rsquo;m not 100% sure that for complex query, inserting the hint at the end of the query is the right choice, but for my specific problem is enough and it is a good starting point.</p><p>If you look at the code you can verify that I&rsquo;m checking for certain string in query text to add the appropriate hint, but how can you add these strings to the query to enable query hint to be generated? The answer is <em>comments</em>. First of all I add this interceptor to NH configuration, so it got attached to every session.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp>cfg.SetInterceptor(<span style=color:#66d9ef>new</span> QueryHintInterceptor());
</code></pre></td></tr></table></div></div><p>But I also enable comments in SQL code in NH configuration setting the property** *use_sql_comments* **to true, now I only need a couple of extension methods like this one.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp><span style=color:#66d9ef>public</span> <span style=color:#66d9ef>static</span> IQuery QueryHintRecompile(<span style=color:#66d9ef>this</span> IQuery query)
{
query.SetComment(QueryHintInterceptor.QueryHintRecompileCommentString);
<span style=color:#66d9ef>return</span> query;
}
</code></pre></td></tr></table></div></div><p>That enables me to write this HQL query.</p><div class=highlight><div style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-csharp data-lang=csharp>session.CreateQuery(<span style=color:#e6db74>&#34;Select y from LinkResult y where ClieId = :param&#34;</span>)
.QueryHintRecompile()
.SetInt32(<span style=color:#e6db74>&#34;param&#34;</span>, <span style=color:#ae81ff>11</span>)
.List();
</code></pre></td></tr></table></div></div><p>As you can see I have now the QueryHintRecompile() method that permits me to specify for each single HQL Query (you can add similar extension method to ICriteria) the query hint to use. Running this query output this query.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/23-07-2011-10-36-27.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/23-07-2011-10-36-27_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/07/23-07-2011-10-36-27_thumb.jpg alt="23-07-2011 10-36-27"></a></a>** Figure 4:***The query with the query hint specified by the QueryHintRecompile()*</p><p>Thanks to incredible number of extension points offered by NHibernate, adding Query Hint to queries is really a breeze.</p><p>Alk.</p><p>Tags: <a href=http://technorati.com/tag/NHibernate>NHibernate</a> <a href=http://technorati.com/tag/Sql%20Server>Sql Server</a></p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/nhibernate/>Nhibernate</a>, <a class=category href=/categories/sql-server/>Sql Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/hql/>HQL</a>, <a class=tag href=/tags/icriteria/>ICriteria</a>, <a class=tag href=/tags/nhibernate/>Nhibernate</a>, <a class=tag href=/tags/performance/>Performance</a>, <a class=tag href=/tags/sql-server/>Sql Server</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2011/07/entity-framework-4-1-querying-objects/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Entity Framework 41 8211 Querying objects</a></div><div class="next-entry sep-before"><a href=/post/old/2011/07/a-strange-bug-in-nhibernate-2-1/><span class=screen-reader-text>Next post: </span>A strange bug in NHibernate 21<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>