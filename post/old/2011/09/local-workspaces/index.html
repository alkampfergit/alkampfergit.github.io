<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="In Tfs11 one of the most important change in source control system is the introduction of the “local workspaces”. A Workspace is a mapping between the server source control system and a local folder of a computer and until Tfs11 its state is managed by the server. One advantage of this approach is: when I ask for a “Get Latest”, the server knows the status of my workspace and can send me only the files that are changed."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Local workspaces • Codewrecks"><meta property="og:description" content="In Tfs11 one of the most important change in source control system is the introduction of the “local workspaces”. A Workspace is a mapping between the server source control system and a local folder of a computer and until Tfs11 its state is managed by the server. One advantage of this approach is: when I ask for a “Get Latest”, the server knows the status of my workspace and can send me only the files that are changed."><meta property="og:url" content="https://www.codewrecks.com/post/old/2011/09/local-workspaces/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Tfs"><meta property="article:published_time" content="2011-09-29T16:00:37+02:00"><meta property="article:modified_time" content="2011-09-29T16:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Local workspaces • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2011/09/local-workspaces/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Local workspaces</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Local workspaces</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2011-09-29T16:00:37+02:00>2011, Sep 29</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>5 mins read</span></div></div></header><div class="container entry-content"><p>In Tfs11 one of the most important change in source control system is the introduction of the “local workspaces”. A Workspace is a mapping between the server source control system and a local folder of a computer and until Tfs11 its state is managed by the server. One advantage of this approach is: when I ask for a “Get Latest”, the server knows the status of my workspace and can send me only the files that are changed. This has some disadvantage, all the files are readonly on disk, because you should explicitly do a “Check-Out” operation to begin editing a file, but there are also some annoying behavior: if you delete a file from the Windows explorer and you issue a Get Latest file, nothings get downloaded, because the server still believes that you have that file on your folder.</p><p>To solve problems that happens when you operate with files outside of the control of Team Explorer, you have the power tools command <strong>tfpt scorch</strong> that helps you to realign the local version with the server version.</p><p>On the contrary other Source Control System, like subversion, uses a completely different model, where the local copy is the master of the mapping. Whenever you issue a <strong>svn update</strong> command, the svn client check the situation of the local copy, does a confrontation with the server and detect the list of action to do. If you delete a file outside the control of svn client and then issue a <strong>svn update</strong> , the file is downloaded again from the server, because the client simply verifies that the file exists on the server but does not exist on the local copy, so it must be downloaded. The downside of this approach is performance, I have a big project where we have thousands of source controlled files, and in a pc with standard 7200 rpm disks, issuing a <strong>svn update</strong> of the trunk requires 60 seconds of wait with the disk queue completely full, before the client understand the list of file to downloaded.</p><p>But clearly in small solution the approach of svn is winning, because you do not have readonly files, you can simply issue a Get Latest without worrying if you did some modification to the local copy outside the control of TFS. The local workspace is the equivalent of the subversion workspace model, and they are the default type of workspace.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image13.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb13.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb13.png alt=image></a></a></p><p><em><strong>Figure 1</strong></em>: <em>You can choose to use server version of workspace, but Local is the new default.</em></p><p>After you create a Local workspace, you can try now to delete some files from windows explorer, then issue a get latest and you will see that those file you deleted will be downloaded again. But how this new mode works? Like subversion it creates in the local workspace some hidden folders that keeps tracks of what is happened in the folder.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image14.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb14.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb14.png alt=image></a></a></p><p><em><strong>Figure 2</strong></em>: <em>The $tf folder is used by TFS to store information about the local operations done in the workspace.</em></p><p>Another interesting operation you can do is the following one: disconnect the network, so you pc is not able anymore to connect to the Tfs, now add a simple hello.txt file on a workspace folder, write something on it, then open the solution and modify some file. This will simulate working offline, as you can verify all the files are not read-only and you can work as if you were online, you can do every modification you want to each file in the solution.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image15.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb15.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb15.png alt=image></a></a></p><p><em><strong>Figure 3</strong></em>: <em>Even if I’m offline, editing a class shows the check-out icon</em></p><p>Now reattach the network cable, refresh the pending changes windows and you will see pending operations :)</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image16.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb16.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb16.png alt=image></a></a></p><p><em><strong>Figure 4</strong></em>: <em>When I come back online Team Explorer detects all the changes.</em></p><p>As you can see I’ve modified three files, but the really important stuff is that I have one item on “Detected changes”; it basically means that something is changed in the local copy on a file or folder that is actually not under source control, now you should simply click on it to verify what is really happened.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image17.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb17.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb17.png alt=image></a></a></p><p><em><strong>Figure 5</strong></em>: <em>The Promote Candidate Changes dialog</em></p><p>This entirely new dialog shows you what was added and deleted in the workspace, and permits you to choose various actions. The obvious one is “promote” that will actually Add (or delete if you are in the Detected Deletes) the file to the source control, but you can also ignore this specific local item, or ignore by extension or file name. As an example, if you usually put.txt files in your workspace but you do not want them to pollute your <em>promote candidate changes</em> window you can simply ignore by extension and the game is done, no *.txt will ever reappear in your <em>Promote Candidate Changes</em> window again.</p><p>The exclusion filter is global, and if you want to remove a filter, you actually should do it manually editing the file located in C:\Users\Me\AppData\Local\Microsoft\Team Foundation\4.0\Configuration\VersionControl\LocalItemExclusions.config that has a UserExclusion part as shown in <strong>Figure 6</strong> <a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/27-09-2011-10-53-50.jpg><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/27-09-2011-10-53-50_thumb.jpg><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/27-09-2011-10-53-50_thumb.jpg alt="27-09-2011 10-53-50"></a></a></p><p><em><strong>Figure 6</strong></em>: <em>The exclusion list, it is a simple XML file</em></p><p>Now you can Change/Remove element in this simple XML file and configure it for your needs. Remember that the exclusion file is used only by the Promote Candidate Changes, if you press the add button on the source control explorer, the hello.txt file got listed as available to be added.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image18.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb18.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb18.png alt=image></a></a></p><p><em><strong>Figure 7</strong></em>: <em>Explicitly pressing the add item button in Source Explorer shows all file</em></p><p>I’m sure that the introduction of Local Workspace will improve a lot the overall experience users have with TFS Source Control System.</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/tfs/>Tfs</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2011/09/visual-studio-macro-to-group-files/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>Visual Studio macro to group files</a></div><div class="next-entry sep-before"><a href=/post/old/2011/10/parallel-build-in-vs2010/><span class=screen-reader-text>Next post: </span>Parallel build in VS2010<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>