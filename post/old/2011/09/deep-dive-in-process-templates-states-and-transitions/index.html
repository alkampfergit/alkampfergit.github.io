<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="1 – Customize Tfs Process Template
2 – Basic of TFS Process Template Customization
3 – Adding Field to a Work Item Definition
4 – Customize Work Item Fields with Rules
5 – Interesting rules to customize work items.
6 – Customize States and Transitions of a Work Item
In previous post I did a brief introduction to the concept of States and Transitions of Work Items and it is time to do a little deep dive to understand how you can configure complex rules on transition between states."><meta name=theme-color content="#ffcd00"><meta property="og:title" content="Deep dive in Process templatersquos states and transitions • Codewrecks"><meta property="og:description" content="1 – Customize Tfs Process Template
2 – Basic of TFS Process Template Customization
3 – Adding Field to a Work Item Definition
4 – Customize Work Item Fields with Rules
5 – Interesting rules to customize work items.
6 – Customize States and Transitions of a Work Item
In previous post I did a brief introduction to the concept of States and Transitions of Work Items and it is time to do a little deep dive to understand how you can configure complex rules on transition between states."><meta property="og:url" content="https://www.codewrecks.com/post/old/2011/09/deep-dive-in-process-templates-states-and-transitions/"><meta property="og:site_name" content="Codewrecks"><meta property="og:type" content="article"><meta property="article:section" content="post"><meta property="article:tag" content="Process Template"><meta property="article:tag" content="Tfs"><meta property="article:published_time" content="2011-09-19T09:00:37+02:00"><meta property="article:modified_time" content="2011-09-19T09:00:37+02:00"><meta name=twitter:card content="summary"><meta name=generator content="Hugo 0.74.3"><title>Deep dive in Process templatersquos states and transitions • Codewrecks</title><link rel=canonical href=https://www.codewrecks.com/post/old/2011/09/deep-dive-in-process-templates-states-and-transitions/><link rel=icon href=/favicon.ico><link rel=stylesheet href=/assets/css/main.ab98e12b.css><style>:root{--color-accent:#ffcd00}</style><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-1773115-4','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><script src=https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js></script><script src=https://www.codewrecks.com/js/jquery-eu-cookie-law-popup.js></script><link rel=stylesheet href=https://www.codewrecks.com/css/jquery-eu-cookie-law-popup.css></head><body class="page type-post"><div class=site><a class=screen-reader-text href=#content>Skip to Content</a><div class=main><nav id=main-menu class="menu main-menu" aria-label="Main Menu"><div class=container><ul><li class=item><a href=/>Home</a></li><li class=item><a href=/categories/>Categories</a></li><li class=item><a href=/about/>About</a></li><li class=item><a href=/privacy/>Privacy</a></li></ul></div></nav><div class=header-widgets><div class=container><style>.widget-breadcrumbs li:after{content:'\2f '}</style><section class="widget widget-breadcrumbs sep-after"><nav id=breadcrumbs><ol><li><a href=/>Home</a></li><li><a href=/post/>Posts</a></li><li><span>Deep dive in Process templatersquos states and transitions</span></li></ol></nav></section></div></div><header id=header class="header site-header"><div class="container sep-after"><div class=header-info><p class="site-title title">Codewrecks</p><p class="desc site-desc">Wrecks of code floating in the sea of internet</p></div></div></header><main id=content><article lang=en class=entry><header class="header entry-header"><div class="container sep-after"><div class=header-info><h1 class=title>Deep dive in Process templatersquos states and transitions</h1></div><div class=entry-meta><span class=posted-on><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"/><line x1="16" y1="2" x2="16" y2="6"/><line x1="8" y1="2" x2="8" y2="6"/><line x1="3" y1="10" x2="21" y2="10"/></svg><span class=screen-reader-text>Posted on</span>
<time class=entry-date datetime=2011-09-19T09:00:37+02:00>2011, Sep 19</time></span>
<span class=reading-time><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><circle cx="12" cy="12" r="10"/><polyline points="12 6 12 12 15 15"/></svg>7 mins read</span></div></div></header><div class="container entry-content"><p>1 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/22/customize-tfs-process-template/>Customize Tfs Process Template</a><br>2 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/23/basic-of-tfs-process-template-customization/>Basic of TFS Process Template Customization</a><br>3 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/24/customization-of-tfs-process-template-adding-field-to-a-work-item-definition/>Adding Field to a Work Item Definition</a><br>4 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/25/customize-work-items-fields-with-rules/>Customize Work Item Fields with Rules</a><br>5 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/27/interesting-rules-to-customize-work-items/>Interesting rules to customize work items.</a><br>6 – <a href=http://www.codewrecks.com/blog/index.php/2011/06/30/customize-state-and-transitions-of-a-work-item/>Customize States and Transitions of a Work Item</a></p><p>In previous post I did a brief introduction to the concept of States and Transitions of Work Items and it is time to do a little deep dive to understand how you can configure complex rules on transition between states. Lets introduce a new rule for our bug definition: we want to be able to move from the Triage state to Closed, only if the user is an administrator of the team project. This is a quite standard requirement because going from Triage to Closed basically means: <em>“ignore that bug”</em> and only an administrators should be able to take such a decision.</p><p><a href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_2.png><a target=_blank href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb.png><img src=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb.png alt=image></a></a></p><p><strong>Figura 1:</strong> <em>Transition from Triage to Closed is available only for Project administrators</em></p><p>This requirements can be achieved with little work, as you can see from <strong>Figure 1</strong> because the transition is a securable object you can restrict the roles that can use that object. If a role has no rights to use the transition, he/she cannot do the transition between the start and destination state of the transition.</p><p>Now we want to add more complexity, <strong>we need to add another field called “rejected Reason” where we want to insert a detailed description of the reason why this bug was rejected</strong> (moved from triage do Closed). First of all we add the field and update the UI Accordingly (as seen in previous posts), The result is shown in <strong>Figure 2</strong>.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image2.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb2.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb2.png alt=image></a></a></p><p><strong>Figura 2:</strong> <em>A field called RejectedReason was added to the Work Item Definition</em></p><p>We are still really far from an optimal situation, first of all the <em>Rejected Reason</em> field is always editable, so we can add a requirement that stats that <strong>Rejected Reason should be editable only when the bug pass from state triage to closed</strong> , because there is no meaning to have a Rejected Reason for bugs that were not rejected.</p><p>Solving this problem is really easy in TFS2010 thanks to the incredible flexibility in Wok Item configuration. We can double-click in the Triage status and open the edit details interface where we can add a series of RULES, in the same way we added RULES to single Work Item Field. RULES specified in a definition of a State are valid only when the Work Item is in that specific state.</p><p><a href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_6.png><a target=_blank href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb_2.png><img src=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb_2.png alt=image></a></a></p><p><strong>Figura 3:</strong> <em>Tiage state has a rule on the Rejected Reason field, in this situation I simply put the READONLY rule to make Rejected Reason not editable.</em></p><p>To obtain desired result, we can insert the READONLY rule to <em>Rejected Reason</em>field in all states, excepts for the Closed state, with this configuration the Revision Note field will be editable only when the state is * <strong>Closed</strong>.*</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image3.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb3.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb3.png alt=image></a></a></p><p><strong>Figura 4:</strong> <em>When I’m in Triage state the field Revision Note is Readonly, but when I move to Closed State it is editable.</em></p><p>This is still not perfect, because now you can add a Rejected Reason when the bug has a transition from * <strong>Fixed</strong> *to * <strong>Closed</strong> ,*because the * <strong>Closed</strong> *state has no READONLY RULE. To obtain our goal, we need to use another cool capability of Work Item state management, adding a rule to a transition. A RULE added to a transition is applied only when the state changes using that transition. In our scenario we can simply add a READONLY rule for the <em>Rejected Reason</em>field to the transition that bring the Bug from * <strong>Fixed</strong> *to * <strong>Closed</strong> *, now we can edit Rejected Reason only when the state pass from * <strong>Triage</strong> <em>to * <strong>Closed</strong>.</em></p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image4.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb4.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb4.png alt=image></a></a></p><p><strong>Figura 5:</strong> <em>The Rejected Reason field has the READONLY rule applied when the state pass from fixed to closed.</em></p><p>As last requisite we add: <strong>when the bug moves from Triage to Closed, we want to insert automatically the value rejected into the field Resolved Reason and also we want the field Rejected Reason is mandatory when the Reason field is different from Duplicate</strong>. The reason behind this requirement is: a value of Duplicate in the <em>Reason</em>field already gives me information about “why” the bug was rejected, but for any other reason I want a detailed specification in the <em>Rejected Reason</em>on why the bug was rejected.</p><p>We can satisfy this requirement with the following steps: first of all you need to edit the * <strong>Closed</strong> *status, adding a REQUIRED RULE for the Resolved Reason field, then the Resolved Reason field is put in readonly in the UI (figure 6) and finally we add the <em>Rejected</em> value to the list of ALLOWEDVALUES.</p><p><a href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_12.png><a target=_blank href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb_5.png><img src=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/image_thumb_5.png alt=image></a></a></p><p><strong>Figura 6:</strong> <em>Resolved Reason should be put as readonly in the UI because it will be filled automatically</em></p><p>We should now open the <strong>definition of the transition</strong> , select the “Fields” tab and add a COPY RULE to the field Resolved Reason to automatically change the value of <em>Resolved Reason</em> field during that transition.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image5.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb5.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb5.png alt=image></a></a></p><p><strong>Figura 7:</strong> <em>Steps needed to automatically fill the value of the ResolvedReason field during the transition from <strong>Trieage</strong> to <strong>Closed</strong>.</em></p><p>What we did is specifying that when we apply the transition from * <strong>Triage</strong> *to * <strong>Closed</strong> *, the COPY RULE will be applied assigning the value <strong>Rejected</strong> in the <em>Resolved Reason</em>field and the user could not change its value because it is not editable. The COPY rule in a transition is the perfect way to automatically assign a predetermined value to some field during a transition.</p><p>Finally we need to make Rejected Reason a required field only when the value of the field Reason is different from <strong>Duplicate</strong>. This is really simple because we can simply add another RULE to the transition from <em>Triage</em>to <em>Closed</em> called WHEN NOT. This specific RULE permits to apply a series of other RULES when a condition is false and perfectly satisfies our need, because we can simply add a WHEN NOT System.Reason is equal to Duplicate to apply the REQUIRED RULE to the Rejected Reason.</p><p><a href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/SNAGHTMLc37265.png><a target=_blank href=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/SNAGHTMLc37265_thumb.png><img src=http://blogs.ugidotnet.org/images/blogs_ugidotnet_org/rgm/Windows-Live-Writer/a767ea96c8c5_E621/SNAGHTMLc37265_thumb.png alt=SNAGHTMLc37265></a></a></p><p><strong>Figura 8:</strong> <em>Adding the REQUIRED RULE to the Rejected Reason field only when the System.Reason field is different from Duplicate</em></p><p>As you see in <strong>Figure 8</strong> , the first tab is used to specify the condition, in this example, since the rule is WHENNOT, the condition was read as &ldquo;*When the System.Reason is different from duplicate”;*in the second tab (rules) you specify the set of RULES you want to apply then the previous condition is satisfied, in this example we specify REQUIRED rule.</p><p>Now you can create a new bug in <em>triage</em> status, save it and change the status in *closed;*now you can verify that if the Reason field is different from Duplicate, the Rejected Reason field become required.</p><p><a href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image6.png><a target=_blank href=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb6.png><img src=https://www.codewrecks.com/blog/wp-content/uploads/2011/09/image_thumb6.png alt=image></a></a></p><p><strong>Figura 9:</strong> <em>The Reason is Duplicate, so the Work Item is valid, immediately after you change the Reason to Not Reproductble, the Work Item is not valid anymore because the Rejected Reason field is now REQUIRED.</em></p><p>You can test this rule leaving the Rejected Reason blank and noticing that as soon you change the Reason field to a value different from <strong>Duplicate</strong> the Work Item is not valid anymore and in upper part a yellow bar tells you that the field Rejected Reason could not be left blank, because it is REQUIRED.</p><p>This article can be a little complex, but it shows you the extreme flexibility you have in configuring your Work Item template to pefectly fits your process. The ability to insert RULES valid only for specific States or Transition and the special RULES WHEN and WHEN NOT permits you to create complex logic for your Work Item definition, like default values for specific transition and putting field REQUIRED or READONLY during certain transition or when the value of another field changes to a specific value.</p><p>Gian Maria.</p></div><footer class=entry-footer><div class="container sep-before"><div class=categories><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5A2 2 0 014 3H9l2 3h9a2 2 0 012 2z"/></svg><span class=screen-reader-text>Categories: </span><a class=category href=/categories/team-foundation-server/>Team Foundation Server</a></div><div class=tags><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M20.59 13.41l-7.17 7.17a2 2 0 01-2.83.0L2 12V2H12l8.59 8.59A2 2 0 0120.59 13.41z"/><line x1="7" y1="7" x2="7" y2="7"/></svg><span class=screen-reader-text>Tags: </span><a class=tag href=/tags/process-template/>Process Template</a>, <a class=tag href=/tags/tfs/>Tfs</a></div></div></footer></article><nav class=entry-nav><div class=container><div class="prev-entry sep-before">Leave comment in GitHub discussion page<a target=_blank href=https://github.com/alkampfergit/personal-blog/discussions> alkampfergit/personal-blog/discussions</a></div><div class="prev-entry sep-before"><a href=/post/old/2011/09/the-good-part-of-having-a-lot-of-ram/><span aria-hidden=true><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="20" y1="12" x2="4" y2="12"/><polyline points="10 18 4 12 10 6"/></svg>Previous</span>
<span class=screen-reader-text>Previous post: </span>The good part of having a lot of RAM</a></div><div class="next-entry sep-before"><a href=/post/old/2011/09/benchmarking-your-disks/><span class=screen-reader-text>Next post: </span>Benchmarking your disks<span aria-hidden=true>Next<svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><line x1="4" y1="12" x2="20" y2="12"/><polyline points="14 6 20 12 14 18"/></svg></span></a></div></div></nav></main><footer id=footer class=footer><div class="container sep-before"><section class="widget widget-social_menu sep-after"><nav aria-label="Social Menu"><ul><li><a href=https://github.com/alkampfergit target=_blank rel=noopener><span class=screen-reader-text>Open Github account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37.0 00-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44.0 0020 4.77 5.07 5.07.0 0019.91 1S18.73.65 16 2.48a13.38 13.38.0 00-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07.0 005 4.77a5.44 5.44.0 00-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37.0 009 18.13V22"/></svg></a></li><li><a href=https://twitter.com/alkampfer target=_blank rel=noopener><span class=screen-reader-text>Open Twitter account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><title>Twitter icon</title><path d="M23 3a10.9 10.9.0 01-3.14 1.53 4.48 4.48.0 00-7.86 3v1A10.66 10.66.0 013 4s-4 9 5 13a11.64 11.64.0 01-7 2c9 5 20 0 20-11.5a4.5 4.5.0 00-.08-.83A7.72 7.72.0 0023 3z"/></svg></a></li><li><a href=mailto:alkampfer@nablasoft.com target=_blank rel=noopener><span class=screen-reader-text>Contact via Email</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M4 4h16c1.1.0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1.0-2-.9-2-2V6c0-1.1.9-2 2-2z"/><polyline points="22,6 12,13 2,6"/></svg></a></li><li><a href=https://linkedin.com/in/gianmariaricci target=_blank rel=noopener><span class=screen-reader-text>Open Linkedin account in new tab</span><svg class="icon" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" aria-hidden="true"><path d="M16 8a6 6 0 016 6v7h-4v-7a2 2 0 00-2-2 2 2 0 00-2 2v7h-4v-7a6 6 0 016-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg></a></li></ul></nav></section><div class=copyright><p>&copy; 2020-2022 Ricci Gian Maria</p></div></div></footer></div></div><script>window.__assets_js_src="/assets/js/"</script><script src=/assets/js/main.c3bcf2df.js></script><script>console.log("this is cookie law");$(document).euCookieLawPopup().init({cookiePolicyUrl:'/privacy/',popupPosition:'top',colorStyle:'default',compactStyle:false,popupTitle:'This website is using cookies',popupText:'By continuing I assume your permission to deploy cookies, as detailed in the Privacy &amp; Cookies Policy.',buttonContinueTitle:'Continue',buttonLearnmoreTitle:'Learn more about this site Privacy &amp; Cookies Policy',buttonLearnmoreOpenInNewWindow:true,agreementExpiresInDays:30,autoAcceptCookiePolicy:false,htmlMarkup:null});</script></body></html>