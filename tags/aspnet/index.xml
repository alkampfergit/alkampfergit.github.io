<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Aspnet on Codewrecks</title><link>https://www.codewrecks.com/tags/aspnet/</link><description>Recent content in Aspnet on Codewrecks</description><generator>Hugo</generator><language>en</language><lastBuildDate>Tue, 16 Nov 2021 20:13:30 +0000</lastBuildDate><atom:link href="https://www.codewrecks.com/tags/aspnet/index.xml" rel="self" type="application/rss+xml"/><item><title>IIS cache management for static files</title><link>https://www.codewrecks.com/post/programming/aspnet/iis-static-file-cache/</link><pubDate>Tue, 16 Nov 2021 20:13:30 +0000</pubDate><guid>https://www.codewrecks.com/post/programming/aspnet/iis-static-file-cache/</guid><description>&lt;p>We have an application with ASP.NET web api plus an angular frontend and we use a client library for translation that is based on plain json files hosted on the server. We have a problem with new releases, because some clients &lt;strong>are needed to force cache clear in the browser to see the new translated terms&lt;/strong>, basically it seems that the browser is using older files and not the new ones.&lt;/p></description></item><item><title>Avoid logging sensitive information with ELMAH</title><link>https://www.codewrecks.com/post/old/2013/10/avoid-logging-sensitive-information-with-elmah/</link><pubDate>Mon, 07 Oct 2013 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2013/10/avoid-logging-sensitive-information-with-elmah/</guid><description>&lt;p>&lt;a href="http://www.nuget.org/packages/elmah/">ELMAH&lt;/a> is probably de-facto the most commonly used solution to create an automatic logging infrastructure in your ASP.NET application. One of the problem you can encounter using it, is that this component logs a lot of information, and particularly all POST variables of the request. &lt;strong>If some error occours in login or registration page, you will end with user password written in clear text inside the elmah Database&lt;/strong>.&lt;/p>
&lt;p>To avoid this problem you need to use a feature of ELMAH called Filtering, that permits you to intercept error logging, here is an example.&lt;/p></description></item><item><title>Could not load file or assembly MicrosoftReportViewerWebForms</title><link>https://www.codewrecks.com/post/old/2012/03/could-not-load-file-or-assembly-microsoft-reportviewer-webforms/</link><pubDate>Wed, 21 Mar 2012 18:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2012/03/could-not-load-file-or-assembly-microsoft-reportviewer-webforms/</guid><description>&lt;p>This error: * &lt;strong>Could not load file or assembly Microsoft.ReportViewer.WebForms&lt;/strong> *sometimes shows up when you start working with old projects and you have only the latest version of Visual Studio installed, or when you deploy a web site or program and forget to include all dependencies.&lt;/p>
&lt;p>In a project I’m working to I’m using Visual Studio 11 Beta in a Virtual Machine,  I opened a project that actually uses VS2010 but was created originally with VS2005, I rebuild every project, but I got the above error when I started one of sites included in the solution inside IIS. The reason is clear, the old site still uses old assemblies of Report Viewer, but in my machine only VS11 beta is installed so I need to reinstall the runtime of &lt;strong>Report Viewer&lt;/strong> to make it work. For any other person that is incurred in this problem, you can find the &lt;a href="http://www.microsoft.com/download/en/details.aspx?displaylang=en&amp;amp;amp;id=6576">Report Viewer installer of VS2008 at this address&lt;/a> but if you have a really old site that uses &lt;a href="http://www.microsoft.com/download/en/details.aspx?id=4016">Visual Studio 2005 Report Viewer this is the link&lt;/a>, finally &lt;a href="http://www.microsoft.com/download/en/details.aspx?id=6442">this is the link for 2010 version&lt;/a>.&lt;/p></description></item><item><title>The strangest bug of IE Irsquove ever seen</title><link>https://www.codewrecks.com/post/old/2011/09/the-strangest-bug-of-ie-ive-ever-seen/</link><pubDate>Wed, 07 Sep 2011 14:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2011/09/the-strangest-bug-of-ie-ive-ever-seen/</guid><description>&lt;p>We have a web application written in asp.net and we experienced really strange problem after recent modification. We have a strange behavior in IE9 with redirects and after some inspection we found a really strange fact (that almost make us lost 2 hours of work). To recreate this situation simply create a new page in an asp.net site, and put this code in it.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span>&amp;lt;form id=&lt;span style="color:#e6db74">&amp;#34;form1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;div&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;label id=&lt;span style="color:#e6db74">&amp;#34;queuecount&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:ImageButton ID=&lt;span style="color:#e6db74">&amp;#34;ImageButton1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;a href=&lt;span style="color:#e6db74">&amp;#34;http://www.microsoft.com&amp;#34;&lt;/span>&amp;gt;microsoft&amp;lt;/a&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/div&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/form&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>Now simply run this page with fiddler opened, you should see a simple broken image and a standard anchor tag. Now click on the link and look at what happened with fiddler.&lt;/p></description></item><item><title>ASpNEt handlers locked down in Windows 7 IIS</title><link>https://www.codewrecks.com/post/old/2011/08/asp-net-handlers-locked-down-in-windows-7-iis/</link><pubDate>Thu, 04 Aug 2011 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2011/08/asp-net-handlers-locked-down-in-windows-7-iis/</guid><description>&lt;p>I&amp;rsquo;m configuring a site on a new virtual machine and when I browse to a site, IIS gives me this error&lt;/p>
&lt;blockquote>
&lt;p>This configuration section cannot be used at this path. This happens when the section is locked at a parent level. Locking is either by default (overrideModeDefault=&amp;ldquo;Deny&amp;rdquo;), or set explicitly by a location tag with overrideMode=&amp;ldquo;Deny&amp;rdquo; or the legacy allowOverride=&amp;ldquo;false&amp;rdquo;.&lt;/p>&lt;/blockquote>
&lt;p>I don&amp;rsquo;t know why, but on this Windows 7 virtual machine it seems that this section of the configuration is locked. If you find this error you can simply open an elevated permission command prompt, go to the &lt;em>C:\Windows\System32\inetsrv&lt;/em> directory and type the commands&lt;/p></description></item><item><title>How to check if a user belong to a certain role in ASPNet</title><link>https://www.codewrecks.com/post/old/2010/10/how-to-check-if-a-user-belong-to-a-certain-role-in-asp-net/</link><pubDate>Wed, 13 Oct 2010 14:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/10/how-to-check-if-a-user-belong-to-a-certain-role-in-asp-net/</guid><description>&lt;p>This question is really simple to answer&amp;hellip; or no? Suppose you need to verify, in a service, if the user belongs to the xxxx group, and then take a different path of execution if the condition is true.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#66d9ef">if&lt;/span> (Roles.IsUserInRole(&lt;span style="color:#e6db74">&amp;#34;xxxx&amp;#34;&lt;/span>))
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>{
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>...
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>}&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>Ok, this seems such a piece of innocent code, but actually it caused me a bad bug. The reason is really simple, the same service is called from a program written in windows forms, (a windows service) and a web site. The programmer that is developing the web site, took the service and add that checks in one function, and I begin to get exception from the code of the service. The reason is clear Asp.Net roles and Membership are not configured in the windows program, nor I want to configure it.&lt;/p></description></item><item><title>Deploy on remote machine during builds</title><link>https://www.codewrecks.com/post/old/2010/07/deploy-on-remote-machine-during-builds/</link><pubDate>Tue, 06 Jul 2010 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/07/deploy-on-remote-machine-during-builds/</guid><description>&lt;p>Clearly Lab Management is really good to &lt;a href="http://www.codewrecks.com/blog/index.php/2010/06/29/deploy-a-solution-and-a-database-in-a-lab-management-virtual-environment/">manage virtual environment&lt;/a>s and give a lot of flexibility on how to deploy your application on virtual machines, but if you do not have Lab Management you can still use the same technique to deploy application in remote computer during a build with the use of a simple scripts. The key is the ability to execute code on a remote computer with &lt;a href="http://www.beyondlogic.org/solutions/remoteprocess/BeyondExec.htm">beyondexec&lt;/a> or similar tool. Suppose you need to deploy an application called demo, you have a Tfs build called Demo, and you want to be able to deploy a specific build on a remote server, the solution could be this simple script&lt;/p></description></item><item><title>Asp net and an HiddenField inside a disable panel</title><link>https://www.codewrecks.com/post/old/2010/04/asp-net-and-an-hiddenfield-inside-a-disable-panel/</link><pubDate>Thu, 15 Apr 2010 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/04/asp-net-and-an-hiddenfield-inside-a-disable-panel/</guid><description>&lt;p>I&amp;rsquo;ve hit a strange behavior of Hidden Field inside a disable asp.net panel, here is a simplified scenario that can reproduce my problem:&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span>&amp;lt;form id=&lt;span style="color:#e6db74">&amp;#34;form1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:HiddenField ID=&lt;span style="color:#e6db74">&amp;#34;hf1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:TextBox ID=&lt;span style="color:#e6db74">&amp;#34;tb1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span>&amp;gt;&amp;lt;/asp:TextBox&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:Panel ID=&lt;span style="color:#e6db74">&amp;#34;Panel1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> Enabled=&lt;span style="color:#e6db74">&amp;#34;false&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:HiddenField ID=&lt;span style="color:#e6db74">&amp;#34;hf2&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:TextBox ID=&lt;span style="color:#e6db74">&amp;#34;tb2&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span>&amp;gt;&amp;lt;/asp:TextBox&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/asp:Panel&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:Label ID=&lt;span style="color:#e6db74">&amp;#34;Label1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> Text=&lt;span style="color:#e6db74">&amp;#34;Label&amp;#34;&lt;/span>&amp;gt;&amp;lt;/asp:Label&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;asp:Button ID=&lt;span style="color:#e6db74">&amp;#34;Button1&amp;#34;&lt;/span> runat=&lt;span style="color:#e6db74">&amp;#34;server&amp;#34;&lt;/span> Text=&lt;span style="color:#e6db74">&amp;#34;Button&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/form&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>This is a simple piece of code with two textbox, and two hidden fields, but the important aspect is that two of them are inside an asp:panel that has disabled=&lt;em>true&lt;/em>. Then I have a label and a simple Button. Here is the code behind.&lt;/p></description></item><item><title>PopupControlExtender set focus to a control on popup</title><link>https://www.codewrecks.com/post/old/2010/03/popupcontrolextender-set-focus-to-a-control-on-popup/</link><pubDate>Fri, 05 Mar 2010 16:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/03/popupcontrolextender-set-focus-to-a-control-on-popup/</guid><description>&lt;p>I have a project with a complex user control used to select some values in hierarchic categories, it was realized with the UpdatePanel, it supports searching, selection by cascade of combo and much more, everything works great, but performances are not so good.&lt;/p>
&lt;p>Now I decide to create another version that use jQuery to do real ajax calls and manage json data to maximize performances, but I face a problem&lt;/p></description></item><item><title>Three state checkbox in aspnet</title><link>https://www.codewrecks.com/post/old/2010/02/three-state-checkbox-in-asp-net/</link><pubDate>Tue, 02 Feb 2010 09:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/02/three-state-checkbox-in-asp-net/</guid><description>&lt;p>Yesterday I need to implement in a quick way a three style checkbox in a project based on asp.net 3.5. The requirements stated that I must not spend too much time designing an entire new control, but the solution should be usable by other people with minimum impact. Here is the result I obtained.&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/02/image.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/02/image_thumb.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/02/image_thumb.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>The checkbox can be, selected, not selected, or not used and when it is not used it is blue, like the one in windows forms. This was needed to satisfy a requirement, I need to make possible for the user to specify complex filters, and I have boolean fields on my entities where the user can ask for: filter only the one with field==true or field==false or no filter for that field. To achieve the result you can simply use a standard checkbox.&lt;/p></description></item><item><title>AspNet routing problem with IIS7 and integrated pipeline</title><link>https://www.codewrecks.com/post/old/2009/10/aspnet-routing-problem-with-iis7-and-integrated-pipeline/</link><pubDate>Wed, 28 Oct 2009 11:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/10/aspnet-routing-problem-with-iis7-and-integrated-pipeline/</guid><description>&lt;p>I have an asp.net site that uses asp.net routing to dynamically create some reports. I mapped the extension.zip to asp.net ISApi, then with routing I map url&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span> Using RouteTable.Routes.GetWriteLock()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> RouteTable.Routes.Add(New Route(&lt;span style="color:#e6db74">&amp;#34;reports/{reporttype}/{reportid}/report.zip&amp;#34;&lt;/span>, New MyReportRouter))&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin. http://dunnhq.com -->
&lt;p>everything works perfectly, until I move this site to IIS7 and try to use it with integrated pipeline mode. When I browse to a valid report url I got this error.&lt;/p></description></item><item><title>Aspnet solve problem of multiple user control with validator</title><link>https://www.codewrecks.com/post/old/2009/07/aspnet-solve-problem-of-multiple-user-control-with-validator/</link><pubDate>Thu, 09 Jul 2009 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/07/aspnet-solve-problem-of-multiple-user-control-with-validator/</guid><description>&lt;p>The problem is described in &lt;a href="http://forums.asp.net/p/1402608/3040712.aspx">this post&lt;/a>, basically it can be summarized in &lt;em>you have a user control with validators, you put more than one instance of the user control in a page, all validators are fired together&lt;/em>&lt;/p>
&lt;p>The above post already gives a solution, but is not a general one. I want to avoid the need to go into the user control and tweak with validators, so I came up with this little solution&lt;/p></description></item><item><title>Compress your CSS files in aspnet with YUICompressor and an Handler</title><link>https://www.codewrecks.com/post/old/2009/06/compress-your-css-files-in-aspnet-with-yuicompressor-and-an-handler/</link><pubDate>Mon, 01 Jun 2009 03:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/06/compress-your-css-files-in-aspnet-with-yuicompressor-and-an-handler/</guid><description>&lt;p>Some times ago &lt;a href="http://www.codewrecks.com/blog/index.php/2009/01/24/optimization-of-javascript-and-css-files/">I spoke&lt;/a> about using &lt;a href="http://www.codeplex.com/YUICompressor">YUICompressor&lt;/a> to reduce number and size of your css files. That solution was based on the original msbuild action included in youicompressor library. That solution has a major drawback, css files gets compressed only during the deploy phase, so during testing the site was tested only with the original css set. I like to test in an environment similar to production one, so I decided to develop a simple IHttpHandler to handle css compression.&lt;/p></description></item><item><title>AspNet ObjectDataSource and Castle Windsor</title><link>https://www.codewrecks.com/post/old/2009/05/aspnet-objectdatasource-and-castle-windsor/</link><pubDate>Fri, 22 May 2009 04:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/05/aspnet-objectdatasource-and-castle-windsor/</guid><description>&lt;p>I&amp;rsquo;m restructuring a portion of a site, it is well structured, and all logic is inside business classes in another assembly, and they are accessed with ObjectDataSources. My problem is that with the new structure I cannot refer to the concrete classes anymore, but I need to resolve them with an IoC container, like Castle Windsor.&lt;/p>
&lt;p>The solution to this problem was really simple, I created this simple class&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-CSharp" data-lang="CSharp">&lt;span style="display:flex;">&lt;span>Public Class IoCObjectDataSource : Inherits ObjectDataSource
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Public Shadows Property TypeName() As String
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Get
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Return MyBase.TypeName
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> End Get
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Set(ByVal &lt;span style="color:#66d9ef">value&lt;/span> As String)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> MyBase.TypeName = IoC.GetConcreteTypeFor(Type.GetType(&lt;span style="color:#66d9ef">value&lt;/span>)).FullName
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> End Set
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> End Property
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>End Class&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin. http://dunnhq.com -->
&lt;p>It inherits from the basic ObjectDataSource, but it shadows the TypeName property; in setter part of TypeName it call a IoC wrapper to get the concrete name of the component configured for a given interface. Now I can specify an interface instead of the real type.&lt;/p></description></item><item><title>jQuery to the rescue - some numbers</title><link>https://www.codewrecks.com/post/old/2009/05/jquery-to-the-rescue-some-numbers/</link><pubDate>Fri, 15 May 2009 07:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/05/jquery-to-the-rescue-some-numbers/</guid><description>&lt;p>In an old project I have a particular user control dedicated to identify data stored in a tree. The user can type some letters, and press &lt;em>Search&lt;/em> button to find all the elements that match the search, or it can use a series of DropDownList to navigate from the higher element down to the hierarchy. It is used extensively in the site, and is used even to select location, from a table where location are stored in Nations, Region, Province and Location.&lt;/p></description></item><item><title>Hosting wcf service in precompiled web sites</title><link>https://www.codewrecks.com/post/old/2009/04/hosting-wcf-service-in-precompiled-web-sites/</link><pubDate>Tue, 28 Apr 2009 03:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/04/hosting-wcf-service-in-precompiled-web-sites/</guid><description>&lt;p>The situation is the following: I have a web site (not a web application) that have one wcf service hosted with the classic svc file. Everything works as expected, until I use a Deployment Web Project to build a site with &lt;em>allow the precompiled site to be updatable&lt;/em> to false. Now if I browse the service in my dev machine everything is ok, but when I deploy in production server I obtain a 404 error.&lt;/p></description></item><item><title>Microsoft Ajax ScriptManager and AspNet MVC</title><link>https://www.codewrecks.com/post/old/2009/04/microsoft-ajax-scriptmanager-and-aspnet-mvc/</link><pubDate>Sun, 05 Apr 2009 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/04/microsoft-ajax-scriptmanager-and-aspnet-mvc/</guid><description>&lt;p>I&amp;rsquo;m porting a sample application from asp.net to MVC, I used this app to make my session during last DotNetMarche event dedicated to JQuery. Now I&amp;rsquo;m writing the same sample pages in asp.net mvc to compare both technologies. In an Asp.Net page I showed how to use jQuery to do &lt;em>Edit in place&lt;/em> of some Photo Description in an application that manages photo album. At a certain point my jQuery script will communicate with the server through an asmx webservice exposed with a ScriptManager.&lt;/p></description></item><item><title>Set a wait image with JQuery for asyncronous operations</title><link>https://www.codewrecks.com/post/old/2009/03/set-a-wait-image-with-jquery-for-asyncronous-operations/</link><pubDate>Thu, 26 Mar 2009 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/03/set-a-wait-image-with-jquery-for-asyncronous-operations/</guid><description>&lt;p>I&amp;rsquo;m modifying an ASP.NEt site to achieve better performances, I&amp;rsquo;m actually moving some operations client-side with jquery. A typical pattern is to issue requests to a webservice instead of making a postback of the whole page. Here is a typical situation, I have a lot of rows in a grid and the user must be able to change some values.&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2009/03/image4.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2009/03/image-thumb4.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2009/03/image-thumb4.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>A standard asp.net approach uses an autopostback dropDownList to do a postback when the user change a value, but this force the server to render the &lt;strong>whole page again&lt;/strong>. This is a tremendous waste of resource, because the page has a big viewstate. The obvious solution is to use JQuery or some other client side script library to invoke a webservice function. I use a simple JQuery script that hides all the dropDownList and insert a click handler on the value, in this way when the user click on a value the dropdownlist appears.&lt;/p></description></item><item><title>Optimization of Javascript and css files</title><link>https://www.codewrecks.com/post/old/2009/01/optimization-of-javascript-and-css-files/</link><pubDate>Sat, 24 Jan 2009 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/01/optimization-of-javascript-and-css-files/</guid><description>&lt;p>The first page of a web application is the first thing that users look at, and it is very important that it performs well. In &lt;a href="http://www.codewrecks.com/blog/index.php/2009/01/09/optimize-aspnet-web-application/">old post&lt;/a> I dealt with some tools to analyze application performances, today I want to spent some time to deal with one of the most common problems of web applications, too many css or javascript file to download. I take an application I’m working into and did some check on the page that gets showed after a login, I first start with &lt;a href="http://www.microsoft.com/downloads/details.aspx?FamilyID=119F3477-DCED-41E3-A0E7-D8B5CAE893A3&amp;amp;amp;displaylang=en">VRTA&lt;/a>.&lt;/p></description></item><item><title>Optimize aspnet web application</title><link>https://www.codewrecks.com/post/old/2009/01/optimize-aspnet-web-application/</link><pubDate>Fri, 09 Jan 2009 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/01/optimize-aspnet-web-application/</guid><description>&lt;p>The first step to optimize an application is &amp;ldquo;&lt;a href="http://blogs.msdn.com/ricom/archive/2007/06/13/partly-sunny-chance-of-showers-bring-an-umbrella.aspx">measure measure measure&lt;/a>&amp;rdquo;, you cannot optimize nothing without measuring, you need some number that tells you where the application is slow and suggests you where to apply modifications, then after your optimization is done, run test suite again and measure again to check if performance are improved.&lt;/p>
&lt;p>In web applications one of the most annoying stuff is a slow home page, and asp.net sites quite often can suffer of this problem. To analyze why a page is slow you can use a lot of tools, but two of them are worth to mention. The first is &lt;a href="http://msdn.microsoft.com/en-us/magazine/dd188562.aspx">Microsoft Visual Round Trip Analyzer&lt;/a>, it is a great tool, but you cannot use in an environment where the browser and the server are on the same machine &lt;a href="http://rangeofmotion.spaces.live.com/blog/cns!7C83677C017E6E58!155.entry">as you can read here&lt;/a>. The obvious solution is installing a virtual machine, then install VRTA on that machine and navigate from the virtual machine to your development machine, so you can use VRTA without any problem. You can read Msdn article above to find some useful informations on how to use VRTA.&lt;/p></description></item><item><title>Create a 'LoginView like' control in aspnet</title><link>https://www.codewrecks.com/post/old/2008/10/create-a-loginview-like-control-in-aspnet/</link><pubDate>Fri, 17 Oct 2008 07:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/10/create-a-loginview-like-control-in-aspnet/</guid><description>&lt;p>The LoginView control is a very interesting one, it permits you to specify different content templates in the page depending on the role of the current user. Sometimes this scheme is not enough, in a project I&amp;rsquo;m working in, we have five roles, and the software is subdivided in areas, each role can have  read, write or none permission on each area (an access matrix), and the permissions can be set through an administration page.&lt;/p></description></item><item><title>Javascript date UTC and Microsoft Ajax</title><link>https://www.codewrecks.com/post/old/2008/10/javascript-date-utc-and-microsoft-ajax/</link><pubDate>Thu, 16 Oct 2008 05:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/10/javascript-date-utc-and-microsoft-ajax/</guid><description>&lt;p>Since I&amp;rsquo;m a noob javascript programmer I tend not to write javascript code if possible, &lt;a href="http://jquery.com/">JQuery&lt;/a> helped me a lot because it permits me to do complex thing in a very simple way, but quite often javascript continues to surprise me.&lt;/p>
&lt;p>Yesterday I had to write a really simple piece of js code, I have a method in a .net webservice that accepts a complex object, and one of the property of the object is of type Date. I need to do 2 simple things&lt;/p></description></item><item><title>Use ICSharpCodeSharpZipLib to write directly to ResponseOutputStream in a aspnet application</title><link>https://www.codewrecks.com/post/old/2008/08/use-icsharpcodesharpziplib-to-write-directly-to-responseoutputstream-in-a-aspnet-application/</link><pubDate>Tue, 26 Aug 2008 04:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/08/use-icsharpcodesharpziplib-to-write-directly-to-responseoutputstream-in-a-aspnet-application/</guid><description>&lt;p>I have a web site where I need to dynamically create rtf reports. I decided to use Asp.NEt 3.5 routing, (maybe I’ll discuss another day) so I can redirect request like&lt;/p>
&lt;p>&lt;a href="http://localhost/Myapp/reports/reportwizard/14/Report.zip" title="http://10.8.0.10/RepManagement/reports/reportwizard/14/Report.zip">http://localhost/Myapp/reports/reportwizard/14/Report.zip&lt;/a>&lt;/p>
&lt;p>to an handler that dynamically creates the zip file and stream it to the client browser. Here is the code&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span>Dim service As New WebLogic.Report.ReportService
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Dim generator As RTFSimpleDocGenerator = service.CreateReport(ReportId)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>context.Response.ContentType = &lt;span style="color:#e6db74">&amp;#34;application/zip&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Using ZipStream As ZipOutputStream = New ZipOutputStream(context.Response.OutputStream)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dim ZipEntry As ZipEntry = New ZipEntry(&lt;span style="color:#e6db74">&amp;#34;report.rtf&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ZipStream.PutNextEntry(ZipEntry)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ZipStream.SetLevel(&lt;span style="color:#ae81ff">5&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> generator.Save(ZipStream)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>End Using&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin. http://dunnhq.com -->
&lt;p>As you can see the code is really simple, I create a ICSharpLib stream directly on context.Response.OutputStream, and then I simply use my rtf generator to write directly on the zipped stream, the result is.&lt;/p></description></item><item><title>First impressions on JQuery</title><link>https://www.codewrecks.com/post/old/2008/08/first-impressions-on-jquery/</link><pubDate>Fri, 08 Aug 2008 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/08/first-impressions-on-jquery/</guid><description>&lt;p>I’ve finished reading the second chapter of “Jquery In Action” and I must admit that seems to me a very interesting library.&lt;/p>
&lt;p>JQuery permits you to select various part of the DOM with a great flexibility, and I think that it can really simplify writing client code even for ASP.NEt application, where selecting the element by id is usually not so immediate, because ASP.NET generate the id of the HTML elements composing their id with those of their containers, generating the well known container$container$controlid pattern.&lt;/p></description></item><item><title>Aspnet 20 Controls adapter to the rescue</title><link>https://www.codewrecks.com/post/old/2008/07/aspnet-20-controls-adapter-to-the-rescue/</link><pubDate>Tue, 08 Jul 2008 09:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/07/aspnet-20-controls-adapter-to-the-rescue/</guid><description>&lt;p>In an asp.net 2.0 application of our team we inserted long time ago a Theme Manager, a simple module that is used to retrieve the theme selected for current user (from profile management) and dynamically apply it to the page of the site. With this module each user can choose a theme for the site. We usually insert this theme in all the site we are working on since we always like dynamic theme management.&lt;/p></description></item><item><title>Secure your queryString with encription in aspnet 20</title><link>https://www.codewrecks.com/post/old/2008/06/secure-your-querystring-with-encription-in-aspnet-20/</link><pubDate>Fri, 13 Jun 2008 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/06/secure-your-querystring-with-encription-in-aspnet-20/</guid><description>&lt;p>This post is mainly a tralation of an &lt;a href="http://blogs.ugidotnet.org/rgm/archive/2007/10/08/88796.aspx">old post&lt;/a> in italian. &lt;a href="http://www.codewrecks.com/blog/storage/SecureQueryString.zip">Here is the source Code&lt;/a>.&lt;/p>
&lt;p>QueryString is a common and easy way to move state between pages in web applications, but it can lead to a security problem. Suppose you are writing a forum engine, you write a simple page to edit a post that accepts the id of the post in querystring. Es&lt;/p>
&lt;p>&lt;a href="http://myforum.com/editpage.aspx?PostId=1342">http://myforum.com/editpage.aspx?PostId=1342&lt;/a>&lt;/p>
&lt;p>This can lead to a problem, what happened if a malicious user change the id trying to edit another post of another user? This kind of problem lead to security vulnerabilities, because querystring data can be easily manipulated by attackers and this is usually a bad thing.&lt;/p></description></item><item><title>ASPNEt and ObjectDataSource</title><link>https://www.codewrecks.com/post/old/2008/05/aspnet-and-objectdatasource/</link><pubDate>Mon, 19 May 2008 01:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/05/aspnet-and-objectdatasource/</guid><description>&lt;p>I do not like very much the ObjectDataSource object of ASP.Net, but sometimes it gets useful, expecially when I already have a service class that extracts exactly the data you want. Today I did some cleanup on a project that is born with standard DAL with Enterprise Library and now Is evolving with nhibernate. I use my loved refactor to make some Safe Delete of old classes…I deleted 5 class that are not used anymore…but…..some of then are used through objectDataSource, so the project still compile well, but the site crash in a couple of page.&lt;/p></description></item><item><title>AspNet Ajax Type is not defined or Sys is not defined</title><link>https://www.codewrecks.com/post/old/2008/05/aspnet-ajax-type-is-not-defined-or-sys-is-not-defined/</link><pubDate>Tue, 06 May 2008 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/05/aspnet-ajax-type-is-not-defined-or-sys-is-not-defined/</guid><description>&lt;p>Today I was developing a little asp.net user control with ajax functionality. The control should show a popup with some data and an image that is a preview of a site. Since getting the preview of the url (with a server external component) is time consuming process I simply setup a webservice and use scriptmanager to call the webservice function that does the work. This permits me to show to the user an image telling (“click here for PReview”) When the user click the image a new image is showed (“wait for preview to be generated”) and finally when the webservice function gives me the result I show the final image.&lt;/p></description></item><item><title>ASPNet and custom parameter for datasource controls</title><link>https://www.codewrecks.com/post/old/2008/04/aspnet-and-custom-parameter-for-datasource-controls/</link><pubDate>Tue, 29 Apr 2008 23:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/04/aspnet-and-custom-parameter-for-datasource-controls/</guid><description>&lt;p>ASp.net 2.0 introduces datasource controls, such as SqlDataSource and ObjectDataSource, these controls work quite well, expecially the objectDataSource that permits you to bind to methods of a custom object. In an application of mine there is a user control that has a datagrid with custom logic, that data should be enclosed in different pages, and the control support filtering records. The problem is that in some page we need to be able to pass a parameter to querystring to set the filter, in other pages we have a series of control used by the user to set the filter. The obvious solution is to create a custom parameter object to support this situation.&lt;/p></description></item><item><title>AspNet accessing network shared files returns Logon failure unknown user name or bad password</title><link>https://www.codewrecks.com/post/old/2008/04/aspnet-accessing-network-shared-files-returns-logon-failure-unknown-user-name-or-bad-password/</link><pubDate>Tue, 08 Apr 2008 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/04/aspnet-accessing-network-shared-files-returns-logon-failure-unknown-user-name-or-bad-password/</guid><description>&lt;p>Today I’m creating a simple page that needs access to a network shared file, when I ran the page asp.net gives me the error&lt;/p>
&lt;blockquote>
&lt;p>&lt;em>Logon failure: unknown user name or bad password.&lt;/em>&lt;/p>&lt;/blockquote>
&lt;p>this happens because the user used by IIS to run the page does not have permission to access the share, a quick solution is to use impersonation on web.config&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-xml" data-lang="xml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">&amp;lt;identity&lt;/span> &lt;span style="color:#a6e22e">impersonate=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;true&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">userName=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;alkampfer&amp;#34;&lt;/span> &lt;span style="color:#a6e22e">password=&lt;/span>&lt;span style="color:#e6db74">&amp;#34;xxxx&amp;#34;&lt;/span> &lt;span style="color:#f92672">/&amp;gt;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin. http://dunnhq.com -->
&lt;p>A better solution is create a worker process for your site, run that process with a dedicated user, and finally give to that user access to network share, in my actual dev machine, with windows xp and iis5, I cannot create worker process nor different site, so I resolved to impersonate in web.config.&lt;/p></description></item><item><title>Parser Error Message Unable to generate a temporary class result1</title><link>https://www.codewrecks.com/post/old/2008/04/parser-error-message-unable-to-generate-a-temporary-class-result1/</link><pubDate>Fri, 04 Apr 2008 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/04/parser-error-message-unable-to-generate-a-temporary-class-result1/</guid><description>&lt;p>I’m moving one project on a new server, when I launched the site it gives me the error &amp;ldquo;&lt;em>Parser Error Message: Unable to generate a temporary class (result=1)&lt;/em>&amp;rdquo; it turns out that the user used to run the worker process does not have access to windows temp directory…..but I supposed that windows temp directory is accessible to everyone.&lt;/p>
&lt;p>I give IIS_WPG full control over temp directory and everytingh works again&lt;/p></description></item><item><title>A tale of Transfer-Encoding chunked microsoft ajax updatepanel and how to detect partial rendering in a httpmodule</title><link>https://www.codewrecks.com/post/old/2008/03/a-tale-of-transfer-encoding-chunked-microsoft-ajax-updatepanel-and-how-to-detect-partial-rendering-in-a-httpmodule/</link><pubDate>Tue, 18 Mar 2008 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/03/a-tale-of-transfer-encoding-chunked-microsoft-ajax-updatepanel-and-how-to-detect-partial-rendering-in-a-httpmodule/</guid><description>&lt;p>I usually adopt a custom simple HttpModule to compress programmatically the page content in my asp.net applications.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-csharp" data-lang="csharp">&lt;span style="display:flex;">&lt;span>Private Sub CompressRequest()
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> If ((String.IsNullOrEmpty(HttpContext.Current.Request.Headers(&lt;span style="color:#e6db74">&amp;#34;Accept-encoding&amp;#34;&lt;/span>)) = False) AndAlso _
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (HttpContext.Current.Request.Headers(&lt;span style="color:#e6db74">&amp;#34;Accept-encoding&amp;#34;&lt;/span>).Contains(&lt;span style="color:#e6db74">&amp;#34;gzip&amp;#34;&lt;/span>) = True)) Then
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dim gzip As GZipStream = New GZipStream(HttpContext.Current.Response.Filter, CompressionMode.Compress, True)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HttpContext.Current.Response.Filter = gzip
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HttpContext.Current.Response.AppendHeader(&lt;span style="color:#e6db74">&amp;#34;Content-encoding&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;gzip&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> ElseIf ((String.IsNullOrEmpty(HttpContext.Current.Request.Headers(&lt;span style="color:#e6db74">&amp;#34;Accept-encoding&amp;#34;&lt;/span>)) = False) AndAlso _
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> (HttpContext.Current.Request.Headers(&lt;span style="color:#e6db74">&amp;#34;Accept-encoding&amp;#34;&lt;/span>).Contains(&lt;span style="color:#e6db74">&amp;#34;deflate&amp;#34;&lt;/span>) = True)) Then
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Dim defl As DeflateStream = New DeflateStream(HttpContext.Current.Response.Filter, CompressionMode.Compress, True)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HttpContext.Current.Response.Filter = defl
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> HttpContext.Current.Response.AppendHeader(&lt;span style="color:#e6db74">&amp;#34;Content-encoding&amp;#34;&lt;/span>, &lt;span style="color:#e6db74">&amp;#34;deflate&amp;#34;&lt;/span>)
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> End If
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> End Sub&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;!-- Code inserted with Steve Dunn's Windows Live Writer Code Formatter Plugin. http://dunnhq.com -->
&lt;p>This is really a simple method to apply a zipped stream wrapper around the standard stream of asp.net response. This worked well until now, I took a site of one of my colleague, and add in some pages with update panel, the update panel does not work, telling that the response is not good and maybe someone is doing response.write() or httptrace.&lt;/p></description></item><item><title>Pay Attention to the viewState</title><link>https://www.codewrecks.com/post/old/2008/02/pay-attention-to-the-viewstate/</link><pubDate>Mon, 11 Feb 2008 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/02/pay-attention-to-the-viewstate/</guid><description>&lt;p>In  a project of mine I have a page that permit the user to search into database for object that satisfies a series of criteria. I have a function that returns a list of SMResult object, each of them store the id of the object, and some other information, such as the percentage of match and so on.&lt;/p>
&lt;p>In the first version I have a user control with a property that accept a IList&amp;lt;SMResult&amp;gt;, this control simply shows the objects that are contained into the list. This control store the list into the viewstate because he needs the information between various postback. The problem is that the database grow bigger and bigger, the function can return even 10.000 result, but I simply show to the user the first 500…but the list of result stored into the viewstate is not trimmed. This create a huge 640kb page argh… Simply trimming the Result List to 500 elements drop the page to 120 kb.&lt;/p></description></item><item><title>AspNET 20 GridView Custom Sorting with PagedDataSource</title><link>https://www.codewrecks.com/post/old/2008/02/aspnet-20-gridview-custom-sorting-with-pageddatasource/</link><pubDate>Sat, 09 Feb 2008 02:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2008/02/aspnet-20-gridview-custom-sorting-with-pageddatasource/</guid><description>&lt;p>ASP.Net Web Form is a great environment, but sometimes make me surprised. Suppose you have this situation, you have a great amount of records that can be returned from the database and you must show them in a gridview. Surely you will enable paging to improve performance, but standard paging consist in retrieving from the database &lt;strong>all the records&lt;/strong> , give them to the grid that will do the paging. This is a tremendous waste of memory, suppose you do not cache the dataset and have 10.000 record, each time the user change page or sorting direction, you retrieve 10.000 record in a dataset&amp;hellip;what a tremendous work for the Garbage Collector.&lt;/p></description></item><item><title>DropDownList And ViewState false</title><link>https://www.codewrecks.com/post/old/2007/12/dropdownlist-and-viewstate-false/</link><pubDate>Tue, 04 Dec 2007 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/12/dropdownlist-and-viewstate-false/</guid><description>&lt;p>It is a while that I do not write in my English blog, today I want to continue a issue discussed &lt;a href="http://www.nablasoft.com/Alkampfer/?p=65">in an old post&lt;/a>. Consider this code&lt;/p>
&lt;p>&amp;lt;body&amp;gt;&lt;br>
&amp;lt;formid=”form1″runat=”server”oninit=”Page_Init”&amp;gt;&lt;br>
&amp;lt;div&amp;gt;&lt;br>
&amp;lt;asp:DropDownListID=”ddlist1″EnableViewState=”false”AutoPostBack=”true”AppendDataBoundItems=”true”&lt;br>
runat=”server”OnSelectedIndexChanged=”SelectedIndexChanged”&amp;gt;&lt;br>
&amp;lt;asp:ListItem&amp;gt;Select a team&amp;lt;/asp:ListItem&amp;gt;&lt;br>
&amp;lt;/asp:DropDownList&amp;gt;&lt;/p>
&lt;p>&amp;lt;asp:DropDownListID=”ddlist2″EnableViewState=”false”AutoPostBack=”true”AppendDataBoundItems=”true”&lt;br>
runat=”server”OnSelectedIndexChanged=”SelectedIndexChanged”&amp;gt;&lt;br>
&amp;lt;asp:ListItem&amp;gt;Select a team&amp;lt;/asp:ListItem&amp;gt;&lt;br>
&amp;lt;/asp:DropDownList&amp;gt;&lt;br>
&amp;lt;/div&amp;gt;&lt;br>
&amp;lt;/form&amp;gt;&lt;br>
&amp;lt;/body&amp;gt;&lt;br>
&amp;lt;/html&amp;gt;&lt;/p>
&lt;p>&amp;lt;scriptrunat=”server”&amp;gt;&lt;/p>
&lt;p>protectedvoid Page_Init(object sender, EventArgs e) {&lt;br>
ddlist1.DataSource = newstring[] { “Ferrari”, “McLaren”, “Renault” };&lt;br>
ddlist2.DataSource = newstring[] { “Ferrari”, “McLaren”, “Renault” };&lt;br>
DataBind();&lt;br>
}&lt;br>
protectedvoid SelectedIndexChanged(object sender, EventArgs e) {&lt;br>
DropDownList ddl = (DropDownList) sender;&lt;br>
Response.Write(String.Format(“SelectedIndexChanged {0} value = {1}&amp;lt;BR/&amp;gt;”,&lt;br>
ddl.ID, ddl.SelectedValue));&lt;br>
} &lt;br>
&amp;lt;/script&amp;gt;&lt;br>
This code contains two simple DropDownList, both with ViewState disabled, the datasource is rebound at each PageInit and in SelectedIndexChanged we simple write a string in response output. You can be surprised that if you change the first dropdown all was good, but when you change the second one you find that the output contains string like this&lt;/p></description></item><item><title>Exceptional ASPNET</title><link>https://www.codewrecks.com/post/old/2007/07/exceptional-aspnet/</link><pubDate>Fri, 27 Jul 2007 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/exceptional-aspnet/</guid><description>&lt;p>This afternoon I’m developing a web application, while I’m buildind the site I did a refresh on a page&amp;hellip;after some seconds this is the result showed from firefox :D&lt;/p>
&lt;p>&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2007/07/072707-1530-exceptional11.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2007/07/072707-1530-exceptional11.png" alt="External Image" />&lt;/a>&lt;/p>
&lt;p>Amazing.&lt;/p>
&lt;p>Alk.&lt;/p></description></item><item><title>AspNET 20 CustomValidator and Client script validation</title><link>https://www.codewrecks.com/post/old/2007/07/aspnet-20-customvalidator-and-client-script-validation/</link><pubDate>Wed, 18 Jul 2007 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/aspnet-20-customvalidator-and-client-script-validation/</guid><description>&lt;p>When it’s time to validate the user input on an asp.net page the validators control come to the rescue. If you want to do some custom validation that is not supported by the standard validator controls that ship with asp.net 2.0 you can resort to use asp:CustomValidator. Let’s do a little example on how to build a CustomValidator to check the text length of a textbox, useful I need to be sure that that the user insert a string whose length is between two values. First of all here is the declaration of the control on the page.&lt;/p></description></item><item><title>About speaking error: The file 8216xxx8217 has not been pre-compiled and cannot be requested</title><link>https://www.codewrecks.com/post/old/2007/07/about-speaking-error-the-file-xxx-has-not-been-pre-compiled-and-cannot-be-requested/</link><pubDate>Fri, 13 Jul 2007 04:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/about-speaking-error-the-file-xxx-has-not-been-pre-compiled-and-cannot-be-requested/</guid><description>&lt;p>Today I must update a web application in a pre-production environment. I use asp.net 2.0 and web deployment project, so I set the site to be precompiled, not updatable and all assemblies merged in a unique assembly. I build the site, test in developing machine than I do a xcopy deploy on preproduction server.&lt;/p>
&lt;p>When I access the site I saw the IE progress bar that runs the login page does not appears I ask to another developer to try to access the site, and he told me that nothing appears on the page. The fun thing is that after 2 minutes another developer called me and said “hey, what is happening to that machine, I received 1600 mail of exception”. I begin to faint immediately I stopped the server and began to look at the mail. I have an error handling module that intercepts all unhandled exception, create a log with enterprise library configured to send a mail to a distribution group of the developer of the project, and finally redirect the user on a error page called error.aspx.&lt;/p></description></item><item><title>AspNet 20 session stored in Sql</title><link>https://www.codewrecks.com/post/old/2007/07/aspnet-20-session-stored-in-sql/</link><pubDate>Thu, 12 Jul 2007 04:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/aspnet-20-session-stored-in-sql/</guid><description>&lt;p>Sometimes it is preferable to store the session of asp.net in sql, I prefer to use a distinct database for each application, the command to create such database is&lt;/p>
&lt;p>&lt;em>aspnet_regsql.exe -S localhost\isntancename -U sa -P sapwd -d &lt;strong>databasename&lt;/strong> -ssadd -sstype c&lt;/em>&lt;/p>
&lt;p>Notice the use of –sstype c parameter that forces the script to create a custom database, without that argument the scritp does not permit you to use a custom database name to store the session. In web.config you should also state that you want to use a custom type sql database with allowCustomSqlDatabase=”true”.&lt;/p></description></item><item><title>Intercept events from HttpModule</title><link>https://www.codewrecks.com/post/old/2007/07/intercept-events-from-httpmodule/</link><pubDate>Tue, 03 Jul 2007 22:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/intercept-events-from-httpmodule/</guid><description>&lt;p>This morning I was reading an interesting article (&lt;a href="http://msdn2.microsoft.com/en-us/library/9z52by6a.aspx">http://msdn2.microsoft.com/en-us/library/9z52by6a.aspx&lt;/a>) on how to perform custom authentication in a webservice. This article is interesting but actually does not run “as is”, it miss a little part, the Global.Asax code that listen for the HttpModule Event. The question is “&lt;em>How can I listen to an event raised from an Http module if the instance of that module is created by asp.net engine?”&lt;/em>. The answer is not so intuitive, because each event raised from an httpmodule can be intercepted by global.asax with a not so evident autowiring. It turns out that if you want to listen for an event raised from httpmodule you have to create a method in global.asax that match the signature of the event and name it with this pattern &lt;em>modulefriendlyname_eventname&lt;/em>. In the example of the above article I enabled the event with this code in web.config&lt;/p></description></item><item><title>Reference a user control from appcode</title><link>https://www.codewrecks.com/post/old/2007/07/reference-a-user-control-from-app_code/</link><pubDate>Tue, 03 Jul 2007 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/07/reference-a-user-control-from-app_code/</guid><description>&lt;p>User controls are one of the most useful features of ASP.NET, but they can generate problems with dynamic generation. Suppose you create a user control and then wants to dynamically create instances of that control and reference some specific properties or method of the control itself. If the code is in another user control there is no problem, just use a @register page directive and no problem, here is an example&lt;/p></description></item><item><title>Warping ASPNET</title><link>https://www.codewrecks.com/post/old/2007/06/warping-aspnet/</link><pubDate>Fri, 22 Jun 2007 01:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/06/warping-aspnet/</guid><description>&lt;p>In a recent project I have a big user control with a Asp.Wizard control, 6 tabs and each tab present a complex user control. The whole thing is used to insert a complex set of data presenting the operation to the user a standard windows tab. After a while the control has degraded, because a lot of logic has creep into it, and moreover the performance of the control are not so good, expecially because in a wizard control, all control in all tabs gets initialized and run at each page request, they simple become invisible, but if you do a lot of logic in page load of the single page performance are not so optimal.&lt;/p></description></item><item><title>The hell of disabling viewstate in aspnet 20</title><link>https://www.codewrecks.com/post/old/2007/06/the-hell-of-disabling-viewstate-in-aspnet-20/</link><pubDate>Tue, 05 Jun 2007 09:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/06/the-hell-of-disabling-viewstate-in-aspnet-20/</guid><description>&lt;p>The application model of Web Forms is not the most intuitive one, but to avoid being surprised and loosing time the most important thing to keep in mind is * &lt;strong>page lifecycle&lt;/strong>.* If you forget page lifecycle hell awaits you. Here is one of the most common example, look at the following code.&lt;/p>
&lt;p>&amp;lt;body&amp;gt;&lt;br>
&amp;lt;formid=”form1″runat=”server”&amp;gt;&lt;br>
&amp;lt;div&amp;gt;&lt;br>
&amp;lt;asp:DropDownListID=”MyDDListe1″EnableViewState=”true”AutoPostBack=”true”AppendDataBoundItems=”true”&lt;br>
runat=”server”OnSelectedIndexChanged=”SelectedIndexChanged”&amp;gt;&lt;br>
&amp;lt;asp:ListItem&amp;gt;Select a team&amp;lt;/asp:ListItem&amp;gt;&lt;br>
&amp;lt;/asp:DropDownList&amp;gt;&lt;br>
&amp;lt;/div&amp;gt;&lt;br>
&amp;lt;/form&amp;gt;&lt;br>
&amp;lt;/body&amp;gt;&lt;br>
&amp;lt;/html&amp;gt;&lt;/p>
&lt;p>&amp;lt;scriptrunat=”server”&amp;gt;&lt;br>
protectedvoid Page_Load(object sender, EventArgs e) {&lt;br>
if (!IsPostBack) {&lt;br>
MyDDListe1.DataSource = newstring[] { “Ferrari”, “McLaren”, “Renault” };&lt;br>
DataBind();&lt;br>
}&lt;br>
}&lt;br>
protectedvoid SelectedIndexChanged(object sender, EventArgs e) {&lt;br>
string msg = string.Format(@”alert(‘Selected item {0}’);”, MyDDListe1.SelectedValue);&lt;br>
ClientScript.RegisterStartupScript(GetType(), “blah”, msg, true);&lt;br>
} &lt;br>
&amp;lt;/script&amp;gt;&lt;/p></description></item><item><title>Change style of user controls with css</title><link>https://www.codewrecks.com/post/old/2007/05/change-style-of-user-controls-with-css/</link><pubDate>Thu, 31 May 2007 03:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/05/change-style-of-user-controls-with-css/</guid><description>&lt;p>Thanks to Guardian for the suggestion on this tip, I’m not really a stylesheet guru :D.&lt;br>
The problem is this, I have an ASP.NET &lt;em>user control&lt;/em> and I want to show it with two different styles in the same page. I looked into some asp.net forums and I found some examples of peoples that changes SkinId at runtime or did some other tricks, but a much better solution is to use css. In code &lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2007/05/usercontrolformatting.zip" title="Example">Example&lt;/a> attached to this post I show how to format single instances of user control with the only support of css. First of all This is the code of my user control, a simple label with a textbox.&lt;/p></description></item><item><title>WatiN and weird names of aspnet controls</title><link>https://www.codewrecks.com/post/old/2007/05/watin-and-weird-names-of-aspnet-controls/</link><pubDate>Wed, 30 May 2007 00:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/05/watin-and-weird-names-of-aspnet-controls/</guid><description>&lt;p>Asp.Net gives to HTML controls weird names, composed by the hierarchy of control used to generate the page. This causes problems for example writing WatiN test, because we cannot use Find.ById or use the Id of the control, because if we will change the layout of the page the name of the controls will change.&lt;/p>
&lt;p>One of the possible solution is to use regular expression, using a regex that will search for controls that ends with a specific string value. To easy the use of this method we can realize a simple helper class.&lt;/p></description></item><item><title>Again on dynamic control creation in aspnet 20</title><link>https://www.codewrecks.com/post/old/2007/05/again-on-dynamic-control-creation-in-aspnet-20/</link><pubDate>Thu, 17 May 2007 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/05/again-on-dynamic-control-creation-in-aspnet-20/</guid><description>&lt;p>In a &lt;a href="http://www.nablasoft.com/Alkampfer/?p=38">previous post&lt;/a> I explain best practices to follow when dealing with dynamic controls in asp.net 2.0, but I missed one important point. Try to insert this snippet of code in a blank page&lt;/p>
&lt;p>ProtectedSub Button1_Click(ByVal sender AsObject, ByVal e As System.EventArgs)&lt;br>
Trace.Warn(“clicked button “ + DirectCast(sender, Button).Text)&lt;br>
EndSub&lt;/p>
&lt;p>ProtectedSub Page_Load(ByVal sender AsObject, ByVal e As System.EventArgs) HandlesMe.Load&lt;br>
CreateButtons()&lt;br>
EndSub&lt;/p>
&lt;p>PrivateSub CreateButtons()&lt;/p>
&lt;p>IfNotMe.IsPostBack Then&lt;br>
Dim button AsNew Button&lt;br>
button.Text = “Bottone che poi scompare”&lt;br>
AddHandler button.Click, AddressOf Button1_Click&lt;br>
Page.Form.Controls.Add(button)&lt;br>
EndIf&lt;br>
Dim button2 AsNew Button&lt;br>
button2.Text = “Button2”&lt;br>
AddHandler button2.Click, AddressOf Button1_Click&lt;br>
Page.Form.Controls.Add(button2)&lt;br>
EndSub&lt;/p></description></item><item><title>Dynamic creation of controls in aspnet 20</title><link>https://www.codewrecks.com/post/old/2007/05/dynamic-creation-of-controls-in-aspnet-20/</link><pubDate>Wed, 16 May 2007 11:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/05/dynamic-creation-of-controls-in-aspnet-20/</guid><description>&lt;p>Today I was &lt;a href="http://blogs.ugidotnet.org/crad/archive/2007/05/16/78405.aspx">discussing with a friend&lt;/a> about dynamic creation of control in asp.net 2.0 pages. It comes out that the matter is not so easy. The first question is when the controls must be created to work correctly in page lifecycle? The story start with this snippet&lt;/p>
&lt;p>protectedvoid Page_Load(object sender, EventArgs e) {&lt;br>
this.form1.Controls.AddAt(0, newButton());&lt;br>
if (!IsPostBack) {&lt;br>
DropDownList1.Items.Add(“Value 1”);&lt;br>
DropDownList1.Items.Add(“Value 2”);&lt;br>
DropDownList1.Items.Add(“Value 3”);&lt;/p>
&lt;p>}&lt;br>
}&lt;/p>
&lt;p>This code is wrong, if you run the page you can see that when the button is pressed the dropdownlist does not retain the values from the viewstate. The problem arise from the fact that asp.net 2.0 engine restore controls value from the viewstate following the ordinal position of the controls in the form. In the above example, at load we creates a button that is inserted as the first control of the form, subsequently viewstate is created. At this moment page layout has one button at position 0 and a ddl at position 1. When we do a postback, before load the asp.net engine restore the viewstate, but since restoration is done by ordinal position, at this moment the button is not still created, so the viewstate of the button is restored on the ddl. Possible solution are:&lt;/p></description></item><item><title>Pay attention to MembershipGetUser</title><link>https://www.codewrecks.com/post/old/2007/05/pay-attention-to-membershipgetuser/</link><pubDate>Wed, 16 May 2007 02:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2007/05/pay-attention-to-membershipgetuser/</guid><description>&lt;p>Yesterday I was looking at database usage made by some pages of a project that I’m coordinating. With the profiler I saw with horror that a page made about 40 query to the asp.net user database at every post or get. Inspecting the code I realized that the developer has inserted some row based logic for a gridview, He handled the RowDataBound event (fired once for each row) and in the code He calls Membership.GetUser(). Since most of the major scalability problems with asp.net applications derive from I/O it is better to reduce the calls to membership API function. A possible solution is using the session to cache user data, or if the session is not a suitable choice, it is possible to use httpcontext, in this way if a page is composed by several user control, and each one needs to interact with the membershipuser object, only the first call goes to the database, and subsequent one will find the object in memory.&lt;/p></description></item></channel></rss>