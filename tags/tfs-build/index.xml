<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>TFS Build on Codewrecks</title><link>https://www.codewrecks.com/tags/tfs-build/</link><description>Recent content in TFS Build on Codewrecks</description><generator>Hugo</generator><language>en</language><lastBuildDate>Fri, 03 Jun 2016 14:00:37 +0200</lastBuildDate><atom:link href="https://www.codewrecks.com/tags/tfs-build/index.xml" rel="self" type="application/rss+xml"/><item><title>Create a Release with PowerShell Zipped Artifacts and Chocolatey</title><link>https://www.codewrecks.com/post/old/2016/06/create-a-release-manager-in-tfs-with-powershell-and-zipped-artifacts/</link><pubDate>Fri, 03 Jun 2016 14:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/create-a-release-manager-in-tfs-with-powershell-and-zipped-artifacts/</guid><description>&lt;p>In previous post I described how to create a simple PowerShell scripts that is capable of installing a software starting from a zipped file that contains the “release” of a software (produced by a build) and some installation parameters. Once you have this scenario up and running, releasing your software automatically is quite simple.&lt;/p>
&lt;blockquote>
&lt;p>Once you automated the installation with a PowerShell script plus an archive file with Everything is needed to install the software, you are only a step away from Continuous Deployment.&lt;/p></description></item><item><title>Monitor if your branch will generate merge conflicts with TFS Build</title><link>https://www.codewrecks.com/post/old/2014/11/monitor-if-your-branch-will-generate-merge-conflicts-with-tfs-build/</link><pubDate>Sat, 15 Nov 2014 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/11/monitor-if-your-branch-will-generate-merge-conflicts-with-tfs-build/</guid><description>&lt;p>One of the &lt;strong>greatest advantage in using Git over a centralized Version Control System is branching system&lt;/strong>. It is quite common for developers to start branching whenever they need to add a new feature, work on that branch and finally merge back to mainline when the feature is finished. One of the most famous workflow is called &lt;a href="http://nvie.com/posts/a-successful-git-branching-model/">GitFlow&lt;/a>, a way to work in Git that is implemented even in some GUI tool like &lt;a href="https://www.atlassian.com/software/sourcetree/overview?_mid=2fbd5293e6446891fb55a371fd05daeb&amp;amp;amp;gclid=Cj0KEQiAkJyjBRClorTki_7Zx8QBEiQAcqwGMVF9nzHt6HSZgIswbcYiWI4InUXsU_25Nq8vajSR7mIaAofw8P8HAQ">SourceTree&lt;/a>.&lt;/p></description></item><item><title>Encrypt your password in TFS Build using Certificates</title><link>https://www.codewrecks.com/post/old/2014/08/encrypt-your-password-in-tfs-build-using-certificates/</link><pubDate>Sat, 09 Aug 2014 05:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/08/encrypt-your-password-in-tfs-build-using-certificates/</guid><description>&lt;p>Using &lt;a href="http://www.codewrecks.com/blog/index.php/2014/07/22/make-easy-storing-secure-password-in-tfs-build-with-dpapi/">DPAPI to encrypt password in builds&lt;/a> suffers from a serious drawback, &lt;strong>the password can be decrypted only by code that runs on the very same computer used to encrypt the password&lt;/strong>. You can overcome this limitation using roaming profiles, but it is not a option in many scenario. Another technique to enable multiple build servers to decrypt a password is using certificates. In PowerShell is really easy to use a certificate to encrypt/decrypt string and this article will show you how to secure a password in TFS Build definition using Certificates.&lt;/p></description></item><item><title>Tfs build fails with Database Projects</title><link>https://www.codewrecks.com/post/old/2014/02/tfs-build-fails-with-database-projects/</link><pubDate>Fri, 28 Feb 2014 11:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/02/tfs-build-fails-with-database-projects/</guid><description>&lt;p>If you have a TFS Builds that fails with an error like this one, even if you have installed Visual Studio 2013 on your build server.&lt;/p>
&lt;p>&lt;em>&lt;font face="Consolas">The imported project “C:\Program Files (x86)\MSBuild\Microsoft\VisualStudio\v11.0\SSDT\Microsoft.Data.Tools.Schema.SqlTasks.targets” was not found. Confirm that the path in the &amp;lt;Import&amp;gt; declaration is correct, and that the file exists on disk&lt;/font>&lt;/em>&lt;/p>
&lt;p>The reason could be that you miss Sql Server Data Tools, you only need to download them in all servers with Build Agents and install it. Now the build should runs without problems.&lt;/p></description></item><item><title>Automatically Deploy PowerShell modules to Build Agents in TFS</title><link>https://www.codewrecks.com/post/old/2014/02/automatically-deploy-powershell-modules-to-build-agents-in-tfs/</link><pubDate>Fri, 21 Feb 2014 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/02/automatically-deploy-powershell-modules-to-build-agents-in-tfs/</guid><description>&lt;p>I’ve done some blog post on customizing TFS Build with PowerShell scripts and the very first question I got from this approach is&lt;/p>
&lt;blockquote>
&lt;p>How can I store some PowerShell modules “somewhere” and have them available for all Build Agents?&lt;/p>&lt;/blockquote>
&lt;p>This is a real good question, but sadly enough it has no out-of-the-box answer. Luckily enough you can solve this with a little bit of PowerShell knowledge. Please be aware &lt;strong>that this solution is based on some assumption on how TFS build actually works and is not guaranteed to be stable in the future&lt;/strong> , but I’d like to share with you all if you want to try into your environment.&lt;/p></description></item><item><title>Deploy from a Team Foundation Server build to Web Site without specifying password in the build</title><link>https://www.codewrecks.com/post/old/2013/11/deploy-from-a-team-foundation-server-build-to-web-site-without-specifying-password-in-the-build/</link><pubDate>Fri, 29 Nov 2013 18:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2013/11/deploy-from-a-team-foundation-server-build-to-web-site-without-specifying-password-in-the-build/</guid><description>&lt;p>In a previous article I explained how &lt;a href="http://www.codewrecks.com/blog/index.php/2013/08/01/deploy-asp-net-web-site-on-iis-from-tfs-build/">to deploy an ASP.NET Web Site from a TFS Build&lt;/a> thanks to MSDeploy engine. One of the &lt;strong>great complain you can have with this solution is the need to specify UserName and password in build configuration&lt;/strong> and the need to use the AllowUntrustedCertificate=true.&lt;/p>
&lt;p>The problem of the certificate is the simpler of the two to solve, &lt;strong>you just need to use a certificate that is trusted inside your organization or a certificate issued by a trusted certificate authority (es godaddy)&lt;/strong> , instead of the default one that is generated by MsDeploy configuration in IIS. This is most an administrative stuff and I’m not going to cover it in this post.&lt;/p></description></item><item><title>News in TFS 2013 Build System</title><link>https://www.codewrecks.com/post/old/2013/10/news-in-tfs-2013-build-system/</link><pubDate>Mon, 21 Oct 2013 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2013/10/news-in-tfs-2013-build-system/</guid><description>&lt;p>&lt;a href="http://blogs.msdn.com/b/bharry/archive/2013/10/17/visual-studio-2013-rtm-available.aspx">Team Foundation Server 2013 is finally RTM&lt;/a> and it is time to explore some of its new functionalities and see what is changed between previous version. In the Build Area there are a lots of improvements especially because we now have Git Support and TFS presents a unified build experience between standard TFVC and Git.&lt;/p>
&lt;p>&lt;strong>Build workflow was redesigned and it got simplified&lt;/strong> , giving to the user an easier build authoring experience. In the extension area we now have the ability to specify &lt;a href="http://msdn.microsoft.com/en-us/library/dd647547.aspx#scripts">scripts to be run before and after the build and before and after test are run&lt;/a>. This give a really good extension experience, because &lt;strong>it does not require you to do a workflow customization if you need to simply run some custom code during the build&lt;/strong>. This capability is especially useful when paired with Powershell.&lt;/p></description></item><item><title>Installing a Build controller against an Hosted TFS on Azure</title><link>https://www.codewrecks.com/post/old/2011/09/installing-a-build-controller-against-an-hosted-tfs-on-azure/</link><pubDate>Thu, 15 Sep 2011 13:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2011/09/installing-a-build-controller-against-an-hosted-tfs-on-azure/</guid><description>&lt;p>One of the greatest &lt;a href="http://channel9.msdn.com/posts/Team-Foundation-Service-Preview-Team-Build">news of yesterday was the availability of the TEam Foundation Server on Windows Azure.&lt;/a> I can assure you that there is a huge hunting for invitation code (mine 5 are terminated after few minutes ;) ) and this demonstrates the high interest that people have against TFS on Azure.&lt;/p>
&lt;p>Clearly the other interesting news is the availability of the Developer Preview for the next version of Visual Studio (&lt;a href="http://blogs.msdn.com/b/jasonz/archive/2011/09/14/announcing-visual-studio-11-developer-preview.aspx">you can read the details here&lt;/a>). In Jason Zander’s post there are no details for TFS, because a lot of details were already discussed in Brian Harry’s blog, but I assure that there are a lot of news for the new TFS version.&lt;/p></description></item><item><title>Community extensions for TFS 2010 build</title><link>https://www.codewrecks.com/post/old/2011/07/community-extensions-for-tfs-2010-build/</link><pubDate>Tue, 05 Jul 2011 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2011/07/community-extensions-for-tfs-2010-build/</guid><description>&lt;p>I&amp;rsquo;m happy to announce that on 4 of July 2010 the community &lt;a href="http://tfsbuildextensions.codeplex.com/">TFS Build extensions&lt;/a> project on codeplex published its &lt;a href="http://tfsbuildextensions.codeplex.com/releases/view/67138">first stable release&lt;/a>.&lt;/p>
&lt;p>TFS 2010 build system is based on Workflow Foundation and this means that you can extend writing custom activities (I blogged &lt;a href="http://www.codewrecks.com/blog/index.php/tag/tfs-build/">quite a lot&lt;/a> about TFS Build in the past) or using legacy MSBuild actions. With this release you have now 100 new Actions / Activities you can use in your builds as well as a big amount of source code to understand how you can write extensions for Tfs Build System.&lt;/p></description></item><item><title>Getting code coverage result in drop folder during a TFS2010 buils</title><link>https://www.codewrecks.com/post/old/2011/05/getting-code-coverage-result-in-drop-folder-during-a-tfs2010-buils/</link><pubDate>Mon, 09 May 2011 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2011/05/getting-code-coverage-result-in-drop-folder-during-a-tfs2010-buils/</guid><description>&lt;p>In a &lt;a href="http://www.codewrecks.com/blog/index.php/2010/06/14/running-code-coverage-in-tfs2010-builds/">very old post&lt;/a> I explained how to enable code coverage in TFS2010 builds and today I received a mail asking an interesting question.&lt;/p>
&lt;blockquote>
&lt;p>The question is: &lt;em>Is it possible to have Code Coverage result to be included in drop folder?&lt;/em>.&lt;/p>&lt;/blockquote>
&lt;p>Answering this question is a two phase process, the first one is understanding where MsTest store results of code coverage and verify that is possible to do something useful with them. The answer is simple, you can simply look at the TestResult directory after you execute tests inside visual studio, and you will find a data.coverage file.&lt;/p></description></item><item><title>Tfs build 2010-create a personalized build</title><link>https://www.codewrecks.com/post/old/2010/11/tfs-build-2010create-a-personalized-build/</link><pubDate>Fri, 26 Nov 2010 17:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/11/tfs-build-2010create-a-personalized-build/</guid><description>&lt;p>In several posts of the past I dealt with customization of TFS 2010 build, but I never pointed out how to create a personalized build that can be used without always resorting to edit the workflow directly. Suppose you work heavily with database projects, and you need to deploy database project to different server in most of your builds. In this scenario each time you need to deploy a DB project you &lt;a href="http://www.codewrecks.com/blog/index.php/2010/02/25/writing-a-custom-activity-for-tfs-2010-build-workflow/">can create a new build process&lt;/a>, edit it, add some customization and finally save and use it for the build.&lt;/p></description></item><item><title>Display complex information in TFS 2010 Build log</title><link>https://www.codewrecks.com/post/old/2010/11/display-complex-information-in-tfs-2010-build-log/</link><pubDate>Fri, 05 Nov 2010 11:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/11/display-complex-information-in-tfs-2010-build-log/</guid><description>&lt;p>If you read &lt;a href="http://blogs.msdn.com/b/jpricket/archive/2009/12/21/tfs-2010-displaying-custom-build-information-in-visual-studio.aspx">this post&lt;/a> you learn how to show custom informations in a build, and this is one of the coolest stuff you can do to improve reporting from the buil. In the original example Jason shows how to show informations of a standard object called PlatformConfiguration.&lt;/p>
&lt;p>This is very useful if you need to track some custom and complex information during a build from a Custom Action, and you want it to be showed with a specific interface in the log, like a superwarning :) or some information that need to be really evident in the log. First of all create a class that will contains all the data you want to show.&lt;/p></description></item><item><title>Power of the TFS 2010 Build system</title><link>https://www.codewrecks.com/post/old/2010/10/power-of-the-tfs-2010-build-system/</link><pubDate>Mon, 04 Oct 2010 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/10/power-of-the-tfs-2010-build-system/</guid><description>&lt;p>Tfs 2010 introduces a lot of news for the Build System, and now Tfs Build it is probably the best choice when you need to setup a Continuous Integration environment for your applications.&lt;/p>
&lt;p>One of the most powerful concept is the ability to use multiple Agents, and the use of Workflow Foundation 4.0 as the orchestrator engine for the build. As a result, you can use one of the basic template or you can build a customized one, just creating or modifying the basic workflow. Just to show the degree of customization you can reach, &lt;a href="http://blogs.msdn.com/b/jimlamb/archive/2010/09/14/parallelized-builds-with-tfs2010.aspx">this article&lt;/a> by &lt;a href="http://blogs.msdn.com/b/jimlamb/">Jim Lamb&lt;/a> shows you a customized build workflow that parallelize the build by Platform/configuration among the various available agents. Have fun.&lt;/p></description></item><item><title>Moving to a deploy system based on Tfs Build</title><link>https://www.codewrecks.com/post/old/2010/08/moving-to-a-deploy-system-based-on-tfs-build/</link><pubDate>Tue, 10 Aug 2010 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/08/moving-to-a-deploy-system-based-on-tfs-build/</guid><description>&lt;p>Now that I&amp;rsquo;m able to deploy to a remote machine a web application thanks to a customized build workflow it is time to move to a real scenario. I&amp;rsquo;ve blogged about two distinct tasks&lt;/p>
&lt;ol>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2010/07/07/use-tfs-2010-build-to-execute-arbitrary-task/">executing arbitrary code with a tfs build&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2010/07/10/deploy-remotely-with-tfs-build/">deploy an application to a remote server with a custom tfs workflow&lt;/a>&lt;/li>
&lt;/ol>
&lt;p>Now I want to move to a real scenario:&lt;em>executing the deploy when build quality of a specific build changes to &lt;em>ready for deployment&lt;/em>.&lt;/em> To accomplish this task you first need to understand how to register for event subscription in TFS, thanks to the &lt;strong>&lt;a href="http://msdn.microsoft.com/en-us/magazine/cc507647.aspx">bisubscribe.exe&lt;/a>&lt;/strong> tool. Subscription is made through webservices.&lt;/p></description></item><item><title>Deploy remotely with TFS build</title><link>https://www.codewrecks.com/post/old/2010/07/deploy-remotely-with-tfs-build/</link><pubDate>Sat, 10 Jul 2010 05:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/07/deploy-remotely-with-tfs-build/</guid><description>&lt;p>It is time to connect together a couple of posts of mine, &lt;a href="http://www.codewrecks.com/blog/index.php/2010/07/06/deploy-on-remote-machine-during-builds/">in the first&lt;/a> I simply explained how to deploy a web application to a remote machine with the use of Beyondexec2, &lt;a href="http://www.codewrecks.com/blog/index.php/2010/07/07/use-tfs-2010-build-to-execute-arbitrary-task/">in another one&lt;/a> I explained how to create a simple tfs build, that actually does not build anything, but execute a simple workflow.&lt;/p>
&lt;p>In this post I&amp;rsquo;ll cover a primitive build workflow to deploy the result of another build. The starting point is having a build called &lt;em>Demo&lt;/em> that builds a web site and create the installer package, plus the script described &lt;a href="http://www.codewrecks.com/blog/index.php/2010/07/06/deploy-on-remote-machine-during-builds/">here&lt;/a>. You need to insert the scripts and the PsExec utility in the source code of your team project, to be available from the build agent during the build, as shown in &lt;strong>Figure 1&lt;/strong>. Note: in this example I&amp;rsquo;ll use the &lt;a href="http://technet.microsoft.com/en-us/sysinternals/bb897553.aspx">PsExec&lt;/a> tools instead of beyondexecv2, but they are exactly equivalent, PsExex is more maintained tool and works better when execute in services.&lt;/p></description></item><item><title>Use TFS 2010 build to execute arbitrary task</title><link>https://www.codewrecks.com/post/old/2010/07/use-tfs-2010-build-to-execute-arbitrary-task/</link><pubDate>Wed, 07 Jul 2010 07:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/07/use-tfs-2010-build-to-execute-arbitrary-task/</guid><description>&lt;p>When you deal with continuous integration, building source is just one part of the problem, you need to run test, calculate metrics, deploy on test server and so on. To orchestrate the execution of integration scripts you need an infrastructure that is capable of scheduling, logging, distribution of agent and a central point of manteniance, TFS2010 build system has all this characteristics and many other that makes is suitable to run integration script, not only build one.&lt;/p></description></item><item><title>Managing Multiple TFS Build Agents with tag</title><link>https://www.codewrecks.com/post/old/2010/06/managing-multiple-tfs-build-agents-with-tag/</link><pubDate>Mon, 14 Jun 2010 16:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/06/managing-multiple-tfs-build-agents-with-tag/</guid><description>&lt;p>In last post I explain &lt;a href="http://www.codewrecks.com/blog/index.php/2010/06/14/running-code-coverage-in-tfs2010-builds/">how to run code coverage during a Tfs Build&lt;/a> and I mentioned the fact that to run code coverage you need to have Visual Studio premium or ultimate in the build machine. But what happens when you have multiple configured test agent, and only some of them have VS installed?&lt;/p>
&lt;p>The solution to such a problem is using &lt;a href="http://msdn.microsoft.com/en-us/library/bb399135.aspx#assign_tags">tags with the build agents&lt;/a>. Basically a tag is a string that gets assigned to a build agent, and identify some capabilities of the Agent Itself. In our example, we can define a tag called &lt;em>VSUltimate&lt;/em> that is used for each build agent that runs on a machine with Visual Studio Ultimate installed. Adding a tag is just a matter of going to the Agent Configuration&lt;/p></description></item><item><title>Running Code Coverage in Tfs2010 Builds</title><link>https://www.codewrecks.com/post/old/2010/06/running-code-coverage-in-tfs2010-builds/</link><pubDate>Mon, 14 Jun 2010 07:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/06/running-code-coverage-in-tfs2010-builds/</guid><description>&lt;p>To have Code Coverage collection for test execution during a build, you first need to create a.testsettings file in the solution with code coverage enabled. To enable code coverage simply open the testsetting file, go to &lt;em>Data And Diagnostics&lt;/em> and check the &lt;em>Code coverage&lt;/em> option. This is not enough, because when you check the code coverage option, the &lt;em>Configure&lt;/em> link highlighted in the picture become enabled.&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image21.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image_thumb21.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image_thumb21.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>Since Code Coverage works with instrumentation, you need to configure the assemblies you want to instrument, in my examplce only the MyMath assembly&lt;/p></description></item><item><title>Configuring multiple build agent for TFS 2010 in workgroup environment</title><link>https://www.codewrecks.com/post/old/2010/06/configuring-multiple-build-agent-for-tfs-2010-in-workgroup-environment/</link><pubDate>Sat, 12 Jun 2010 07:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/06/configuring-multiple-build-agent-for-tfs-2010-in-workgroup-environment/</guid><description>&lt;p>Even if you are in workgroup environment, without a domain, you can distribute your build agent in different machines. The key to achieve this is shadow accounts. I&amp;rsquo;ve installed as an example a build controller in the tfs machine, then I created an agent, and everything runs as BuildAgent account, created in the Tfs Server and added to the &lt;em>Project collection Build Service account&lt;/em>.&lt;/p>
&lt;p>The next step is creating a user called BuildAgent with the same password of the Tfs Server in another machine, suppose a Windows 7 one. Then I log into the Windows 7 machine as Administrator, install Tfs Build and proceed to configuration. When it is time to choose the project collection it asks for credentials, and you should login as BuildAgent, choose the ProjectCollection and then proceed on.&lt;/p></description></item><item><title>Create web deploy package during a tfs 2010 build</title><link>https://www.codewrecks.com/post/old/2010/06/create-web-deploy-package-during-a-tfs-2010-build/</link><pubDate>Mon, 07 Jun 2010 14:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/06/create-web-deploy-package-during-a-tfs-2010-build/</guid><description>&lt;p>Web projects in VS2010 has a great flexibility when it is time to deploy to the server, and it has a great option to generate a Deploy Package with a single click&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image8.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image_thumb8.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/06/image_thumb8.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>But if you build a web project with a tfs2010 build you can verify that in the drop folder you simply have the published web site that contains only all the files, and not package to install&lt;/p></description></item><item><title>Executing Test in a test agent during a build</title><link>https://www.codewrecks.com/post/old/2010/06/executing-test-in-a-test-agent-during-a-build/</link><pubDate>Thu, 03 Jun 2010 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/06/executing-test-in-a-test-agent-during-a-build/</guid><description>&lt;p>With Tfs Build you have a great flexibility on how to execute your unit tests. First of all you can decide to execute only tests of a certain category, or with a certain priority, but one of the most interesting feature is the ability to execute them in another machine with the helps of a test Agent. First of all you need to install a test controller and configure it in one of the machine:&lt;/p></description></item><item><title>Grab the highest changeset number in a workspace during a build</title><link>https://www.codewrecks.com/post/old/2010/04/grab-the-highest-changeset-number-in-a-workspace-during-a-build/</link><pubDate>Fri, 09 Apr 2010 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/04/grab-the-highest-changeset-number-in-a-workspace-during-a-build/</guid><description>&lt;p>In a &lt;a href="http://www.codewrecks.com/blog/index.php/2009/09/07/again-on-assembly-numbering-during-tfs-build/">very old post&lt;/a> I explained how to grab (with API) the latest changeset number during a build to use for assembly numbering, but I need to do a correction, after a comment on the post.&lt;/p>
&lt;p>The ChangesetId is an unique number for all the source control system, so I have two distinct problem.&lt;/p>
&lt;ol>
&lt;li>
&lt;p>while the build is running, developers do check-in, so when I retrieve the GetLatestChangesetId at a certain point during the buil, I do not get the real changesetId that I&amp;rsquo;m building, but an incorrect one. The problem is that a user can lookup the assembly number, see a changesetid and then verify that the changesetId is not related to that project.&lt;/p></description></item><item><title>Writing a custom Activity for TFS 2010 Build workflow</title><link>https://www.codewrecks.com/post/old/2010/02/writing-a-custom-activity-for-tfs-2010-build-workflow/</link><pubDate>Thu, 25 Feb 2010 17:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/02/writing-a-custom-activity-for-tfs-2010-build-workflow/</guid><description>&lt;p>A good option to customize TFS2010 build workflow is creating a Custom Activity, an operation that is quite different from creating a Custom &lt;strong>Code&lt;/strong> Activity. A custom activity does not contain any code at all and it is only composed by sub activities. This kind of customization is really useful to create pieces of workflow that will be inserted in main build workflow. As an example I created a simple custom activity to deploy a database project on a custom Database Server.&lt;/p></description></item><item><title>Run test with TypeMockIsolator during a tfs2010 build</title><link>https://www.codewrecks.com/post/old/2010/01/run-test-with-typemockisolator-during-a-tfs2010-build/</link><pubDate>Wed, 27 Jan 2010 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/01/run-test-with-typemockisolator-during-a-tfs2010-build/</guid><description>&lt;p>&lt;a href="http://site.typemock.com/">TypeMock Isolator&lt;/a> is a good library to inject mock objects without the need of interfaces, but what happens when you try to run test that uses typemock isolator inside a tfs 2010 build? Clearly the tests will not succeed&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image34.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb34.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb34.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>If you look at test result you can check why the tests are failing&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image35.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb35.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb35.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>Ok, the error is really clear, to run typemock tests, you need to run mstest with the tmockrunner.exe test runner that gets installed with typemock. To solve this problem create a custom activity like this one.&lt;/p></description></item><item><title>Wrap a MsBuild Custom task inside a custom action</title><link>https://www.codewrecks.com/post/old/2010/01/wrap-a-msbuild-custom-task-inside-a-custom-action/</link><pubDate>Tue, 19 Jan 2010 21:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/01/wrap-a-msbuild-custom-task-inside-a-custom-action/</guid><description>&lt;p>If you have an MSBuild custom task that you want to reuse in a TFS 2010 build workflow, you have two solution. The first is using the MsBuild activity as I described in &lt;a href="http://www.codewrecks.com/blog/index.php/2009/11/09/use-msbuild-custom-action-in-tfs2010-build-with-a-custom-project/">this post&lt;/a>, but this approach has a lot of limitations.&lt;/p>
&lt;p>First of all it is clumsy, because you have to pass custom task parameters as arguments to msbuild, but the worst problem is that you lose the ability to use output properties of the custom task. Suppose you have a TinyUrl custom task, that takes an url as input and gives back the tined version, this custom task has this implementation.&lt;/p></description></item><item><title>Log warning and errors in a custom action</title><link>https://www.codewrecks.com/post/old/2010/01/log-warning-and-errors-in-a-custom-action/</link><pubDate>Mon, 18 Jan 2010 20:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/01/log-warning-and-errors-in-a-custom-action/</guid><description>&lt;p>Some time ago &lt;a href="http://www.codewrecks.com/blog/index.php/2010/01/14/logging-in-custom-build-action-for-tfs-build-2010/">I blogged about&lt;/a> logging in custom action for TFS build 2010, I left out some details. Suppose you want to create a warning or an error and not a simple message, you need to create a specialized version of the LogWarning that logs a real warning.&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image22.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb22.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb22.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>You can do the same with errors.&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image23.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb23.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb23.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>These two methods permit you to log warnings and errors during a custom build action execution, let&amp;rsquo;s see how they affect the output. First of all you can verify that when you log an error the build partially succeeds&lt;/p></description></item><item><title>Set verbosity of logging during Tfs 2010 build</title><link>https://www.codewrecks.com/post/old/2010/01/set-verbosity-of-logging-during-tfs-2010-build/</link><pubDate>Mon, 18 Jan 2010 10:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/01/set-verbosity-of-logging-during-tfs-2010-build/</guid><description>&lt;p>To test a little bit how you can log information during a TFS 2010 build you can create a simple activity , this activity simply has a Message property and log three messages, at different BuildMessageImportance level&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image16.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb16.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb16.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>The utility function is the following one&lt;/p>
&lt;p>&lt;a href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image17.png">&lt;a target="_blank" href="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb17.png"> &lt;img src="https://www.codewrecks.com/blog/wp-content/uploads/2010/01/image_thumb17.png" alt="image" />&lt;/a>&lt;/a>&lt;/p>
&lt;p>Really simple isn&amp;rsquo;t it? :). Now you need to insert this custom action inside a standard tfs build definition file, to make this happens I need to remind you that you need to include the xaml build definition file in a project included in a solution where your custom action is defined, if not you cannot use the designer and you need to manually edit xaml file.&lt;/p></description></item><item><title>Deploy a database project with tfs build 2010</title><link>https://www.codewrecks.com/post/old/2010/01/deploy-a-database-project-with-tfs-build-2010/</link><pubDate>Mon, 04 Jan 2010 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2010/01/deploy-a-database-project-with-tfs-build-2010/</guid><description>&lt;p>If you want to deploy a database project into a target sql server instance during a tfs 2010 build, you can use with success the basic MsBuildTask, &lt;a href="http://www.codewrecks.com/blog/index.php/2009/10/23/automatic-deployment-of-a-web-application-with-tfs-build/">similar to tfs2008&lt;/a>.&lt;/p>
&lt;p>I decided to deploy the database, only if the tests are ok and the build is ok, so I place a condition activity under the test phase and I set the condition to pass only if the test and build status are different from Failed&lt;/p></description></item><item><title>Using graphical editor with custom action in tfs2010 buils</title><link>https://www.codewrecks.com/post/old/2009/12/using-graphical-editor-with-custom-action-in-tfs2010-buils/</link><pubDate>Tue, 08 Dec 2009 17:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/12/using-graphical-editor-with-custom-action-in-tfs2010-buils/</guid><description>&lt;p>In &lt;a href="http://www.codewrecks.com/blog/index.php/2009/12/07/custom-activities-in-tfs2010/">last post I&lt;/a> showed how to build a custom code activity to customize tfsbuild for beta2 of tfs2010. In that post I inserted custom action manually in the xaml file of the build definition, and I know that this can be a pain, if you want to insert a custom action in a specific part of the workflow.&lt;/p>
&lt;p>A simple trick is the following, copy the build definition into a test project that belong to the solution where your custom action belong, then add to the project, and you will see that your custom action magically appears into the toolbox. You can verify this in the picture above.&lt;/p></description></item><item><title>Custom Activities in TFS2010</title><link>https://www.codewrecks.com/post/old/2009/12/custom-activities-in-tfs2010/</link><pubDate>Mon, 07 Dec 2009 11:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/12/custom-activities-in-tfs2010/</guid><description>&lt;p>There is a good post on &lt;a href="http://blogs.msdn.com/jimlamb/archive/2009/11/18/how-to-create-a-custom-workflow-activity-for-tfs-build-2010.aspx">Jim Lamb&amp;rsquo;s blog&lt;/a> on how to customize tfs2010 build, but I decided to blog my experience because I need some more time to make it work.&lt;/p>
&lt;p>The steps to create a custom activities in tfs2010 are the following ones. First of all create an activity, like this simple TweetActivity one. Respect the example of Jim, I need to add also the BuildExtensionAttribute to make it run.&lt;/p></description></item><item><title>Deploy a database project with TFS Build</title><link>https://www.codewrecks.com/post/old/2009/10/deploy-a-database-project-with-tfs-build/</link><pubDate>Tue, 06 Oct 2009 09:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2009/10/deploy-a-database-project-with-tfs-build/</guid><description>&lt;p>When you develop web application you often have this scenario. Some people are testers, they are testing the application in dev all day, and they want always to test latest version. Moreover testers usually fills data into web application, so they want their data to be preserved between various deploy. If you simply clear all data in test database you will end with a lot of furious tester :) so do not even think to do this.&lt;/p></description></item></channel></rss>