<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>AzureDevOps on Codewrecks</title><link>https://www.codewrecks.com/categories/azuredevops/</link><description>Recent content in AzureDevOps on Codewrecks</description><generator>Hugo</generator><language>en</language><lastBuildDate>Tue, 11 Feb 2025 08:00:00 +0200</lastBuildDate><atom:link href="https://www.codewrecks.com/categories/azuredevops/index.xml" rel="self" type="application/rss+xml"/><item><title>Understanding Azure DevOps Pipeline Statistics</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-statistics-dashboard/</link><pubDate>Tue, 11 Feb 2025 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-statistics-dashboard/</guid><description>&lt;p>Pipeline statistics in Azure DevOps provide a wealth of information that can help you understand the &lt;strong>performance and efficiency of your pipelines&lt;/strong>. Even with really basic informations you can have interesting information. Lets examine&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/pipeline-statistics-dashboard.png"> &lt;img src="../images/pipeline-statistics-dashboard.png" alt="Pipeline statistics dashboard in Azure DevOps" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Pipeline statistics dashboard in Azure DevOps&lt;/em>&lt;/p>
&lt;p>My favorite information (1) is the 80th percentile of pipeline duration, this indicates me &lt;strong>if for some reason some pipeline is becoming slower&lt;/strong>. Actually in &lt;strong>Figure 1&lt;/strong> I can see that seems to be an increase in pipeline duration. &lt;strong>With (2) you can immediately understand which is the step that predates the execution time&lt;/strong>. In this example it is not a mistery, the IN-PROCESS step is actually running a full suite of integration test that uses MongoDB, Elasticsearch, and a complex software end-to-end without the UI.&lt;/p></description></item><item><title>Pill: Problems in Azure DevOps Pipelines due to Shallow Fetch</title><link>https://www.codewrecks.com/post/azdo/pills/shallow-fetch-pipeline/</link><pubDate>Sun, 02 Feb 2025 06:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/shallow-fetch-pipeline/</guid><description>&lt;p>In Azure DevOps, pipelines are a fundamental component for automating the build and release process. One of the key optimizations in these pipelines is the use of &lt;strong>shallow fetch when cloning repositories&lt;/strong>. Unlike a full clone, which downloads the entire history of the repository, a &lt;strong>shallow fetch retrieves only the specific commit needed for the build&lt;/strong>. This is a really welcomed feature, because repositories can contain years of history, or they can have &lt;strong>some big file committed by error in some older commit&lt;/strong>.&lt;/p></description></item><item><title>Azure DevOps Pills: Hide not used features from Team Projects</title><link>https://www.codewrecks.com/post/azdo/pills/hide-not-used-feature/</link><pubDate>Tue, 21 Jan 2025 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/hide-not-used-feature/</guid><description>&lt;p>Azure DevOps is a really complete set of functionalities to manage your Development Team and more. As you can see from Figure 1, it has five main Macro Set of Features that you can use. All these features are visible in the &lt;strong>five icons in the lower right part of the card of each Team Project&lt;/strong>&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/azdo-blocks.png"> &lt;img src="../images/azdo-blocks.png" alt="AzDo five main features blocks" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1:&lt;/strong>&lt;/em> &lt;em>AzDo five main features blocks&lt;/em>&lt;/p>
&lt;p>The very same five macro Feature set is visible on the left menu when you work with the detail of the Team Project. These part are, left to right&lt;/p></description></item><item><title>Azure DevOps Pills: Differences between old and new release pipeline</title><link>https://www.codewrecks.com/post/azdo/pills/release-new-and-old/</link><pubDate>Sun, 05 Jan 2025 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/release-new-and-old/</guid><description>&lt;p>Happy New Year to everyone. Today I&amp;rsquo;ll deal with a common question I got from customer regarding Azure DevOps release pipeline. The problem arise because &lt;strong>we already had a GUI based pipeline in the past and then we had a fully YAML pipeline&lt;/strong> so people are somewhat puzzled on which one to use in their scenario.&lt;/p>
&lt;blockquote>
&lt;p>When you have two way to do the same thing you are often confused on which tool to use to reach your goal&lt;/p></description></item><item><title>Azure DevOps Pills: Cleanup on premise pipeline agents</title><link>https://www.codewrecks.com/post/azdo/pills/cleanup-build-agent/</link><pubDate>Mon, 02 Dec 2024 08:00:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/cleanup-build-agent/</guid><description>&lt;p>Managing pipeline/build agents is something that &lt;strong>you should avoid if possible, preferring &lt;a href="https://www.codewrecks.com/post/old/2019/12/azure-devops-agent-with-docker-compose/">docker based agents&lt;/a> or Microsoft hosted agents&lt;/strong>. Sometimes this is not a viable options, especially if you have lots of integration tests, that runs on mongodb/elasticsearch/etc etc. While it &lt;strong>is quite simple to create a pipeline that uses docker to run these prerequisites&lt;/strong> speed is sometimes a problem that makes this solution not so feasible.&lt;/p>
&lt;p>Azure DevOps has a cost for pipeline that is based on concurrent execution, so it is quite &lt;strong>important that pipelines run fast to use less license but, more important, to give a quick feedback to the team&lt;/strong>. For this reason, we use physical machines, with quick NVMe Disks, RAM and Mongodb / Elastic / SQL installed on bare metal for maximum speed for integration tests.&lt;/p></description></item><item><title>Pills: Accessing your Git Repositories in Azure DevOps in Linux</title><link>https://www.codewrecks.com/post/azdo/pills/accessing-git-from-linux/</link><pubDate>Mon, 18 Nov 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/accessing-git-from-linux/</guid><description>&lt;p>When you need to access your Git Repositories hosted on Azure DevOps in Linux, you have basically two distinct options.&lt;/p>
&lt;p>The first one is the classic &lt;strong>ssh protocol, that is well know to everyone working with linux systems&lt;/strong>.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/ssh-clone.png"> &lt;img src="../images/ssh-clone.png" alt="Choosing SSH as protocol to clone from Azure DevOps" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Choosing SSH as protocol to clone from Azure DevOps&lt;/em>&lt;/p>
&lt;p>This is the preferred way to access &lt;strong>from linux system&lt;/strong> but sadly, Azure DevOps still not support Hardware Key based SSh keys, so you are &lt;strong>limited to use standard RSA keys&lt;/strong> as you can see in &lt;strong>Figure 2&lt;/strong>. Actually this is quite a limitation for those used to Yubikeys or Google Titan keys.&lt;/p></description></item><item><title>Pill: Unable to change Work Item type in Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/pills/unable-change-type/</link><pubDate>Wed, 13 Nov 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/unable-change-type/</guid><description>&lt;p>Today I got a strange error in Azure DevOps, I create a new Product Backlog Item, while I was writing it I realized that it would be better to create a Bug Type. My natural reaction was, save and then use the Change Type command, but I got this error.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/error-change-type.png"> &lt;img src="../images/error-change-type.png" alt="Error Changing a Work Item Type" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Error Changing a Work Item Type&lt;/em>&lt;/p>
&lt;blockquote>
&lt;p>Work item type(s) cannot be moved because it is disabled, hidden or not supported.&lt;/p></description></item><item><title>Pills: Connect Azdo to external software</title><link>https://www.codewrecks.com/post/azdo/pills/connect-azdo-to-external-software/</link><pubDate>Mon, 21 Oct 2024 06:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/connect-azdo-to-external-software/</guid><description>&lt;p>In our team, everything regarding developing is kept in Azure DevOps, but other informations are stored inside a custom software, so we &lt;strong>often have the need to jump between a system and the other one&lt;/strong>. The actual connection is, one element in our software is bound to one or more Work Items in Azure DevOps.&lt;/p>
&lt;blockquote>
&lt;p>Desired result is: Ability to easily create a connection between the two, reduce the need to jump between the two system to see key information.&lt;/p></description></item><item><title>Azure DevOps: Cleanup Docker images for your Pull Requests</title><link>https://www.codewrecks.com/post/azdo/pipeline/clean-docker-images-for-your-pull-requests/</link><pubDate>Tue, 09 Jul 2024 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/clean-docker-images-for-your-pull-requests/</guid><description>&lt;p>This article is a prosecution of &lt;a href="https://www.codewrecks.com/post/azdo/pipeline/build-and-create-docker-for-your-pr/">the previous one on creating Docker Images for your Pull Requests&lt;/a> and deals with cleanup of your Docker Registry.&lt;/p>
&lt;h2 id="authentication-to-azure">Authentication to Azure&lt;/h2>
&lt;p>In Azure DevOps you can use connected services to connect to Azure Accounts or external services, but since I&amp;rsquo;m using mainly PowerShell scripts inside my repository, &lt;strong>I often prefer using a Service Principal&lt;/strong>. This is a good practice because you can limit the access of the service principal to only the resources it needs to access, and you can revoke the access at any time.&lt;/p></description></item><item><title>Azure DevOps: Create Docker images for a Pull Request</title><link>https://www.codewrecks.com/post/azdo/pipeline/build-and-create-docker-for-your-pr/</link><pubDate>Sun, 07 Jul 2024 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/build-and-create-docker-for-your-pr/</guid><description>&lt;p>The whole Pull Request process mechanism has a single purpose, &lt;strong>have a better quality of the code that reach develop or generally speaking main branch&lt;/strong>. The ability to share the code and being able to get feedback from other members of the team is invaluable, but it is enough?&lt;/p>
&lt;p>The basic concept is: develop is a branch that should be &lt;strong>considered production&lt;/strong> and it is not uncommon for teams to deploy develop branch automatically in internal production servers, a procedure called &lt;strong>dogfooding&lt;/strong>. Here in Nebula Team we deploy automatically develop branch in our internal production servers, and sometimes you intercept bug before they hit master and production of all customer.&lt;/p></description></item><item><title>Azure DevOps: Package source mapping in pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/package-sources-mapping-and-pipeline/</link><pubDate>Tue, 21 May 2024 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/package-sources-mapping-and-pipeline/</guid><description>&lt;p>If you use more than one Nuget Feed in your solution and especially if you are using central package versioning, you probably got a warning telling you to use &lt;strong>Package Source Mapping&lt;/strong>. The process is straightforward, it consist in modifying your nuget.config file &lt;strong>to specify for each package the source feed where nuget can find the package&lt;/strong>.&lt;/p>
&lt;p>Here is an example for a solution I&amp;rsquo;m working:&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>&amp;lt;&lt;span style="color:#66d9ef">?&lt;/span>xml version=&lt;span style="color:#e6db74">&amp;#34;1.0&amp;#34;&lt;/span> encoding=&lt;span style="color:#e6db74">&amp;#34;utf-8&amp;#34;&lt;/span>?&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;configuration&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;packageRestore&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;enabled&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;True&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;automatic&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;True&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/packageRestore&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;activePackageSource&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;nuget.org&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;https://api.nuget.org/v3/index.json&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;ProximoAzDo&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;https://pkgs.dev.azure.com/xxx/_packaging/yyy@Local/nuget/v3/index.json&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/activePackageSource&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;packageSources&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;nuget.org&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;https://api.nuget.org/v3/index.json&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;add key=&lt;span style="color:#e6db74">&amp;#34;ProximoAzDo&amp;#34;&lt;/span> value=&lt;span style="color:#e6db74">&amp;#34;https://pkgs.dev.azure.com/xxx/_packaging/yyy@Local/nuget/v3/index.json&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/packageSources&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;packageSourceMapping&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;packageSource key=&lt;span style="color:#e6db74">&amp;#34;nuget.org&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;package pattern=&lt;span style="color:#e6db74">&amp;#34;*&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/packageSource&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;packageSource key=&lt;span style="color:#e6db74">&amp;#34;ProximoAzDo&amp;#34;&lt;/span>&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;package pattern=&lt;span style="color:#e6db74">&amp;#34;Jarvis*&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;package pattern=&lt;span style="color:#e6db74">&amp;#34;Proximo*&amp;#34;&lt;/span> /&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/packageSource&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &amp;lt;/packageSourceMapping&amp;gt;
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&amp;lt;/configuration&amp;gt;&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>As you can see I have &lt;strong>two different feed, one is nuget.org and the other is a private feed hosted in Azure DevOps&lt;/strong>. In the ProximoAzdo I can simply specify with wildcard the name of the packages that are to be taken from that specific feed, while the nuget.org has the generic * and is used for anyhing else.&lt;/p></description></item><item><title>Pill: Create an environment in an AzDo pipeline</title><link>https://www.codewrecks.com/post/azdo/pills/create-environment-on-pipeline/</link><pubDate>Tue, 19 Mar 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/create-environment-on-pipeline/</guid><description>&lt;p>Scenario: We have to create a new environment for a new customer, and an environment consists of some resources on Azure, plus &lt;strong>an environment in azure DevOps to use with deploy pipeline&lt;/strong>. Since we are deploying with Azure DevOps pipeline, it makes sense to create everything for new customer environment with another pipeline.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
&lt;/span>&lt;/span>&lt;span style="background-color:#3c3d38">&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
&lt;/span>&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;display:grid;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">stages&lt;/span>: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">stage&lt;/span>: &lt;span style="color:#ae81ff">create_environment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">jobs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">job&lt;/span>: &lt;span style="color:#ae81ff">create_environment&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">displayName&lt;/span>: &lt;span style="color:#e6db74">&amp;#34;Create environment if not present&amp;#34;&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pool&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">vmImage&lt;/span>: &lt;span style="color:#ae81ff">windows-latest&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">steps&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">powershell&lt;/span>: |&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> write-Host &amp;#34;We are about to create the environment with api if not present&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # Need to create the token in basic auth
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> $AuthHeaders = @{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> &amp;#34;Authorization&amp;#34; = &amp;#39;Basic &amp;#39; + [Convert]::ToBase64String([Text.Encoding]::ASCII.GetBytes(&amp;#34;:$(AccessToken)&amp;#34;)) 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> &amp;#34;Content-Type&amp;#34; = &amp;#34;application/json&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> }
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> $listEnvironment = Invoke-RestMethod -uri &amp;#34;https://dev.azure.com/org/teamproject/_apis/distributedtask/environments?api-version=7.1-preview.1&amp;#34; -Headers $AuthHeaders
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> # Now check if some of the environment already was present in the list.
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> $envExisting = $listEnvironment.value | Where-Object { $_.name -eq &amp;#34;$(customer_fullname)&amp;#34; }
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> if ($envExisting) {
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> Write-Host &amp;#34;The environment already exists&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> exit 0
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> } 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> 
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex; background-color:#3c3d38">&lt;span>&lt;span style="color:#e6db74"> # Create an environment because it does not exists
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> $createEnvPayload = @{
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> name = &amp;#34;$(customer_fullname)&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> description = &amp;#34;Created by pipeline&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> } | ConvertTo-Json
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> $createUri = &amp;#34;https://dev.azure.com/org/teamproject/_apis/distributedtask/environments?api-version=7.1-preview.1&amp;#34;;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Invoke-RestMethod -uri $createUri -method POST -Headers $AuthHeaders -Body $createEnvPayload&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>As you can see the stage contains a job that is used to create an environment. This is based on a secret contained in the pipeline called &lt;code>AccessToken&lt;/code> that is &lt;strong>used to authenticate to Azure DevOps REST API&lt;/strong>. The script is quite simple, it first retrieves the list of environments and then checks if the environment is already present. If it is not present, it creates a new environment with a simple POST request to the REST API of Azure DevOps.&lt;/p></description></item><item><title>Pills: Enhancing Azure DevOps WorkItems with Hyperlinking to External Documentation</title><link>https://www.codewrecks.com/post/azdo/pills/use-hyperlink-link-type/</link><pubDate>Tue, 12 Mar 2024 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/use-hyperlink-link-type/</guid><description>&lt;p>A frequently overlooked feature that can significantly enhance functionality in Azure DevOps is the &lt;strong>ability to attach links to a WorkItem&lt;/strong>. A common question among users is: &amp;ldquo;Can I manage documentation in tools like SharePoint and then easily link it to my project in Azure DevOps?&amp;rdquo; This query arises because there&amp;rsquo;s often a limitation on how much text can be written directly into a WorkItem, and it&amp;rsquo;s convenient to attach documentation.&lt;/p></description></item><item><title>Pills: What to do when dotnet restore failed with 401 against an internal feed</title><link>https://www.codewrecks.com/post/azdo/pills/problem-using-internal-nuget-feed-by-powershell/</link><pubDate>Fri, 23 Feb 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/problem-using-internal-nuget-feed-by-powershell/</guid><description>&lt;p>This is an argument I&amp;rsquo;ve already discussed in the past in &lt;a href="https://www.codewrecks.com/post/azdo/pipeline/nuget-feed-authenticate/">A post about nuget authentication&lt;/a>. From a couple of days, in a project I&amp;rsquo;m working into the service started to return 401 even with the technique described in the aforementioned post.&lt;/p>
&lt;p>The sympthom is this error in the script that executed &lt;code>dotnet restore&lt;/code> command.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-plaintext" data-lang="plaintext">&lt;span style="display:flex;">&lt;span> Unable to load the service index for source https://pkgs.dev.azure.com/organizaion/_packaging/FeedName@Local/nuget/v3/index.json.
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> Response status code does not indicate success: 401
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>In such a situation here is what you need to do to try to solve the problem.&lt;/p></description></item><item><title>Azure Devops Api - Update list of allowed values for Custom Fields</title><link>https://www.codewrecks.com/post/azdo/api/manage-custom-field-with-api/</link><pubDate>Thu, 22 Feb 2024 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/manage-custom-field-with-api/</guid><description>&lt;p>The ability to &lt;strong>customize process of Azure DevOps&lt;/strong> is one of the most powerful feature of the platform. Usually you &lt;strong>add custom fields to work items&lt;/strong> to allow tracking information related to your own process and for your organization. One of the most common question I got usually is:&lt;/p>
&lt;blockquote>
&lt;p>How can I create a field that allows for a series of values that is taken from a database of mine?&lt;/p></description></item><item><title>Pills: Exploring Agent Options in Azure DevOps Pipelines: Managed vs. Self-Hosted</title><link>https://www.codewrecks.com/post/azdo/pills/do-i-need-to-deploy-my-agents/</link><pubDate>Thu, 01 Feb 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/do-i-need-to-deploy-my-agents/</guid><description>&lt;p>When configuring Azure DevOps pipelines, developers have a choice to make regarding the execution environment for their pipelines: they can either leverage &lt;strong>Microsoft-managed agents provided in Azure or opt to self-host agents on their own infrastructure&lt;/strong>, whether that be on-premises virtual machines or cloud-based instances. One of the first question that arise is: which I need to use for my organization? Let&amp;rsquo;s explore the pro and cons of each option.&lt;/p></description></item><item><title>Pills: Do not miss repository policies in Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/pills/repository-policies-for-branches/</link><pubDate>Fri, 19 Jan 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/repository-policies-for-branches/</guid><description>&lt;p>If you use Azure DevOps, it&amp;rsquo;s worth &lt;strong>checking in repository settings page all the settings related to the policies of the repository itself&lt;/strong>. This is because often this type of setting is completely ignored, and you lose the opportunity to have very important controls on the repository itself.&lt;/p>
&lt;p>As you can see in Figure 1, there are many interesting policies that can help your team to keep a nice and healty repository.&lt;/p></description></item><item><title>Pill: Include files in your publish profile for C# projects</title><link>https://www.codewrecks.com/post/azdo/pills/msbuild-copy-file/</link><pubDate>Tue, 16 Jan 2024 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/msbuild-copy-file/</guid><description>&lt;p>When publishing an ASP.NET core web project, it&amp;rsquo;s often necessary to include certain files &lt;strong>external to the Visual Studio solution but that are logical part of the project&lt;/strong>. A typical example is frontend build from angular projects. For web projects, it&amp;rsquo;s also common to include some static resources that might be outside of the web project, like images or files.&lt;/p>
&lt;p>At this point, we want the Azure DevOps pipeline to &lt;strong>correctly include all these external files in the final artifacts.&lt;/strong>&lt;/p></description></item><item><title>Pill: Enhancing DevOps with Automated Pull Requests</title><link>https://www.codewrecks.com/post/azdo/pills/automatic-pull-request-close/</link><pubDate>Fri, 12 Jan 2024 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/automatic-pull-request-close/</guid><description>&lt;p>Pull requests are a cornerstone of collaborative software development, particularly with distributed version control systems like Git and platforms such as GitHub or Azure DevOps. However, managing pull requests can become cumbersome, particularly for &lt;strong>branches undergoing extensive modifications and receiving frequent feedback.&lt;/strong> This complexity is evident when preparing a pull request only to find it needs additional changes due to peer review, necessitating a complete retest of the code.&lt;/p>
&lt;p>Such workflows highlight the challenges in finalizing a branch. Developers often find themselves continuously switching to the branch in question to &lt;strong>change the code based on other members feedback&lt;/strong>, re test everything, signal to other members that the PR is updated then move to another branch and repeat. This is where a &lt;strong>comprehensive suite of automated tests, including end-to-end tests, becomes invaluable.&lt;/strong> These tests should cover the entire spectrum of the development process: building the solution, packaging artifacts, deploying to a test server, and conducting basic functionality checks.&lt;/p></description></item><item><title>Resolving .NET8 SDK Resolver Failure in Azure DevOps Pipelines</title><link>https://www.codewrecks.com/post/azdo/pills/strange-error-building-net8/</link><pubDate>Fri, 05 Jan 2024 07:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/strange-error-building-net8/</guid><description>&lt;p>I encountered a problem with a simple pipeline designed for building a .NET Core project, which I had recently updated to .NET8. After updating the pipeline file to use the new version of the SDK, I faced an unexpected issue: &lt;strong>all builds started failing with this error&lt;/strong>.&lt;/p>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>##[error]src\Intranet\Jarvis.Common.Shared\Jarvis.Common.Shared.csproj(0,0): Error MSB4242: SDK Resolver Failure: &amp;#34;The SDK resolver &amp;#39;Microsoft.DotNet.MSBuildSdkResolver&amp;#39; failed while attempting to resolve the SDK &amp;#39;Microsoft.NET.Sdk&amp;#39;. Exception: &amp;#39;Microsoft.NET.Sdk.WorkloadManifestReader.WorkloadManifestCompositionException: Manifest provider Microsoft.NET.Sdk.WorkloadManifestReader.SdkDirectoryWorkloadManifestProvider returned a duplicate manifest ID &amp;#39;16.4.8968-net8-rc2&amp;#39;.
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;p>I was really puzzled because I had the same SDK directory on my computer, and it was workgin without any issues, &lt;strong>but failing on that build server&lt;/strong>.&lt;/p></description></item><item><title>Streamlining Cloud Deployment: Azure DevOps and AWS Integration Strategies</title><link>https://www.codewrecks.com/post/azdo/pipeline/deploy-in-s3-in-aws/</link><pubDate>Thu, 14 Dec 2023 08:50:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/deploy-in-s3-in-aws/</guid><description>&lt;p>Let&amp;rsquo;s assume we need to deploy in a cloud environment and prefer &lt;strong>not to install an agent on each physical environment&lt;/strong>. For example, managing numerous agents across multiple virtual machines becomes cumbersome from an Azure DevOps standpoint. While we can surely create an environment for each distinct installation, usually this create some burden administrating the agents.&lt;/p>
&lt;p>In such a scenario, the optimal approach is to &lt;strong>create simple PowerShell or Bash installation scripts that will be distributed along pipeline artifacts&lt;/strong>. These scripts simply will deploy artifacts in local machine without need of an agent. The only challenge that remains is how to transfer the pipeline artifacts and scripts to the target machines.&lt;/p></description></item><item><title>Running GitVersion in Azure DevOps pipeline with dontet tool</title><link>https://www.codewrecks.com/post/azdo/pipeline/gitversion-powershell/</link><pubDate>Mon, 11 Dec 2023 10:00:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/gitversion-powershell/</guid><description>&lt;p>For me, running GitVersion as part of a Pipeline is a golden standard. I barely &lt;strong>remember a pipeline that does not use GitVersion&lt;/strong> as first task. The reason is simple, it allows me, at least, to give a better naming to build names. Instead of having meaningless date base number I have a semantic build &lt;strong>that immediately gives me the idea of what was built&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>At least GitVersion can give a better name to a build, so why not using it?&lt;/p></description></item><item><title>Azure DevOps: Checkout specific branch to avoid gitversion errors in pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/checkout-code-in-build-pipeline/</link><pubDate>Thu, 16 Nov 2023 00:00:00 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/checkout-code-in-build-pipeline/</guid><description>&lt;p>If you create a new Azure DevOps Pipeline and include running GitVersion, sometimes you may encounter an error like the following:&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>INFO [11/15/23 19:00:57:95] Begin: Calculating base versions 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFO [11/15/23 19:00:57:96] Begin: Attempting to inherit branch configuration from parent branch 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFO [11/15/23 19:00:57:97] End: Attempting to inherit branch configuration from parent branch (Took: 3.55ms) 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>INFO [11/15/23 19:00:57:97] End: Calculating base versions (Took: 12.03ms) 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>ERROR [11/15/23 19:00:57:99] An unexpected error occurred: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>System.NullReferenceException: Object reference not set to an instance of an object. 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.Handles.ObjectHandle.op_Implicit(ObjectHandle handle) in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/_/LibGit2Sharp/Core/Handles/Objects.cs:line 509 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.Proxy.git_commit_author(ObjectHandle obj) in /_/LibGit2Sharp/Core/Proxy.cs:line 289 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.LazyGroup`1.Dependent`2.LibGit2Sharp.Core.LazyGroup&amp;lt;T&amp;gt;.IEvaluator&amp;lt;TInput&amp;gt;.Evaluate(TInput 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>input) in /_/LibGit2Sharp/Core/LazyGroup.cs:line 88 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.LazyGroup`1.&amp;lt;Evaluate&amp;gt;b__6_0(T input) in /_/LibGit2Sharp/Core/LazyGroup.cs:line 36 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.GitObjectLazyGroup.EvaluateInternal(Action`1 evaluator) in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>/_/LibGit2Sharp/Core/GitObjectLazyGroup.cs:line 20 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.LazyGroup`1.Evaluate() in /_/LibGit2Sharp/Core/LazyGroup.cs:line 34 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.LazyGroup`1.Dependent`2.Evaluate() in /_/LibGit2Sharp/Core/LazyGroup.cs:line 80 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Core.LazyGroup`1.Dependent`2.get_Value() in /_/LibGit2Sharp/Core/LazyGroup.cs:line 73 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at LibGit2Sharp.Commit.get_Committer() in /_/LibGit2Sharp/Commit.cs:line 87 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at GitVersion.Commit..ctor(Commit innerCommit) in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>D:\a\GitVersion\GitVersion\src\GitVersion.LibGit2Sharp\Git\Commit.cs:line 17 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at GitVersion.Commit.&amp;lt;&amp;gt;c.&amp;lt;.ctor&amp;gt;b__3_0(Commit parent) in 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>D:\a\GitVersion\GitVersion\src\GitVersion.LibGit2Sharp\Git\Commit.cs:line 16 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at System.Linq.Enumerable.SelectEnumerableIterator`2.MoveNext() 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>at System.Linq.Enumerable.Count[TSource](IEnumerable`1 source) &lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>When executing get version within a local directory, the operation typically proceeds without issues. However, complications can arise during the Azure DevOps pipeline process.&lt;/p></description></item><item><title>Azure DevOps: Script Caching in Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/pipeline/release-on-linux-cached-script/</link><pubDate>Mon, 30 Oct 2023 08:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/release-on-linux-cached-script/</guid><description>&lt;p>I&amp;rsquo;m authoring a release pipeline in Azure DevOps on an AWS ARM linux machine, I&amp;rsquo;ve installed the agent and created the script. The pipeline uses artifacts produced by &lt;strong>another build pipeline and depends on a git repository that contains script&lt;/strong>. Here is how resources are declared in the pipeline.&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">resources&lt;/span>: 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">pipelines&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">pipeline&lt;/span>: &lt;span style="color:#ae81ff">UniqueHost&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">source&lt;/span>: &lt;span style="color:#ae81ff">Publish-UniqueHost&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">branch&lt;/span>: &lt;span style="color:#ae81ff">master&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">repositories&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">repository&lt;/span>: &lt;span style="color:#ae81ff">JarvisSetupScripts&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">type&lt;/span>: &lt;span style="color:#ae81ff">git&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">ref&lt;/span>: &lt;span style="color:#ae81ff">feature/AWS&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">name&lt;/span>: &lt;span style="color:#ae81ff">JarvisSetupScripts&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>Usually the question is: &lt;strong>why you store scripts in another repository?&lt;/strong>. The classic approach is writing release scripts inside the very same repository as source files, then include release script inside the build so &lt;strong>release pipeline depends only on one or more pipeline&lt;/strong>. Personally having the script in a different repositories easy script authoring, because you can simply modify the script, push, and then immediately re-trigger the pipeline to verify that everything is working as expected.&lt;/p></description></item><item><title>Pills: Install release agent in ARM machines</title><link>https://www.codewrecks.com/post/azdo/pills/installing-release-agent-in-arm-machine/</link><pubDate>Fri, 27 Oct 2023 09:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/installing-release-agent-in-arm-machine/</guid><description>&lt;p>With Azure Devops Environments you can register Virtual Machines with a dedicated agent that is capable of releasing your software. The procedure is simple, &lt;strong>just create an environment, and a VM resource, and you are greeted with a minimal UI that let you choose configuration&lt;/strong>.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/configure-agent.png"> &lt;img src="../images/configure-agent.png" alt="Configuring an agent for Azure DevOps environment" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Configuring an agent for Azure DevOps environment&lt;/em>&lt;/p>
&lt;p>As you can see it just require you to select the operating system then you can &lt;strong>copy in clipboard a simple script that you can execute in all machines you want to add in an environment&lt;/strong>. You need to have sudo rights to execute the script but running on ARM machine I got this.&lt;/p></description></item><item><title>Azure DevOps: delete all unstable version of packages in feeds</title><link>https://www.codewrecks.com/post/azdo/misc/clean-artifacts-feed/</link><pubDate>Fri, 08 Sep 2023 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/misc/clean-artifacts-feed/</guid><description>&lt;p>Azure DevOps has a dedicated section for artifacts that allows you to store NuGet, NPM feeds, and more. Thanks to its integration with pipelines, very often, automatic pipelines are generated that &lt;strong>publish packages with every commit in the repository&lt;/strong>. This way, we have the opportunity to have all versions for all dev branches.&lt;/p>
&lt;p>This approach is needed because the usual flow when you develop a new feature in a package is the following:&lt;/p></description></item><item><title>Modifying Azure DevOps Pipeline Decorators with Bing Chatbot Assistance</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators-on-different-os/</link><pubDate>Tue, 29 Aug 2023 16:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators-on-different-os/</guid><description>&lt;p>In the past, I&amp;rsquo;ve discussed using pipeline decorators to clean up build folders. Recently, I faced a challenge where &lt;strong>I needed to modify my decorator to run only if there was a &lt;code>.git&lt;/code> folder&lt;/strong>. To save time, I used Bing Chatbot, which leverages GPT powerful LLM and can search the internet to find latest contents, making this kind of problem-solving a breeze.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/bing-question.png"> &lt;img src="../images/bing-question.png" alt="sample prompt asking to modify a piece of an Azure Devops pipeline" />&lt;/a>&lt;/p></description></item><item><title>Azure Pipelines starts failing indexing symbols</title><link>https://www.codewrecks.com/post/azdo/pipeline/index-symbols-suddently-failing/</link><pubDate>Mon, 31 Jul 2023 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/index-symbols-suddently-failing/</guid><description>&lt;p>A build in Azure Devops recently started to fail during the index symbol task. The error wasn&amp;rsquo;t immediately clear. The error messages are really not informative, One such message was, &amp;ldquo;Request ed7b95f6b6f439e769a3e85422b7172be872403388fae1974fb4233dfd13da66 is sealed. Only expirationDate may be modified.&amp;rdquo;&lt;/p>
&lt;p>Honestly, this error didn&amp;rsquo;t tell me much. &lt;strong>My general advice when facing such perplexing errors is to examine the entire log. Given the vast size of the log&lt;/strong>, it&amp;rsquo;s wise to start with the most common areas where useful information can be found. In the case of most .NET-related tools, I began by inspecting what appeared to be a stack trace. A stack trace in the log often indicates something has gone wrong.&lt;/p></description></item><item><title>Pills: Azure Devops auto agents update</title><link>https://www.codewrecks.com/post/azdo/pills/auto-update-agents/</link><pubDate>Tue, 18 Jul 2023 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/auto-update-agents/</guid><description>&lt;p>The ability to update Azure DevOps pipelines is a compelling feature, especially if you manage numerous on-premise agents. This feature eliminates maintenance issues by &lt;strong>allowing all agents to be upgraded with just a single click&lt;/strong>.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/image1.png"> &lt;img src="../images/image1.png" alt="One click update button" />&lt;/a>
&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>One click update button&lt;/em>&lt;/p>
&lt;p>I have an agent that runs only when needed, and it&amp;rsquo;s slightly outdated. By simply clicking a button, I can prompt the server to update all the agents, and I&amp;rsquo;m sure that &lt;strong>after seconds I&amp;rsquo;m running latest agent version&lt;/strong>.&lt;/p></description></item><item><title>Pills: npm private feeds and authentication</title><link>https://www.codewrecks.com/post/azdo/pills/vsts-npm-auth-problems/</link><pubDate>Wed, 17 May 2023 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/vsts-npm-auth-problems/</guid><description>&lt;p>Have you ever encountered an issue obtaining an authentication token for your Azure DevOps npm package feed? Sometimes I got this&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-text" data-lang="text">&lt;span style="display:flex;">&lt;span>vsts-npm-auth v0.42.1.0
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>-----------------------
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Couldn&amp;#39;t get an authentication token for https://pkgs.dev.azure.com/prxm/_packaging/JarvisNpmGood/npm/registry/.&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>Private package feeds in Azure DevOps are incredibly useful, not just for Nuget packages, but for NPM as well. However &lt;strong>you must follow the given instructions on the site to connect to your feed, and there will be times when you have to renew credentials.&lt;/strong> The problem is that npm feed in Azure Devops are usually private and under authentication/authorization. For this reason you need to install a special package to allow authentication. &lt;a href="https://www.npmjs.com/package/vsts-npm-auth">You can download tool here&lt;/a>.&lt;/p></description></item><item><title>Pills: Maximizing the Power of Tags in Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/pills/azdo-tags/</link><pubDate>Mon, 08 May 2023 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/azdo-tags/</guid><description>&lt;p>In Azure DevOps, &lt;strong>using tags allows you to easily classify work items&lt;/strong>. Rather than using additional process fields, tags offer a high level of classification ease because any team member can add a label to a work item.&lt;/p>
&lt;p>In effect, the result &lt;strong>is the ability to create a horizontal taxonomy that&amp;rsquo;s common to all work items and likely common to all team projects&lt;/strong>, enabling efficient filtering and categorization of Work Items.&lt;/p></description></item><item><title>Simplifying Library Debugging with Azure DevOps Symbol Server</title><link>https://www.codewrecks.com/post/azdo/pipeline/streamline-library-debugging/</link><pubDate>Tue, 21 Mar 2023 08:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/streamline-library-debugging/</guid><description>&lt;p>When developing a code library, it is good practice to &lt;strong>publish it on a package manager like NuGet&lt;/strong>. A common objection to this approach is that using a library published as a package can make it difficult to debug the original code. However, this is not a significant issue as it &lt;strong>encourages you to write unit tests within the same project in which you develop your library&lt;/strong>, ensuring that the library is well-tested and free of regressions. Nevertheless, there are times when it is convenient to debug the source code of the library while using in a real project. This is true especially for complex libraries where it is difficult to create unit tests that covers all options.&lt;/p></description></item><item><title>More secure Azure DevOps Pipelines API connection thanks to OAuth Tokens</title><link>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-use-oauth2-tokens/</link><pubDate>Sun, 19 Mar 2023 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-use-oauth2-tokens/</guid><description>&lt;p>In a previous blog post, I discussed how to reschedule the check of a pull request using a simple PowerShell script within an Azure DevOps pipeline. This time, &lt;strong>I&amp;rsquo;ll explain how to avoid using Personal Access Tokens for authentication&lt;/strong> and switch to a more secure alternative.&lt;/p>
&lt;p>The issue with Personal Access Tokens is that they are bearer token, which means &lt;strong>if they&amp;rsquo;re lost or accidentally leaked in logs, anyone with access to the token can use it to access your services&lt;/strong>. To address this problem, it&amp;rsquo;s better to use a specific Personal Access Token with the minimum required scopes. For instance, if you only need to reschedule Pull Requests checks, grant the token only pull request and build access. This limits the potential damage if the token falls into the wrong hands.&lt;/p></description></item><item><title>Azure Devops Api - Automatically Re-Queue Pull Request Checks</title><link>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-with-pipeline/</link><pubDate>Tue, 07 Mar 2023 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-with-pipeline/</guid><description>&lt;p>In previous post on this subject &lt;a href="https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-with-api/">Reschedule PR Check with API&lt;/a> I&amp;rsquo;ve demonstrated &lt;strong>a simple PowerShell api script that can automatically re-queue all checks for Opened pull Requests where the check is expired&lt;/strong>. The problem is: you need to schedule this script to run.&lt;/p>
&lt;p>Actually the easiest way to schedule running a script that uses API is &lt;strong>using a standard pipeline. Give the ability to run whenever the target branch changes it is the best choice.&lt;/strong> Since develop is my usual target branch for Pull request I left a CI trigger for changes in develop branch as well as some scheduled run (to include other non usual target branches).&lt;/p></description></item><item><title>Azure Devops Api - Re-Queue Pull Request Checks</title><link>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-with-api/</link><pubDate>Tue, 21 Feb 2023 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/reschedule-pr-check-with-api/</guid><description>&lt;p>Pull Requests checks are a perfect gate to keep your code quality High. The easiest way to &lt;strong>perform a check is to do something inside a standard pipeline and then use that pipeline in branch policies&lt;/strong>. This will allow you to prevent people to push on the main develop branch (main/master/develop) and be forced to do a pull request against that branch and wait for the checks to complete.&lt;/p>
&lt;blockquote>
&lt;p>Remember that checks on a Pull Request actually runs on the result of the merge between source and target branch.&lt;/p></description></item><item><title>Azure DevOps: pipeline permission to use an agent pool</title><link>https://www.codewrecks.com/post/azdo/pipeline/pipeline-permissions-agent-pool/</link><pubDate>Wed, 25 Jan 2023 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/pipeline-permissions-agent-pool/</guid><description>&lt;p>Scenario: We created a &lt;strong>new Agent Pool&lt;/strong> in Azure DevOps called &amp;ldquo;linux&amp;rdquo; and we added some &lt;strong>docker based agents&lt;/strong>, and finally we add this new pool into the available pool for a couple of builds. To verify that agents can indeed run the builds we scheduled run onto this new pool &lt;strong>but pipeline execution failed&lt;/strong>. The error is depicted in &lt;strong>Figure 1&lt;/strong>&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/build-failed-not-allowed-to-run-on-agent.png"> &lt;img src="../images/build-failed-not-allowed-to-run-on-agent.png" alt="Failed build details after changing pool to linux" />&lt;/a>&lt;/p></description></item><item><title>Pills: Conditional Pipeline decorators</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators-conditional/</link><pubDate>Tue, 17 Jan 2023 00:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators-conditional/</guid><description>&lt;p>&lt;a href="https://www.codewrecks.com/post/azdo/pills/pipeline-decorators/">Pipeline decorators&lt;/a> are a really peculiar feature of Azure DevOps, because they allow you to &lt;strong>specify a series of tasks that are run for EVERY pipeline in your organization&lt;/strong>, so they are rarely needed, but nevertheless they are a nice tool to know because there are situation when they are useful. Moreover, in latest &lt;a href="https://docs.microsoft.com/en-us/azure/devops/release-notes/2021/sprint-194-update">Sprint 194 update&lt;/a> they are expanded to support new functionalities, like running &lt;strong>before or after specific tasks&lt;/strong>.&lt;/p></description></item><item><title>Pills: Backup your Azure DevOps server</title><link>https://www.codewrecks.com/post/azdo/pills/backup-your-azure-devops-server/</link><pubDate>Sat, 31 Dec 2022 07:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/backup-your-azure-devops-server/</guid><description>&lt;p>Some days ago I got a call from a friend at customer site that experiences some problems with Azure DevOps server. The symptoms are strange &lt;strong>server starts to become unresponsive, it is not possible even to login with Remote Desktop, it seems that there is some memory problem&lt;/strong>.&lt;/p>
&lt;p>Being unable to diagnose by telephone the problem I suggest them to disable search services, sometimes it can happen that elastic search services consumes too much ram, &lt;strong>since I did not have any other data, I suggests rebooting the machine forcibly from virtualization system and immediately connect with remote destop and disable elastic search service&lt;/strong> then try to better diagnose the problem.&lt;/p></description></item><item><title>Azure DevOps: check typescript linting for a Pull Request</title><link>https://www.codewrecks.com/post/azdo/pipeline/pipeline-check-lint/</link><pubDate>Fri, 30 Dec 2022 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/pipeline-check-lint/</guid><description>&lt;p>Pull Requests is the moment when new code undergo formal review to verify that &lt;strong>it mets the basic quality requirement decided by the team&lt;/strong>. Most of the work can be done automatically, thanks to Azure DevcOps pipeline and various tools.&lt;/p>
&lt;p>Some of the checks can be fully automated by special &lt;strong>addin, like integration with SonarCloud&lt;/strong> so you basically does not need to do anything and you have some nice checks done to new code during PR. Sometimes you want to run custom code or checks, and it is really simple to do with few powershell lines and pipelines.&lt;/p></description></item><item><title>Pills: Azure Devops pipeline Counters</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-counters/</link><pubDate>Wed, 21 Dec 2022 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-counters/</guid><description>&lt;p>Sometimes you need to have a unique number in your pipeline, usually this is needed to &lt;strong>generate a unique version number as an example for publishing NuGet packages and avoid conflict&lt;/strong>. If you use Git (and there is no need to not use it) you can use &lt;a href="https://gitversion.net/docs/">GitVersion&lt;/a> to generate &lt;strong>a unique semver version number that is unique for each build&lt;/strong>. But if you are not using Git and GitVersion, or if you need to rebuild the same commit and have a &lt;strong>unique version for each run, regardless of the commit&lt;/strong> you can use a Counter.&lt;/p></description></item><item><title>Pills: Azure Devops pipeline demands</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-demands/</link><pubDate>Mon, 19 Dec 2022 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-demands/</guid><description>&lt;p>Situation: You are waiting a pipeline to run, you view at the agent pool queue and notice that some of the agents are in idle, &lt;strong>they are not running any pipeline, yet you have run that are waiting in queue&lt;/strong>.&lt;/p>
&lt;p>You can have basically two reasons: the first one is you reached maximum number of parallel pipeline that can run on the pool, the second one is that &lt;strong>the pipeline has some demands that are not satisfied by idle agents&lt;/strong>. Troubleshooting demands can be annoying, but basically it is just matter of verifying the tasks that are present in the pipeline and check if all agents have required demands.&lt;/p></description></item><item><title>Azure DevOps Server: restart upgrade wizard</title><link>https://www.codewrecks.com/post/azdo/misc/restart-upgrade-wizard-azure-devops-server/</link><pubDate>Fri, 16 Dec 2022 06:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/misc/restart-upgrade-wizard-azure-devops-server/</guid><description>&lt;p>There are lots of reason why you have an &lt;strong>on-premise installation of Azure DevOps&lt;/strong>, and if you manage it, you must devote some time to keep it upgraded to the latest version.&lt;/p>
&lt;blockquote>
&lt;p>Keep your Azure DevOps server instance up to date constantly to avoid too big updates.&lt;/p>&lt;/blockquote>
&lt;p>Upgrade procedures are really simple, you just &lt;strong>launch the setup.exe from the latest version and follow the wizard&lt;/strong>. Actually not every person knows that the upgrade is basically a set of steps.&lt;/p></description></item><item><title>Azure Devops Api - Export Work Items</title><link>https://www.codewrecks.com/post/azdo/api/api-step-2-work-item-dump/</link><pubDate>Sat, 26 Nov 2022 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/api-step-2-work-item-dump/</guid><description>&lt;p>One of the most common scenario where Azure DevOps API shine is &lt;strong>exporting data into some other db/file&lt;/strong>. There can be lots of legitimate reason why you want to export data: Custom Reporting, Custom Analysis, put everything into a file/database to &lt;strong>perform offline query on your data outside Azure DevOps interface&lt;/strong>.&lt;/p>
&lt;p>In previous parts we already saw how to &lt;a href="https://www.codewrecks.com/post/azdo/api/api-step-1-connection/">connect to the server&lt;/a> and how to &lt;a href="https://www.codewrecks.com/post/azdo/api/api-step-1a-connection-check/">check if credentials are ok&lt;/a>; if we want to interact with the various part of the server you need to get an instance of &lt;strong>appropriate client class&lt;/strong>. In sample code, once connection is estabilished, &lt;strong>ConnectionManager class&lt;/strong> is used to obtain an instance of WorkItemTrackingHttpClient class, using &lt;a href="https://learn.microsoft.com/en-us/previous-versions/visualstudio/visual-studio-2013/dn228356%28v=vs.120%29">&lt;strong>GetClient&lt;T>()&lt;/strong> method of VssConnection&lt;/a>.&lt;/p></description></item><item><title>Azure Devops Api - Detect if credentials are ok</title><link>https://www.codewrecks.com/post/azdo/api/api-step-1a-connection-check/</link><pubDate>Sat, 19 Nov 2022 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/api-step-1a-connection-check/</guid><description>&lt;p>In previous article of the series I&amp;rsquo;ve &lt;a href="https://www.codewrecks.com/post/azdo/api/api-step-1-connection/">played with Azure DevOps api connection&lt;/a> showing how you can use a &lt;strong>.NET 4.8 full framework application that can login to Azure DevOps with a token or with an interactive login&lt;/strong>.&lt;/p>
&lt;p>When you use interactive login, usually Windows operating system will &lt;strong>retain credentials in credentials store&lt;/strong>, this will avoid asking for credential every time the application is run. The code that perform the check is really simple, it just check if _vssConnection.AuthorizedIdentity.DisplayName is not &amp;ldquo;anynymous&amp;rdquo;. This happens because &lt;strong>the real credential check is done usually when you perform some real query, and not only the connection&lt;/strong>.&lt;/p></description></item><item><title>Azure Devops Api - Connection</title><link>https://www.codewrecks.com/post/azdo/api/api-step-1-connection/</link><pubDate>Sat, 05 Nov 2022 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/api-step-1-connection/</guid><description>&lt;p>Quite often people asks me how to interact programmatically with Azure DevOps server, main purpose &lt;strong>is retrieving data for custom reporting&lt;/strong> but also interacting with Work Item store etc. Luckily enough, all Azure DevOps functionalities are exposed via API, so you can &lt;strong>write small programs to automate mundane tasks&lt;/strong> and obtain what you need.&lt;/p>
&lt;p>In this post I&amp;rsquo;ll show how to setup the project in .NET and how to connect to the server. The example can be found in &lt;a href="https://github.com/alkampfergit/AzureDevopsExportQuickAndDirty">GitHub&lt;/a>.&lt;/p></description></item><item><title>Pills: Git command line failed to authenticate against Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/pills/git-losing-credentials/</link><pubDate>Sat, 27 Aug 2022 07:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/git-losing-credentials/</guid><description>&lt;p>Sometimes it just happens, you issue some Git command and you found that Azure DevOps deny Authentication, and it does not prompt for new credentials, so you are &lt;strong>just stuck not being able to access your account anymore&lt;/strong>.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/git-authentication-failed.png"> &lt;img src="../images/git-authentication-failed.png" alt="Git authentication failure" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Git authentication failure&lt;/em>&lt;/p>
&lt;p>As you can see in Figure 1, you got an Authenticaiton Failed error, and you are not prompted for new credentials. &lt;strong>Azure DevOps uses Personal Access Token to give access to Git, and this is done with an automatic procedure triggered by command line&lt;/strong>. In Figure 2 you can see Credential Manager Windows that appears the first time you are connecting to an Azure DevOps server.&lt;/p></description></item><item><title>Pills: Azure Devops artifacts retention policy</title><link>https://www.codewrecks.com/post/azdo/pills/artifacts-retention-policy/</link><pubDate>Mon, 08 Aug 2022 08:10:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/artifacts-retention-policy/</guid><description>&lt;p>When you use extensively Azure DevOps feeds, you will end with lots of small project that automatically publish packages at each build. I have projects where &lt;strong>each commit will publish a package thanks to GitVersion that generates a unique number for each build&lt;/strong>. This will end in a situation where thousands of packages are generated and uploaded to Azure DevOps.&lt;/p>
&lt;p>In Feed settings page you have a &lt;strong>retention policy&lt;/strong> that will automatically deletes old packages but keep those ones that are recently used, to avoid removing a package that is still in use.&lt;/p></description></item><item><title>Azure DevOps: Conditional variable value in pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/conditional-variable-in-pipeline/</link><pubDate>Tue, 21 Jun 2022 08:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/conditional-variable-in-pipeline/</guid><description>&lt;p>Let&amp;rsquo;s examine a simple situation, in Azure DevOps you do not have a way to change pipeline priority, thus, if &lt;strong>you need to have an agent always ready for high-priority builds, you can resort using more agent Pools&lt;/strong>. Basically you have N license for pipeline, so you can create N-1 agents in the default Pool and &lt;strong>create another pool, lets call it Fast, where you have an agent installed in a High Performance machine&lt;/strong>. When you need to have a pipeline run that has high priority you can schedule to run in Fast Pool and the game is done.&lt;/p></description></item><item><title>Clone a simple dashboard with API in Azure DevOps</title><link>https://www.codewrecks.com/post/azdo/api/api-clone-dashboard-azure-devops/</link><pubDate>Fri, 11 Feb 2022 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/api/api-clone-dashboard-azure-devops/</guid><description>&lt;p>If you work in Scrum, being able to visualize data on current and past Sprints is an invaluable way to keep track on team improvement. &lt;strong>Azure DevOps allows you to create Dashboards to visualize interesting metrics&lt;/strong>, but actually you do not have a way to create Dynamic Dashboards, I.E. a Dashboard that allows you to specify a parametric query so you can, for example, change the iteration and view how the data changes.&lt;/p></description></item><item><title>Azure DevOps: run test in PowerShell and publish results</title><link>https://www.codewrecks.com/post/azdo/pipeline/run-test-in-powershell/</link><pubDate>Sat, 01 Jan 2022 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/run-test-in-powershell/</guid><description>&lt;p>Creating full build in PowerShell has &lt;a href="https://www.codewrecks.com/post/azdo/pipeline/powershell-build/">lots of advantages&lt;/a> because you can simply &lt;strong>launch the script and having the build run in any environment&lt;/strong>. This simplifies tremendously debugging build scripts and moving Continuous Integration from one engine to other (Ex from Azure DevOps to GitHub actions).&lt;/p>
&lt;p>Clearly you need to thing in advance how to integrate &lt;strong>with your current CI engine&lt;/strong> because usually you will need to communicate information to the engine.&lt;/p></description></item><item><title>Pills: Pipeline decorators</title><link>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators/</link><pubDate>Sat, 20 Nov 2021 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pipeline-decorators/</guid><description>&lt;p>Pipeline decorators are a really peculiar feature of Azure DevOps, because they allow you to &lt;strong>specify a series of tasks that are run for EVERY pipeline in your organization&lt;/strong>, so they are rarely needed, but nevertheless they are a nice tool to know because there are situation when they are useful. Moreover, in latest &lt;a href="https://docs.microsoft.com/en-us/azure/devops/release-notes/2021/sprint-194-update">Sprint 194 update&lt;/a> they are expanded to support new functionalities, like running &lt;strong>before or after specific tasks&lt;/strong>.&lt;/p></description></item><item><title>Azure DevOps Pills: Pull request template</title><link>https://www.codewrecks.com/post/azdo/pills/pull-request-template/</link><pubDate>Sun, 14 Nov 2021 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/pull-request-template/</guid><description>&lt;p>Azure DevOps is a really big product and sometimes there are really useful features that are poorly publicized and goes under the radar. One of these is &lt;a href="https://docs.microsoft.com/en-us/azure/devops/repos/git/pull-request-templates?view=azure-devops">Pull Request Templates&lt;/a>, a really useful feature that allows you &lt;strong>to specify markdown template for your pull requests&lt;/strong>.&lt;/p>
&lt;p>I do not want to go into technical details, you can find &lt;a href="https://docs.microsoft.com/en-us/azure/devops/repos/git/pull-request-templates?view=azure-devops">all instructions in official documentation&lt;/a> but I&amp;rsquo;d like to point out why this feature is so useful.&lt;/p></description></item><item><title>Azure DevOps: Azure File copy troubleshooting</title><link>https://www.codewrecks.com/post/azdo/pipeline/azure-file-copy/</link><pubDate>Wed, 20 Oct 2021 07:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/azure-file-copy/</guid><description>&lt;p>If you need to copy files in a Azure Blob or in an Azure Virtual machine within a Azure DevOps pipeline, Azure File Copy Task is the right task to use, but sometimes you could find some problem that make it fails. In this post I&amp;rsquo;ll state some common errors I found using it and how to solve.&lt;/p>
&lt;h4 id="wrong-number-of-arguments-please-refer-to-the-help-page-on-usage-of-this-command">Wrong number of arguments, please refer to the help page on usage of this command&lt;/h4>
&lt;p>If you specify &lt;strong>additional command to the task you can have this error&lt;/strong>, actually I was not able to fully troubleshooting the reason, but I discovered that version 4 of the task is somewhat erratic, so it is really &lt;strong>better using version 3 that seems to me really more stable&lt;/strong>.&lt;/p></description></item><item><title>Passing boolean parameters to PowerShell scripts in Azure DevOps Pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/powershell-boolean/</link><pubDate>Sun, 08 Aug 2021 20:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/powershell-boolean/</guid><description>&lt;p>Let&amp;rsquo;s start from the problem, I have an Azure DevOps pipeline that calls a PowerShell script and the team needs to change the pipeline allowing &lt;strong>a boolean parameter to be passed to the PowerShell script when you queue the pipeline&lt;/strong>. The first tentative produces this error:&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-powershell" data-lang="powershell">&lt;span style="display:flex;">&lt;span>C:\a\_work\&lt;span style="color:#ae81ff">56&lt;/span>\s\build.dotnet.ps1 &lt;span style="color:#960050;background-color:#1e0010">:&lt;/span> 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Cannot &lt;span style="color:#66d9ef">process&lt;/span> argument transformation on parameter &lt;span style="color:#e6db74">&amp;#39;forceInstallPackage&amp;#39;&lt;/span>. Cannot 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>convert value &lt;span style="color:#e6db74">&amp;#34;System.String&amp;#34;&lt;/span> to type &lt;span style="color:#e6db74">&amp;#34;System.Boolean&amp;#34;&lt;/span>. 
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>Boolean parameters accept only Boolean values and numbers, &lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>The original code of the pipeline is the following one.&lt;/p></description></item><item><title>Azure DevOps: Use specific version of java in a pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/java-requirement-sonarcloud/</link><pubDate>Mon, 26 Apr 2021 17:00:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/java-requirement-sonarcloud/</guid><description>&lt;p>I have lots of pipelines with SonarCloud analysis, and in the last months I&amp;rsquo;ve started receiving warning for an old version of Java used in pipeline. &lt;strong>SonarCloud task scanner is gentle enough to warn you for months before dropping the support&lt;/strong>, nevertheless there is always the possibility that you forgot to update some agents so some pipeline starts failing with error&lt;/p>
&lt;blockquote>
&lt;p>The version of Java (1.8.xxx) you have used to run this analysis is deprecated and we stopped accepting it.&lt;/p></description></item><item><title>Continuous integration: PowerShell way</title><link>https://www.codewrecks.com/post/azdo/pipeline/powershell-build/</link><pubDate>Sat, 17 Apr 2021 07:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/powershell-build/</guid><description>&lt;p>I&amp;rsquo;m a great fan of Azure DevOps pipelines, I use them extensively, but I also a fan of simple building strategies, not relying on some specific build engine.&lt;/p>
&lt;blockquote>
&lt;p>For Continuous Integration, being too much dependent on a specific technology could be limiting.&lt;/p>&lt;/blockquote>
&lt;p>I&amp;rsquo;ve started CI with &lt;strong>many years ago with CC.NET&lt;/strong> and explored various engines, from MsBuild to Nant then Psake, cake etc. I&amp;rsquo;ve also used various CI tools, from TFS to AzureDevOps to TeamCity and others. My overall reaction to those tools was usually good, but &lt;strong>I always feel wrong to be bound to some specific technology&lt;/strong>. What about a customer using something I do not know like Travis CI? Also, when you need to do CI at customer sites, it is hard to force a particular technology. It is too easy to tell to a customer: just use X because it is the best, when the reality is that your knowledge of X is really good so it is your first choice.&lt;/p></description></item><item><title>Execute jobs depending on changed files on commit</title><link>https://www.codewrecks.com/post/azdo/pipeline/execution-condition-file-changed/</link><pubDate>Fri, 15 Jan 2021 17:50:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/execution-condition-file-changed/</guid><description>&lt;p>Configuring a build to build each commit to constantly verify quality of code is usually a good idea, but sooner or after, in big solutions, you start filling pipeline queue. The main problem is that, &lt;strong>when the team grows, the number of commits for each day of work increase and you start having problem in build queue&lt;/strong>. If build queue is more than one hour long, it is still acceptable, but if the queue is even more, it become clear that you should find a solution.&lt;/p></description></item><item><title>Authenticate to Azure DevOps private Nuget Feed</title><link>https://www.codewrecks.com/post/azdo/pipeline/nuget-feed-authenticate/</link><pubDate>Tue, 29 Dec 2020 10:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/nuget-feed-authenticate/</guid><description>&lt;p>When you build a project that depends on Azure DevOps hosted nuget feed, usually if the feed &lt;strong>is on the same organization of the pipeline and you are using Nuget task, everything regarding authentication happens automatically&lt;/strong>. A really different situation arise if you are using Nuget directly from Command Line or PowerShell script. A typical situation is: everything seems to work perfectly in your machine but during pipeline run you receive 401 (unauthenticated) error or the build hangs with a message like this:&lt;/p></description></item><item><title>Azure DevOps: Execute GitHub code analysis in a pipeline</title><link>https://www.codewrecks.com/post/azdo/pipeline/github-code-analysis/</link><pubDate>Mon, 28 Dec 2020 08:50:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/github-code-analysis/</guid><description>&lt;p>Ok, I know that many of you are questioning: Why using Azure DevOps to analyze code with CodeQL? Using GitHub actions is the preferred way to do so why bother with running in another CI? The scenario is simple, a company has everything on Azure DevOps, it wants to retain everything there but it &lt;strong>want to be able to gain advantage from GitHub CodeQL analysis&lt;/strong>. This scenario is not so uncommon, and you &lt;a href="https://docs.github.com/en/free-pro-team@latest/github/finding-security-vulnerabilities-and-errors-in-your-code/running-codeql-code-scanning-in-your-ci-system">have a nice GitHub guide&lt;/a> on how to run CodeQL code scanning in your CI System.&lt;/p></description></item><item><title>Azure DevOps: Convert your classic pipeline in YAML</title><link>https://www.codewrecks.com/post/azdo/pipeline/convert-to-yaml/</link><pubDate>Tue, 22 Dec 2020 18:50:42 +0000</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/convert-to-yaml/</guid><description>&lt;p>When I teach to customer Azure DevOps pipeline, I always suggest them to avoid the classic editor and &lt;strong>direct learn the tool using yaml pipeline&lt;/strong>; while we can agree that classic GUI based editor is simpler, it also miss many of the advantages of YAML and have limited use.&lt;/p>
&lt;p>Yaml based pipeline have a lot of advantages, first of all they are included in the code (I really love have everything in my repository), you can simple copy and paste in new projects, &lt;strong>templates are really powerful&lt;/strong> and also your pipeline definition follow your branches.&lt;/p></description></item><item><title>Azure DevOps Pills: View progress in backlog</title><link>https://www.codewrecks.com/post/azdo/pills/progress-by-item/</link><pubDate>Sun, 29 Nov 2020 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/progress-by-item/</guid><description>&lt;p>If you start managing your backlog with Azure Boards, you probably will end having Epics-&amp;gt;Features-&amp;gt;User stories breakdown and as manager you have a usual question to answer &lt;strong>where are we on this epics or feature and when you expect it to be finished&lt;/strong>.&lt;/p>
&lt;p>While this is not a simple question to answer looking only at the tool, you need to know that Azure Boards can give you a &lt;strong>quick help visualizing completed work in a dedicated column&lt;/strong>.&lt;/p></description></item><item><title>How to handle errors in PowerShell script used in Azure DevOps pipeline</title><link>https://www.codewrecks.com/post/general/powershell/pipeline-and-powershell-return-code/</link><pubDate>Sun, 15 Nov 2020 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/general/powershell/pipeline-and-powershell-return-code/</guid><description>&lt;p>Building with PowerShell or other scripting engine is a really nice option because you can &lt;strong>reuse the script in almost any Continuous Integration engine&lt;/strong> with a minimal effort, but sometimes there are tools that causes some headache.&lt;/p>
&lt;p>I had problem with tooling like yarn and npm when they are run in Azure DevOps pipeline, the problem is that &lt;strong>when the tool emit a warning, pipeline engine consider it an error and make the build fails&lt;/strong>. This happens usually because it is common to run PowerShell scripts in Azure DevOps pipeline with the option failOnStdErr to true&lt;/p></description></item><item><title>Azure DevOps Pills: PowerShell in pipeline with Linux agents</title><link>https://www.codewrecks.com/post/azdo/pipeline/linux-powershell/</link><pubDate>Sun, 01 Nov 2020 13:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/linux-powershell/</guid><description>&lt;p>This is a really basic fact, but it is often underestimated. PowerShell core is now available on Linux and this means that you can use PowerShell for your Azure DevOps pipeline even if the pipeline &lt;strong>will be executed on Linux machine&lt;/strong>. If I have this task in a pipeline&lt;/p>
&lt;div class="highlight">&lt;div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">
&lt;table style="border-spacing:0;padding:0;margin:0;border:0;">&lt;tr>&lt;td style="vertical-align:top;padding:0;margin:0;border:0;">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
&lt;/span>&lt;span style="white-space:pre;-webkit-user-select:none;user-select:none;margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
&lt;/span>&lt;/code>&lt;/pre>&lt;/td>
&lt;td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
&lt;pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#f92672">steps&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#f92672">task&lt;/span>: &lt;span style="color:#ae81ff">PowerShell@2&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">displayName&lt;/span>: &lt;span style="color:#ae81ff">Simple task&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">inputs&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">targetType&lt;/span>: &lt;span style="color:#ae81ff">inline&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#f92672">script&lt;/span>: |&lt;span style="color:#e6db74">
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Write-Host &amp;#34;Simple task for simple stage pipeline&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Write-Host &amp;#34;Value for variable Configuration is $(configuration) value for parameterA is ${{ parameters.ParameterA }}&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Write-Host &amp;#34;Change Variable value configuration to &amp;#39;debug&amp;#39;&amp;#34;
&lt;/span>&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#e6db74"> Write-Host &amp;#34;##vso[task.setvariable variable=configuration]debug&amp;#34;&lt;/span>&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/td>&lt;/tr>&lt;/table>
&lt;/div>
&lt;/div>
&lt;p>I can schedule the pipeline on a Linux hosted agent, and everything runs smoothly.&lt;/p></description></item><item><title>Azure DevOps pills: Avoid triggering pipelines continuous integration with commit message</title><link>https://www.codewrecks.com/post/azdo/pipeline/no-ci/</link><pubDate>Sat, 24 Oct 2020 10:00:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/no-ci/</guid><description>&lt;p>There are situation when you need to push frequently on a Git repository, a typical example is when you are &lt;strong>authoring a yaml pipeline and you are experimenting stuff&lt;/strong>; in such a situation you modify the pipeline, push, test and go on. It is quite common to push really frequently and this usually saturate standard pipelines.&lt;/p>
&lt;p>It is not uncommon to have a standard pipeline of build and test running for each commit and for each branch. In such a situation &lt;strong>if you push too often you risk to saturate all of your build agents&lt;/strong>.&lt;/p></description></item><item><title>Azure DevOps Pills: Update java in agent machines if you use SonarCloud integration</title><link>https://www.codewrecks.com/post/azdo/pills/update-java-for-sonarcloud-agents/</link><pubDate>Sat, 12 Sep 2020 12:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/update-java-for-sonarcloud-agents/</guid><description>&lt;p>If you have Azure DevOps pipelines that uses SonarCloud analyzer, you should update java version for your agents if you are using version 8 because support is going to drop.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/java-out-to-datepng.png"> &lt;img src="../images/java-out-to-datepng.png" alt="Warning message for old java version installed" />&lt;/a>
&lt;em>&lt;strong>Figure 1&lt;/strong>&lt;/em>: &lt;em>Warning message for old java version installed&lt;/em>&lt;/p>
&lt;p>You have not many days left to solve this issue before your builds &lt;strong>starts failing because Sonar Cloud analyzer will no longer work&lt;/strong>. The solution is simple, you can simply download an updated version of Open JDK in all agent machines. To check actual java version used you can simply check the JAVA_HOME capability directly in agent administration page.&lt;/p></description></item><item><title>Azure DevOps Pills: Integration with SonarCloud</title><link>https://www.codewrecks.com/post/azdo/pills/sonarcloud-integration/</link><pubDate>Thu, 20 Aug 2020 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/sonarcloud-integration/</guid><description>&lt;p>I&amp;rsquo;ve dealt in the past on &lt;a href="http://www.codewrecks.com/blog/index.php/2018/10/10/azure-devops-pipelines-and-sonar-cloud-gives-free-analysis-to-your-os-project/">how to integrate SonarCloud analysis in a TFS/AzDo pipeline&lt;/a> but today it is time to update that post with some interesting nice capabilities.&lt;/p>
&lt;p>If you look in Figure 1 you can see that &lt;strong>now SonarCloud has a direct integration with Azure DevOps pull requests&lt;/strong>, all you need to do is add a Personal Access Token with code access privilege and you are ready to go.&lt;/p></description></item><item><title>Azure DevOps Pills: Process rules for state transition</title><link>https://www.codewrecks.com/post/azdo/pills/state-rules/</link><pubDate>Wed, 19 Aug 2020 08:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pills/state-rules/</guid><description>&lt;p>One of the most requested feature for Azure DevOps is the ability to restrict state transition for custom processes. Whenever a company starts creating its own process, Work Item States is always a big area of discussions. Which state we need? Who can change state from X to Y? &lt;strong>Until few weeks ago, only if you have Azure DevOps server with old process model based on XML you can restrict transition between states. Now this feature is available even for cloud version.&lt;/strong>&lt;/p></description></item><item><title>Release a product composed by multiple projects and builds</title><link>https://www.codewrecks.com/post/azdo/pipeline/release-multiple-build/</link><pubDate>Sat, 30 May 2020 15:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/release-multiple-build/</guid><description>&lt;h2 id="situation">Situation&lt;/h2>
&lt;p>We have a legacy project, born when Asp.Net WebForm was still a thing and Asp.NET MVC was still not released. This project grow during the years, in more that one subversion and git repositories. It was finally time to start setting some best practice in action and, to avoid complexity, we end with a &lt;strong>single Git Repositories with six subfolders and six different solutions, each one that contains a part of the final product&lt;/strong>.&lt;/p></description></item><item><title>Test error but build green when test are re-run</title><link>https://www.codewrecks.com/post/azdo/pipeline/reruntest/</link><pubDate>Thu, 23 Apr 2020 19:12:42 +0200</pubDate><guid>https://www.codewrecks.com/post/azdo/pipeline/reruntest/</guid><description>&lt;p>Suppose you have a result of an Azure DevOps Pipeline that contains this strange result: you have a clear indication that test run failed (1), but the overall build is green, both the entire build (2) and the single stage (3).&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/re-run-result.png"> &lt;img src="../images/re-run-result.png" alt="Confusing result of a build" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1:&lt;/strong>&lt;/em> &lt;em>Confusing result of a build&lt;/em>&lt;/p>
&lt;p>In such a situation you wonder what happened, the overall build is green, but &lt;strong>the clear indication that test run failed gives you some bad feeling that something was not really ok.&lt;/strong> In this situation the problem is that, if you click on Test Run Failed error message you will be redirected to a clear log that states that test run failed.&lt;/p></description></item></channel></rss>