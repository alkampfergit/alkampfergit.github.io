<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>DevOps on Codewrecks</title><link>https://www.codewrecks.com/categories/devops/</link><description>Recent content in DevOps on Codewrecks</description><generator>Hugo</generator><language>en</language><lastBuildDate>Sat, 03 Apr 2021 07:00:18 +0200</lastBuildDate><atom:link href="https://www.codewrecks.com/categories/devops/index.xml" rel="self" type="application/rss+xml"/><item><title>Hello terraform</title><link>https://www.codewrecks.com/post/devops/terraform-hello-world/</link><pubDate>Sat, 03 Apr 2021 07:00:18 +0200</pubDate><guid>https://www.codewrecks.com/post/devops/terraform-hello-world/</guid><description>&lt;p>I&amp;rsquo;m studying &lt;a href="https://www.oreilly.com/library/view/terraform-up/9781492046899/">Terraform Up and Running&lt;/a> book, a really good book but all the examples are for AWS. I have nothing against AWS, but I&amp;rsquo;m familiar with Azure, so I&amp;rsquo;d like to &lt;strong>start porting some of the example of the book for Azure&lt;/strong>. While I&amp;rsquo;m not sure if I&amp;rsquo;ll keep up with the conversion, if you are curious I&amp;rsquo;ve started the work &lt;a href="https://github.com/AlkampferOpenSource/terraform-up-and-running-code/tree/master/code/terraformAzure">in this repository&lt;/a>, feel free to post any correction (remember that I&amp;rsquo;m learning Terraform, I&amp;rsquo;m not an expert :))&lt;/p></description></item><item><title>Automatic publish PowerShell Gallery with GitHub Actions</title><link>https://www.codewrecks.com/post/general/powershell-gallery-publish/</link><pubDate>Mon, 26 Oct 2020 18:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/general/powershell-gallery-publish/</guid><description>&lt;p>Publishing &lt;a href="http://www.codewrecks.com/post/general/powershell-gallery/">PowerShell helper functions&lt;/a> to PowerShell gallery is a good solution to &lt;strong>maximize reuse on Build and general Scripting for DevOps mundane tasks.&lt;/strong> On &lt;a href="https://github.com/AlkampferOpenSource/powershell-build-utils">this GitHub repository&lt;/a> I&amp;rsquo;ve put some simple build utilities that can &lt;strong>be published on PowerShell gallery&lt;/strong>.&lt;/p>
&lt;p>To streamline the process I&amp;rsquo;ve decided to &lt;strong>automate publish process with GitHub actions&lt;/strong>, because this is the typical scenario where GH Actions shine. First of all I&amp;rsquo;ve reorganized my sources to create a &lt;strong>single PowerShell file for each function, then I&amp;rsquo;ve found this &lt;a href="https://evotec.xyz/powershell-single-psm1-file-versus-multi-file-modules/">excellent post&lt;/a> that explain how to combine all files into a unique file to maximize performances.&lt;/strong>&lt;/p></description></item><item><title>Docker-compose to speed up setup dev environment</title><link>https://www.codewrecks.com/post/general/docker-compose-quick-start/</link><pubDate>Sat, 22 Aug 2020 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/general/docker-compose-quick-start/</guid><description>&lt;p>Even if you do not plan to use Docker to distribute your application you can use it to speedup setup of development environment, for new developers and for new machines. I have a project where we use MongoDb and ElasticSearch, &lt;strong>mongodb should be authenticated and ElasticSearch needs to have some special plugin installed&lt;/strong>.&lt;/p>
&lt;blockquote>
&lt;p>Time to setup a new machine sometimes is high due to dependencies.&lt;/p>&lt;/blockquote>
&lt;p>I&amp;rsquo;m aware that for experienced user setting up mongodb and ElasticSearch is not a complex task, but nevertheless you usually can have some problem.&lt;/p></description></item><item><title>How to locate most recent MSBuild.exe using PowerShell</title><link>https://www.codewrecks.com/post/general/find-msbuild-location-in-powershell/</link><pubDate>Sun, 26 Jul 2020 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/general/find-msbuild-location-in-powershell/</guid><description>&lt;p>If you want to build a Full Framework based project from PowerShell, &lt;strong>you need to locate MsBuild.exe tool tool to compile your project&lt;/strong>. You can indeed &amp;ldquo;open developer command prompt&amp;rdquo; to have a CommandLine with all needed tools in the %PATH%, but if you want to create a generic PowerShell script that uses MsBuild, knowing its location is probably a must.&lt;/p>
&lt;p>There are some solutions in the internet, but &lt;strong>I&amp;rsquo;ve found a nice module called VSSetup that can helps locating MsBuild&lt;/strong> because it gives you interesting information for every version of Visual Studio installed in the system (from VS2017 and subsequent versions).&lt;/p></description></item><item><title>Publish PowerShell functions to PowerShell Gallery</title><link>https://www.codewrecks.com/post/general/powershell-gallery/</link><pubDate>Sun, 28 Jun 2020 08:00:00 +0200</pubDate><guid>https://www.codewrecks.com/post/general/powershell-gallery/</guid><description>&lt;p>I&amp;rsquo;m a great fan of PowerShell script for build and release, even if Azure DevOps, GitHub Actions, TeamCity or Jenkins have pre-made task for common operations (zipping, file handling, etc). I always like using PowerShell scripts to do most of the job and the reason is simple: &lt;strong>PowerShell scripts are easy to test, easy to understand and are not bound to a specific CI/CD engine&lt;/strong>.&lt;/p>
&lt;p>Since I&amp;rsquo;m not a real PowerShell expert, during the years I&amp;rsquo;ve made some functions I reuse across projects, but I didn&amp;rsquo;t organize them, leading to some confusion over the years.&lt;/p></description></item><item><title>Group application insight logs by custom property</title><link>https://www.codewrecks.com/post/azure/application-insight-group-logs-by-custom-property/</link><pubDate>Mon, 27 Apr 2020 18:45:18 +0200</pubDate><guid>https://www.codewrecks.com/post/azure/application-insight-group-logs-by-custom-property/</guid><description>&lt;p>Today we found excessive number of logs in Application Insight instance, an application that usually cost few bucks each month, started to use more resources. Looking at a summary of last 30 days we see &lt;strong>excessive number of custom events&lt;/strong>.&lt;/p>
&lt;p>&lt;a target="_blank" href="../images/application-insight-summary.png"> &lt;img src="../images/application-insight-summary.png" alt="Summary of Application Insight data" />&lt;/a>&lt;/p>
&lt;p>&lt;em>&lt;strong>Figure 1:&lt;/strong>&lt;/em> &lt;em>Application insight summary for a specific application&lt;/em>&lt;/p>
&lt;p>Now the problem is: how can I quickly spot out why we have an excessive number of CustomEvents? &lt;strong>Logs shows me clearly that the vast majority of logs are indeed Custom Events&lt;/strong>. To have a better insight to detail of events, we need to use custom queries, first of all I grouped by name.&lt;/p></description></item><item><title>Why I love DevOps and hate DevSecOps</title><link>https://www.codewrecks.com/post/old/2020/01/why-i-love-devops-and-hate-devsecops/</link><pubDate>Sat, 18 Jan 2020 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2020/01/why-i-love-devops-and-hate-devsecops/</guid><description>&lt;p>DevOps is becoming a buzzword, it makes hype and everyone want to be part of it, even if he/she does not know exactly what DevOps is. &lt;strong>One of the symptoms of this is the “DevOpsEngineer”, a title that does not fit in my head.&lt;/strong> We could debate for days or years on the right definition of DevOps, but essentially is a &lt;em>cultural approach on building software focused on building the right thing with the maximum quality and satisfaction for the customer.&lt;/em>&lt;/p></description></item><item><title>WIQL editor extension For Azure DevOps</title><link>https://www.codewrecks.com/post/old/2019/02/wiql-editor-extension-for-azure-devops/</link><pubDate>Sun, 03 Feb 2019 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2019/02/wiql-editor-extension-for-azure-devops/</guid><description>&lt;p>One of the nice feature of Azure DevOps is extendibility, thanks to REST API you can write addins or standalone programs that interacts with the services. &lt;strong>One of the addin that I like the most is the&lt;/strong> &lt;a href="https://marketplace.visualstudio.com/items?itemName=ottostreifel.wiql-editor">&lt;strong>Work Item Query Language Editor&lt;/strong>&lt;/a>, a nice addin that allows you to interact directly with the underling syntax of Work Item query.&lt;/p>
&lt;p>&lt;strong>Once installed, whenever you are in query Editor, you have the ability to directly edit the query with WIQL syntax,&lt;/strong> thanks to the “Edit Query wiql” menu entry.&lt;/p></description></item><item><title>Deploy click-once application on Azure Blob with Azure DevOps</title><link>https://www.codewrecks.com/post/old/2018/12/deploy-click-once-application-on-azure-blob-with-azure-devops/</link><pubDate>Fri, 07 Dec 2018 17:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2018/12/deploy-click-once-application-on-azure-blob-with-azure-devops/</guid><description>&lt;p>It was a long time ago I blogged on how to &lt;a href="http://www.codewrecks.com/blog/index.php/2015/12/30/rename-xmlrpc-php-on-your-wordpress-installation-2/">publish a click-once application&lt;/a> from a VSTS Build to Azure Blob, long time was passed, and lots of stuff changed. &lt;strong>The whole process is now simpler,&lt;/strong> thanks to many dedicated tasks that avoid doing any manual work.&lt;/p>
&lt;p>My new build always start with a  GitVersion custom tasks, that populates some environment variables with version numbers generated by GitVersion, this will allow me to simply add an MsBuild task in the build to publish click-once using automatic GitVersion versioning.&lt;/p></description></item><item><title>Create a release in TFS 2015 VSTS Release Management</title><link>https://www.codewrecks.com/post/old/2016/06/create-a-release-in-tfs-2015-vsts-release-management/</link><pubDate>Sat, 18 Jun 2016 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/create-a-release-in-tfs-2015-vsts-release-management/</guid><description>&lt;p>This is the end of the journey of the last serie of posts. I’m now at the situation where I have a build that produces a single zip file with everything I need to deploy the software and a bunch of PowerShell scripts that relase the software using that zip as a source artifact.&lt;/p>
&lt;p>Now it is time to automate the process with Release Management. I want to use RM because the process is automated on a chain of environments, but also I have &lt;strong>traceability, auditing, and verification of the release procedures.&lt;/strong> I’m not going to cover all the steps needed to create the a release definition, I want to focus on how simple is creating a Release Process when you adopt Zip+PowerShell approach. I strongly suggest to have a look &lt;a href="https://www.visualstudio.com/en-us/features/release-management-vs.aspx">at official site&lt;/a> if you never heard of VSTS / TFS Release Management.&lt;/p></description></item><item><title>How to manage PowerShell installation scripts</title><link>https://www.codewrecks.com/post/old/2016/06/how-to-manage-powershell-installation-scripts/</link><pubDate>Sat, 18 Jun 2016 06:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/how-to-manage-powershell-installation-scripts/</guid><description>&lt;p>In  &lt;a href="http://www.codewrecks.com/blog/index.php/2016/06/03/create-a-release-manager-in-tfs-with-powershell-and-zipped-artifacts/">previous post&lt;/a> I explained how I like to release software using a simple paradigm:&lt;/p>
&lt;blockquote>
&lt;p>build produces one zipped file with everything needed for a release, then a PowerShell scripts accepts the path of this zipped release and installation parameters and executes every step to install/upgrade the software.&lt;/p>&lt;/blockquote>
&lt;p>This approach has numerous advantages, first of all &lt;strong>you can always test script with PowerShell ISE in a Developer Machine&lt;/strong>. Just download from build artifacts the version you want to use for test, load installation script in PowerShell ISE, then run the script, and if something went wrong (the script has a bug or needs to be updated) just debug and modify it until it works.&lt;/p></description></item><item><title>Checklists are prerequisites for Release Automation</title><link>https://www.codewrecks.com/post/old/2016/06/checklists-are-prerequisites-for-release-automation/</link><pubDate>Thu, 09 Jun 2016 19:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/checklists-are-prerequisites-for-release-automation/</guid><description>&lt;p>I’ve dealt in some posts on how to &lt;strong>deploy an application with a PowerShell script&lt;/strong> that uses an archive produced by a build. Automating a release could be simple or complex, depending on the nature of the software to be deployed, but there is a single suggestion that I always keep in my mind:&lt;/p>
&lt;blockquote>
&lt;p>If you don’t have one or more Checklists for manual installation of a software do not even try to autmate installation process&lt;/p></description></item><item><title>Create a Release with PowerShell Zipped Artifacts and Chocolatey</title><link>https://www.codewrecks.com/post/old/2016/06/create-a-release-manager-in-tfs-with-powershell-and-zipped-artifacts/</link><pubDate>Fri, 03 Jun 2016 14:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/create-a-release-manager-in-tfs-with-powershell-and-zipped-artifacts/</guid><description>&lt;p>In previous post I described how to create a simple PowerShell scripts that is capable of installing a software starting from a zipped file that contains the “release” of a software (produced by a build) and some installation parameters. Once you have this scenario up and running, releasing your software automatically is quite simple.&lt;/p>
&lt;blockquote>
&lt;p>Once you automated the installation with a PowerShell script plus an archive file with Everything is needed to install the software, you are only a step away from Continuous Deployment.&lt;/p></description></item><item><title>Using PowerShell scripts to deploy your software</title><link>https://www.codewrecks.com/post/old/2016/06/using-powershell-scripts-to-deploy-your-software/</link><pubDate>Fri, 03 Jun 2016 12:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/06/using-powershell-scripts-to-deploy-your-software/</guid><description>&lt;p>I often use PowerShell scripts to package a “release” of a software during a build because it gives me a lots of flexibility.&lt;/p>
&lt;p>&lt;a href="http://www.codewrecks.com/blog/index.php/2015/06/30/manage-artifacts-with-tfs-build-vnext/">Manage artifacts with TFS Build vNext&lt;/a>&lt;/p>
&lt;p>&lt;a href="http://www.codewrecks.com/blog/index.php/2016/01/30/different-approaches-for-publishing-artifacts-in-build-vnext/">Different approaches for publishing Artifacts in build vNext&lt;/a>&lt;/p>
&lt;p>&lt;strong>The advantage of using PowerShell is complete control over what will be included in the “release” package&lt;/strong>. This allows you to manipulate configuration files, remove unnecessary files, copy files from somewhere else in the repository, etc etc.&lt;/p></description></item><item><title>Avoid using Shell command in PowerShell scipts</title><link>https://www.codewrecks.com/post/old/2016/05/avoid-using-shell-command-in-powershell-scipts/</link><pubDate>Fri, 27 May 2016 15:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2016/05/avoid-using-shell-command-in-powershell-scipts/</guid><description>&lt;p>I have setup scripts that are used to install software, they are simply based on this paradigm&lt;/p>
&lt;blockquote>
&lt;p>The build produces a zip file that contains everything needed to install the software, then we have a script that accepts the zip file as parameter as well as some other parameters and does install sofwtare on a local machine&lt;/p>&lt;/blockquote>
&lt;p>This simple paradigm is perfect, because &lt;strong>we can manually install a software launching powershell, or we can create a Chocolatey package to automate the installation.&lt;/strong> Clearly you can use the very same script to release the software inside TFS Release Management.&lt;/p></description></item><item><title>Fix of ChangeConnectionString resource in DSC Script to deploy Web Site</title><link>https://www.codewrecks.com/post/old/2014/06/fix-of-changeconnectionstring-resource-in-dsc-script-to-deploy-web-site/</link><pubDate>Tue, 17 Jun 2014 04:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/06/fix-of-changeconnectionstring-resource-in-dsc-script-to-deploy-web-site/</guid><description>&lt;!--StartFragment-->- [How 
&lt;p>&lt;br>to deploy a web site with Powershell DSC](&lt;a href="http://www.codewrecks.com/blog/index.php/2014/06/11/how-to-deploy-web-site-with-powershell-dsc/">http://www.codewrecks.com/blog/index.php/2014/06/11/how-to-deploy-web-site-with-powershell-dsc/&lt;/a>)&lt;/p>
&lt;ul>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2014/06/12/how-to-deploy-a-web-site-with-powershell-part-2/">How&lt;br>
&lt;br>to Deploy a Web Site with PowerShell DSC Part 2&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2014/06/15/deploying-web-site-with-powershell-dsc-part-3/">How to Deploy a Web Site with PowerShell DSC Part 3&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>In the second part of this series I’ve received a really good comment by Rob Cannon, that warn me about an error in my ChangeConnectionString resource. In that article I told you that is ok for the Test part to return always False, so the Set Script is always run, because it is idempotent. This is true if you are using the Push Model, &lt;strong>but if you are using the Pull Model instead, every 30 minutes the DSC will be applied and web config will be changed, so your application pool will be restarted&lt;/strong>. This is not a good situation, so I decided to change the script fixing the Test Part.&lt;/p></description></item><item><title>Deploying Web Site With PowerShell DSC part 3</title><link>https://www.codewrecks.com/post/old/2014/06/deploying-web-site-with-powershell-dsc-part-3/</link><pubDate>Sun, 15 Jun 2014 08:00:37 +0200</pubDate><guid>https://www.codewrecks.com/post/old/2014/06/deploying-web-site-with-powershell-dsc-part-3/</guid><description>&lt;ul>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2014/06/11/how-to-deploy-web-site-with-powershell-dsc/">How to deploy a web site with Powershell DSC&lt;/a>&lt;/li>
&lt;li>&lt;a href="http://www.codewrecks.com/blog/index.php/2014/06/12/how-to-deploy-a-web-site-with-powershell-part-2/">How to Deploy a Web Site with PowerShell DSC Part 2&lt;/a>&lt;/li>
&lt;/ul>
&lt;p>In this last part of this series I’ll explain how to deploy database projects output to local database of node machine. It was the most difficult due to some errors present in the xDatabase resource. Actually &lt;strong>I have a couple of Database Projects in my solution, the first one define the structure of the database needed by my application while the second one reference the first and installs only some test data&lt;/strong> with a Post Deploy Script. You can read about this technique in my previous post &lt;a href="http://www.codewrecks.com/blog/index.php/2013/08/05/manage-test-data-in-visual-studio-database-project/">Manage Test Data in Visual Studio Database Project&lt;/a> Sadly enough, the xDatabase resource of DSC is still very rough and grumpy.&lt;/p></description></item></channel></rss>